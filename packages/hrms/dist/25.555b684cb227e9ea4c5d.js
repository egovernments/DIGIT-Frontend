(self.webpackChunkhrms=self.webpackChunkhrms||[]).push([[25],{1025:(e,t,n)=>{function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n(2947),l=n(5206),a=r(l),o=n(7380),u=n(7106),c=n(7903),s=n(2774),d=r(n(5658)),m=n(4195),v=r(n(3292));function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function E(e,t){if(null==e)return{};var n,r,i={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var y={error:{imgUrl:"https://s3.ap-south-1.amazonaws.com/egov-qa-assets/error-image.png",infoMessage:"CORE_SOMETHING_WENT_WRONG",buttonInfo:"ACTION_TEST_HOME"},maintenance:{imgUrl:"https://s3.ap-south-1.amazonaws.com/egov-qa-assets/maintainence-image.png",infoMessage:"CORE_UNDER_MAINTENANCE",buttonInfo:"ACTION_TEST_HOME"},notfound:{imgUrl:"https://s3.ap-south-1.amazonaws.com/egov-qa-assets/PageNotFound.png",infoMessage:"MODULE_NOT_FOUND",buttonInfo:"ACTION_TEST_HOME"}},C=function(e){var t=Digit.Hooks.useQueryParams().type,n=y[void 0===t?"error":t],r=o.useTranslation().t;return a.createElement("div",{className:"error-boundary"},a.createElement("div",{className:"error-container"},a.createElement("img",{src:n.imgUrl,alt:"error"}),a.createElement("h1",null,r(n.infoMessage)),a.createElement("button",{onClick:function(){e.goToHome()}},r(n.buttonInfo))))},O=function(){var e,t,n="employee"===Digit.UserService.getType()?"/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/user/error":"/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/citizen/error";return window.location.href.includes("employee/user/error")||window.location.href.includes("citizen/error")||(window.location.href=n),a.createElement("span",null)},S=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={error:null,errorStack:null,hasError:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n),r.getDerivedStateFromError=function(e){return{error:null==e?void 0:e.message,hasError:!0,errorStack:null==e?void 0:e.stack}};var i=r.prototype;return i.componentDidCatch=function(e,t){this.setState({error:null==e?void 0:e.message,hasError:!0,errorStack:null==e?void 0:e.stack})},i.render=function(){return this.state.hasError?a.createElement("div",{className:"error-boundary"},a.createElement(O,null),a.createElement(C,{initData:this.props.initData})):this.props.children},r}(a.Component),b=function(e,t,n){var r=null==e?void 0:e[""+t];r&&r.map((function(e){e.link=e.navigationURL,e.i18nKey=n(e.name)}));var i,l={links:null==r?void 0:r.reverse(),header:Digit.Utils.locale.getTransformedLocale("ACTION_TEST_"+t),iconName:"CITIZEN_"+t+"_ICON"};return"FSM"===t&&[{role:"FSM_DSO",from:"/"+(null===(i=window)||void 0===i?void 0:i.contextPath)+"/citizen/fsm/dso-dashboard",dashoardLink:"CS_LINK_DSO_DASHBOARD",loginLink:"CS_LINK_LOGIN_DSO"}].map((function(e){var t,r,i,a=e.role,o=e.from,u=e.loginLink,c=e.dashoardLink;Digit.UserService.hasAccess(a)?null==l||null===(t=l.links)||void 0===t||t.push({link:o,i18nKey:n(c)}):null==l||null===(r=l.links)||void 0===r||r.push({link:"/"+(null===(i=window)||void 0===i?void 0:i.contextPath)+"/citizen/login",state:{role:"FSM_DSO",from:o},i18nKey:n(u)})})),l},N=function(e){var t=e.modules,n=e.getCitizenMenu,r=e.fetchedCitizen,l=e.isLoading,u=t.filter((function(e){return"Payment"===e.code}))[0],c=t.filter((function(e){return"Payment"!==e.code})),s=[u].concat(c),d=o.useTranslation().t;return l?a.createElement(i.Loader,null):a.createElement(a.Fragment,null,a.createElement("div",{className:"citizen-all-services-wrapper"},location.pathname.includes("sanitation-ui/citizen/all-services")?null:a.createElement(i.BackButton,null),a.createElement("div",{className:"citizenAllServiceGrid"},s.filter((function(e){return e})).map((function(e,t){var l,o,u,c,s,m,v,f=e.code;return r&&(u=r?b(n,f,d):void 0),(null===(l=u)||void 0===l||null===(o=l.links)||void 0===o?void 0:o.length)>0?a.createElement(i.CitizenHomeCard,{header:d(null===(c=u)||void 0===c?void 0:c.header),links:null===(s=u)||void 0===s||null===(m=s.links)||void 0===m||null===(v=m.filter((function(e){return null==e?void 0:e.link})))||void 0===v?void 0:v.sort((function(e,t){return(null==e?void 0:e.orderNumber)-(null==t?void 0:t.orderNumber)})),Icon:function(){return function(e){switch(e){case"PT":default:return a.createElement(i.PTIcon,{className:"fill-path-primary-main"});case"WS":return a.createElement(i.WSICon,{className:"fill-path-primary-main"});case"FSM":return a.createElement(i.FSMIcon,{className:"fill-path-primary-main"});case"MCollect":return a.createElement(i.MCollectIcon,{className:"fill-path-primary-main"});case"PGR":return a.createElement(i.PGRIcon,{className:"fill-path-primary-main"});case"TL":return a.createElement(i.TLIcon,{className:"fill-path-primary-main"});case"OBPS":return a.createElement(i.OBPSIcon,{className:"fill-path-primary-main"});case"Bills":return a.createElement(i.BillsIcon,{className:"fill-path-primary-main"})}}(f)},Info:"OBPS"===f?function(){return a.createElement(i.CitizenInfoLabel,{style:{margin:"0px",padding:"10px"},info:d("CS_FILE_APPLICATION_INFO_LABEL"),text:d("BPA_CITIZEN_HOME_STAKEHOLDER_INCLUDES_INFO_LABEL")})}:null,isInfo:"OBPS"===f}):a.createElement(a.Fragment,null)})))))},I=function(e){var t=e.modules;return a.createElement("div",{className:"employee-app-container"},a.createElement("div",{className:"ground-container moduleCardWrapper gridModuleWrapper"},t.map((function(e,t){var n=e.code,r=Digit.ComponentRegistryService.getComponent(n+"Card")||function(){return a.createElement(a.Fragment,null)};return a.createElement(r,{key:t})}))))},w=function(e){var t=e.userType,n=e.modules,r=e.getCitizenMenu,i=e.fetchedCitizen,l=e.isLoading;return"citizen"===t?a.createElement(N,{modules:n,getCitizenMenu:r,fetchedCitizen:i,isLoading:l}):a.createElement(I,{modules:n})},_=function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),""==t)return e;for(;null!==(r=e)&&void 0!==r&&r.includes(t);){var r,i;e=null===(i=e)||void 0===i?void 0:i.replace(t,n)}return e},D=function(e){var t,n=l.useState(null),r=n[0],o=n[1],u=l.useState([]),c=u[0],d=u[1],m=(l.useState([]),s.useHistory());return l.useEffect((function(){var e,t,n=Digit.SessionStorage.get("citizen.userRequestObject"),r=[],i=[];null==n||null===(e=n.info)||void 0===e||null===(t=e.roles)||void 0===t||t.forEach((function(e){return r.push(e.tenantId)}));var l=r.filter((function(e,t,n){return n.indexOf(e)===t}));null==l||l.forEach((function(e){var t;i.push({label:"TENANT_TENANTS_"+(null===(t=_(e,".","_"))||void 0===t?void 0:t.toUpperCase()),value:e})})),null==i||i.filter((function(e){return e.value==Digit.SessionStorage.get("Employee.tenantId")})),d(i)}),[r]),a.createElement("div",{style:null!=e&&e.mobileView?{color:"#767676"}:{}},a.createElement(i.Dropdown,{t:null==e?void 0:e.t,option:c,selected:c.find((function(e){return e.value===(null==r?void 0:r.value)})),optionKey:"label",select:function(e){var t,n,r,i,l=Digit.SessionStorage.get("citizen.userRequestObject"),a=null===(t=Digit.SessionStorage.get("citizen.userRequestObject"))||void 0===t||null===(n=t.info)||void 0===n||null===(r=n.roles)||void 0===r?void 0:r.filter((function(t){return t.tenantId===e.value}));if((null==a?void 0:a.length)>0&&(l.info.roles=a,l.info.tenantId=null==e?void 0:e.value),Digit.SessionStorage.set("Employee.tenantId",null==e?void 0:e.value),Digit.UserService.setUser(l),o(e),window.location.href.includes("/"+(null===(i=window)||void 0===i?void 0:i.contextPath)+"/employee/")){var u,c,s=(null===(u=location.state)||void 0===u?void 0:u.from)||"/"+(null===(c=window)||void 0===c?void 0:c.contextPath)+"/employee";m.replace(s)}window.location.reload()},freeze:!0,customSelector:a.createElement("label",{className:"cp"},null==e?void 0:e.t("TENANT_TENANTS_"+(null===(t=_(Digit.SessionStorage.get("Employee.tenantId"),".","_"))||void 0===t?void 0:t.toUpperCase())))}))},T=function(e){var t=e.dropdown||!1,n=Digit.Hooks.useStore.getInitData(),r=n.data,o=n.isLoading,u=r||{},c=u.languages,s=u.stateInfo,d=Digit.StoreData.getCurrentLanguage(),m=l.useState(d),v=m[0],f=m[1],p=function(e){f(e.value),Digit.LocalizationService.changeLanguage(e.value,s.code)};return o?null:t?a.createElement("div",null,a.createElement(i.Dropdown,{option:c,selected:c.find((function(e){return e.value===d})),optionKey:"label",select:p,freeze:!0,customSelector:a.createElement("label",{className:"cp"},c.find((function(e){return e.value===v})).label)})):a.createElement(a.Fragment,null,a.createElement("div",{style:{marginBottom:"5px"}},"Language"),a.createElement("div",{className:"language-selector"},c.map((function(e,t){return a.createElement("div",{className:"language-button-container",key:t},a.createElement(i.CustomButton,{selected:e.value===v,text:e.label,onClick:function(){return p(e)}}))}))))},L=function(e){var t,n;return a.createElement("span",{className:"user-img-txt",onClick:e.toggleMenu,title:e.name},null==e||null===(t=e.name)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.toUpperCase())},R=function(e){var t,n,r,l,o,u,c,d=e.t,m=e.stateInfo,v=e.toggleSidebar,f=e.handleLogout,p=e.userDetails,E=e.CITIZEN,g=e.cityDetails,h=e.mobileView,y=e.userOptions,C=e.handleUserDropdownSelection,O=e.logoUrl,S=e.showLanguageChange,b=void 0===S||S,N=a.useState(null),I=N[0],w=N[1];a.useEffect((function(){try{var e,t=Digit.ULBService.getCurrentTenantId(),n=null==p||null===(e=p.info)||void 0===e?void 0:e.uuid,r=function(){if(n)return Promise.resolve(Digit.UserService.userSearch(t,{uuid:[n]},{})).then((function(e){if(e&&e.user&&e.user.length){var t,n=e.user[0],r=null==n||null===(t=n.photo)||void 0===t?void 0:t.split(",");w(null==r?void 0:r.at(0))}}))}();return Promise.resolve(r&&r.then?r.then((function(){})):void 0)}catch(e){return Promise.reject(e)}}),[null!==I,null==p||null===(t=p.info)||void 0===t?void 0:t.uuid]);var _,R,A,P,M,x,U=Digit.ULBService.getCitizenCurrentTenant(!0),k=s.useHistory(),B=s.useLocation().pathname,F=Digit.Hooks.useNotificationCount({tenantId:U,config:{enabled:"EMPLOYEE"!==(null===(_=Digit.UserService)||void 0===_||null===(R=_.getUser())||void 0===R||null===(A=R.info)||void 0===A?void 0:A.type)&&"CITIZEN"===(null===(P=Digit.UserService)||void 0===P||null===(M=P.getUser())||void 0===M||null===(x=M.info)||void 0===x?void 0:x.type)&&!!U}}),j=F.data,V=(void 0===j?{}:j).unreadCount,H=F.isSuccess;if(E)return a.createElement("div",null,a.createElement(i.TopBar,{img:null==m?void 0:m.logoUrlWhite,isMobile:!0,toggleSidebar:function(){Digit.clikOusideFired?Digit.clikOusideFired=!1:v(!0)},logoUrl:null==m?void 0:m.logoUrlWhite,onLogout:f,userDetails:p,notificationCount:V<99?V:99,notificationCountLoaded:H,cityOfCitizenShownBesideLogo:d(U),onNotificationIconClick:function(){var e;k.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/citizen/engagement/notifications")},hideNotificationIconOnSomeUrlsWhenNotLoggedIn:function(e){var t,n,r,i;return(null===(t=Digit.UserService)||void 0===t||null===(n=t.getUser())||void 0===n||!n.access_token)&&["/"+(null===(r=window)||void 0===r?void 0:r.contextPath)+"/citizen/select-language","/"+(null===(i=window)||void 0===i?void 0:i.contextPath)+"/citizen/select-location"].includes(e)}(B),changeLanguage:h?null:a.createElement(T,{dropdown:!0})}));var G=!(null==p||!p.access_token);return a.createElement("div",{className:"topbar"},h?a.createElement(i.Hamburger,{handleClick:v,color:"#9E9E9E"}):null,a.createElement("img",{className:"city",src:G?null==g?void 0:g.logoId:null==m?void 0:m.statelogo}),a.createElement("span",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"}},G&&(null!=g&&null!==(n=g.city)&&void 0!==n&&n.ulbGrade?a.createElement("p",{className:"ulb",style:h?{fontSize:"14px",display:"inline-block"}:{}},d(null==g?void 0:g.i18nKey).toUpperCase()," ",d("ULBGRADE_"+(null==g||null===(r=g.city)||void 0===r?void 0:r.ulbGrade.toUpperCase().replace(" ","_").replace(".","_"))).toUpperCase()):a.createElement("img",{className:"state",src:O})),!G&&a.createElement("p",{className:"ulb",style:h?{fontSize:"14px",display:"inline-block"}:{}},d("MYCITY_"+(null==m||null===(l=m.code)||void 0===l?void 0:l.toUpperCase())+"_LABEL")," ",d("MYCITY_STATECODE_LABEL")),!h&&a.createElement("div",{className:h?"right":"flex-right right w-80 column-gap-15",style:G?{}:{width:"80%"}},a.createElement("div",{className:"left"},!window.location.href.includes("employee/user/login")&&!window.location.href.includes("employee/user/language-selection")&&a.createElement(D,{dropdown:!0,t:d})),a.createElement("div",{className:"left"},b&&a.createElement(T,{dropdown:!0})),(null==p?void 0:p.access_token)&&a.createElement("div",{className:"left"},a.createElement(i.Dropdown,{option:y,optionKey:"name",select:C,showArrow:!0,freeze:!0,style:h?{right:0}:{},optionCardStyles:{overflow:"revert",display:"table"},customSelector:null==I?a.createElement(L,{name:(null==p||null===(o=p.info)||void 0===o?void 0:o.name)||(null==p||null===(u=p.info)||void 0===u||null===(c=u.userInfo)||void 0===c?void 0:c.name)||"Employee"}):a.createElement("img",{src:I,style:{height:"48px",width:"48px",borderRadius:"50%"}})})),a.createElement("img",{className:"state",src:O}))))},A=function(e,t,n,r){var l,o;return[{type:"link",element:"HOME",text:e("COMMON_BOTTOM_NAVIGATION_HOME"),link:r?"/"+(null===(l=window)||void 0===l?void 0:l.contextPath)+"/employee":"/"+(null===(o=window)||void 0===o?void 0:o.contextPath)+"/citizen",icon:"HomeIcon",populators:{onClick:t}},{type:"component",element:"LANGUAGE",action:a.createElement(T,null),icon:"LanguageIcon"},{id:"login-btn",element:"LOGIN",text:e("CORE_COMMON_LOGIN"),icon:a.createElement(i.LogoutIcon,{className:"icon"}),populators:{onClick:n}}]},P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAO4AAADUCAMAAACs0e/bAAAAM1BMVEXK0eL////Dy97GzuD4+fvL0uPg5O7T2efb4OvR1+Xr7vTk5/Df4+37/P3v8fbO1eTt8PUsnq5FAAAGqElEQVR4nO2d25ajIBBFCajgvf//a0eMyZgEjcI5xgt7Hmatme507UaxuJXidiDqjmSgeVIMlB1ZR1WZAf2gbdu0QwixSYzjOJPmHurfEGEfY9XzjNGG9whQCeVAuv5xQEySLtR9hPuIcwj0EeroN5m3D1IbsbgHK0esiQ9MKsqXVr8Hm/a/Pulk6wihpCIXBw3dh7bTvRBt9+dC5NfS1VH3xETdM3MxXRN1T0zUPTNR98xcS1dlV9NNfx3DhkTdM6PKqHteVBF1z0vU5f0sKdpc2zWLKutXrjJjdLvpesRmukqYonauPhXpdsLb6CppmpnltsYIuY2yavi6Mi2/rzAWm1zUfF0limVLqkZyA+mDYevKBS37aGC+L1lX5e7uyU1Cv565uiua9k5LFqbqqrnu2I3m+jJ11ZoLeRtfmdB0Uw/ZDsP0VTxdn7a1VERfmq7XlXyn5D2QWLoq8bZlPoBJumphJjVBw/Ll6CoTZGsTDs4NrGqKbqBth8ZHJUi6cn168QmleSm6GmB7Kxm+6obXlf7PoDHosCwM3QpiS2legi6ocSl3L0G3BdneDDgwQdENfeY+SfDJBkF37ZB+GvwzA6/rMaafAn8143VhPZWdjMWG1oHXhdnemgPoAvLlB/iZyRTfVeF06wPoQhJmlm4bdcOAZRlRN5gcPc5SoPEQR1fDdbOo6wn+uYvXxY0QCLom6gYROKH+Aj5nvphuFXWDiLpRdxl/19LFT95k6CHCrnW7pCDqBn1i1PUFvii2c11oZOJ6usWeH0RRNzC4Zs+6FTi2nevCVwCjbugnXklX5fkfTldL8PEilUB1kfNyN1u9MME2sATr4lbuB7AjfLAuvsRm1A0g6gYRdcPAjvBlje2Z8brI8OC68AcRdlCkwLohx2mcZMjw9q+LzarQurjtnwPYAydX08WecECO/u6Ad0GBdYG7jO5gB4Ap+PwKcA9ZT43dn4/W9TyiPAn4OAJaF7h3uwe8StSCddFdM3jqFa2LvnnB5zzhuuBBAjY4gi50cg694gnXhTYvfMdrjtcFZhrwE9r41gUem8IXWMC3LrBzxh+a0gRd1N1LOK7M0IUUGuggvEmHoStA2/MJh7MpupiDU4TzjhxdzLAoO4ouZvqVURbFMHQlZD6SUeWHoguZsSLUGegrehA+FZFowPdUWTi6iMoZlIpGGUUXkDbjj/9ZOLqAQS/+GIKl5BQOCn/ycqpzkXSDm5dU7ZWkG7wUyGlcmm7g5Ux56AqirgoaJ7BeokPTDbp9CbVunjFxPrl7+HqnkrSq1Da7JX20f3dV8yJi6voO81mX8vV0mx3qUsZCPRfTlVRdz2EvdufYGDvNQvvwqHtmXd+a1ITinwNcXc+lT6JuzdT1XDyBn/x7wtX1HCQQdW9MXc8xArGrirowfLeUEbMqqq6f7TF1lfRdOuGNiGi6SpT+WxY06xUfNN2wBfyE9I4tlm7w5hvOPDNJN3yNiLMipji6gE3chKhouoCtN5x3QlF0EZt8OW/8ougitqJQlk1aii7iFC9l0MvRReyao7xNjKML2Z/PuHlzhi5mFxljiZeiC9rPTEisNEMX9KYAwo5Xhi7qaA3hamboYm7dG+NVrXhdaYDv5zFaQZsYrCtbbAGnjkQDX2+J1FXCwOsqWOpKoIQNTFdqYBWydxqNqUoG0pVpCS+H8kaJaGKErlIaXj7CRRE+gRWuKwW9YZ80oVOUgbpdT0zpnSZJTIiwCtJVelvXntr4P5j6BWfPb5Wcx84C4cq3hb11lco2u2Mdwp6XdJ/Ne3wb8DWdfiRenZaXrhLwOj4e+GQeHroy3YOspS7TlU28Wle2m2QUS0mqdcbrdNW+ZHsSsyK7tBfm0q/dWcv+Z3mytVx3t7KWulqUe6ilunu8jF8pFwgv1FXp3mUt35OtRbr7eM4u4Gs6vUBXgeuHc5kfE/cbvWZtkROLm1DMtLCy80tzsu2PRj0hTI8fvrQuvsjlJkyutszq+m423wHaLTyniy/XuiGZ84LuT+m5ZfNfRxyGs7LXZOvia7VujatUwVTrIt+Q/Csc7Tuhe+BOakT10b4TuoiiJjvgU9emTO42PwEfBa+cuodKkuf42DXr1D3JpXz73Hnn0j10evHKe+nufgfUm+7B84sX9FfdEzXux2DBpWuKokkCqN/5pa/8pmvnL+RGKCddCGmatiPyPB/+ekO/M/q/7uvbt22kTt3zEnXPzCV13T3Gel4/6NduDu66xRvlPNkM1RjjxUdv+4WhGx6TftD19Q/dfzpwcHO+rE3fAAAAAElFTkSuQmCC",M=function(e){return a.createElement("h1",{className:"heading-m"},e.label)},x=function(){return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#FFFFFF"},a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}))},U=function(e){return a.createElement("div",{onClick:null==e?void 0:e.onClick,style:null!=e&&e.isMobileView?{padding:5}:null},null!=e&&e.isMobileView?a.createElement(i.CloseSvg,null):a.createElement("div",{className:"icon-bg-secondary",style:{backgroundColor:"#505A5F"}}," ",a.createElement(x,null)," "))},k=function(e){var t=e.onSelect,n=e.onCancel,r=e.onDismiss,l=o.useTranslation().t,u=a.useState(window.innerWidth<=780),c=u[0],s=u[1],d=function(){window.innerWidth<=780?c||s(!0):c&&s(!1)};return a.useEffect((function(){return window.addEventListener("resize",(function(){d()})),function(){window.addEventListener("resize",(function(){d()}))}})),c?a.createElement(i.Modal,{popupStyles:{height:"174px",maxHeight:"174px",width:"324px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},popupModuleActionBarStyles:{display:"flex",flex:1,justifyContent:"flex-start",width:"100%",position:"absolute",left:0,bottom:0,padding:"18px"},style:{flex:1},popupModuleMianStyles:{padding:"18px"},headerBarMain:a.createElement(M,{label:l("CORE_LOGOUT_WEB_HEADER")}),headerBarEnd:a.createElement(U,{onClick:r,isMobileView:c}),actionCancelLabel:l("CORE_LOGOUT_CANCEL"),actionCancelOnSubmit:n,actionSaveLabel:l("CORE_LOGOUT_WEB_YES"),actionSaveOnSubmit:t,formId:"modal-action"},a.createElement("div",null,a.createElement(i.CardText,{style:{margin:0}},l("CORE_LOGOUT_WEB_CONFIRMATION_MESSAGE")+" "))):a.createElement(i.Modal,{popupModuleMianStyles:{paddingTop:"30px"},headerBarMain:a.createElement(M,{label:l("CORE_LOGOUT_WEB_HEADER")}),headerBarEnd:a.createElement(U,{onClick:r,isMobileView:!1}),actionCancelLabel:l("CORE_LOGOUT_CANCEL"),actionCancelOnSubmit:n,actionSaveLabel:l("CORE_LOGOUT_WEB_YES"),actionSaveOnSubmit:t,formId:"modal-action"},a.createElement("div",null,a.createElement(i.CardText,{style:{marginBottom:"54px",marginLeft:"8px",marginRight:"8px"}},l("CORE_LOGOUT_WEB_CONFIRMATION_MESSAGE")+" ",a.createElement("strong",null,l("CORE_LOGOUT_MESSAGE"),"?"))))},B=function(e){var t=e.info,n=e.t;return a.createElement("div",{className:"profile-section"},a.createElement("div",{className:"imageloader imageloader-loaded"},a.createElement("img",{className:"img-responsive img-circle img-Profile",src:P})),a.createElement("div",{id:"profile-name",className:"label-container name-Profile"},a.createElement("div",{className:"label-text"}," ",null==t?void 0:t.name," ")),a.createElement("div",{id:"profile-location",className:"label-container loc-Profile"},a.createElement("div",{className:"label-text"}," ",null==t?void 0:t.mobileNumber," ")),(null==t?void 0:t.emailId)&&a.createElement("div",{id:"profile-emailid",className:"label-container loc-Profile"},a.createElement("div",{className:"label-text"}," ",t.emailId," ")),a.createElement("div",{className:"profile-divider"}),window.location.href.includes("/employee")&&!window.location.href.includes("/employee/user/login")&&!window.location.href.includes("employee/user/language-selection")&&a.createElement(D,{t:n,mobileView:!0}))},F={CommonPTIcon:a.createElement(i.PTIcon,{className:"icon"}),OBPSIcon:a.createElement(i.OBPSIcon,{className:"icon"}),propertyIcon:a.createElement(i.PropertyHouse,{className:"icon"}),TLIcon:a.createElement(i.CaseIcon,{className:"icon"}),PGRIcon:a.createElement(i.PGRIcon,{className:"icon"}),FSMIcon:a.createElement(i.FSMIcon,{className:"icon"}),WSIcon:a.createElement(i.WSICon,{className:"icon"}),MCollectIcon:a.createElement(i.MCollectIcon,{className:"icon"}),BillsIcon:a.createElement(i.CollectionIcon,{className:"icon"}),BirthIcon:a.createElement(i.BirthIcon,{className:"icon"}),DeathIcon:a.createElement(i.DeathIcon,{className:"icon"}),FirenocIcon:a.createElement(i.FirenocIcon,{className:"icon"}),HomeIcon:a.createElement(i.HomeIcon,{className:"icon"}),EditPencilIcon:a.createElement(i.EditPencilIcon,{className:"icon"}),LogoutIcon:a.createElement(i.LogoutIcon,{className:"icon"}),Phone:a.createElement(i.Phone,{className:"icon"})},j=function(e){var t,n,r,u=e.linkData,c=e.islinkDataLoading,d=o.useTranslation().t,m=s.useHistory(),v=s.useLocation().pathname,p=Digit.Hooks.useStore.getInitData(),E=p.data,g=p.isFetched,h=(E||{}).stateInfo,y=Digit.UserService.getUser(),C=window.Digit.Utils.browser.isMobile(),O=l.useState(!1)[0],S=l.useState(!1)[1],b=l.useState(!1),N=b[0],I=b[1],w=function(){I(!1)};if(c)return a.createElement(i.Loader,null);var _=function(){var e;m.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/citizen/user/profile")},D=[].concat(A(d,_,(function(){var e;m.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/citizen/login")}),O));D=D.filter((function(e){return"LANGUAGE"!==e.element})),Digit.ULBService.getCurrentTenantId();var T,L=function(e){var t,n,r,i=e.item,l=(null==i?void 0:i.icon)||(null===(t=i.icon)||void 0===t||null===(n=t.type)||void 0===n?void 0:n.name),o=l?F[l]:F.BillsIcon;r="component"===i.type?i.action:i.text;var u=function(){return a.createElement("span",f({className:"menu-item"},i.populators),o,a.createElement("div",{className:"menu-label"},r))};return"external-link"===i.type?a.createElement("a",{href:i.link},a.createElement(u,null)):"link"===i.type?a.createElement(s.Link,{to:null==i?void 0:i.link},a.createElement(u,null)):a.createElement(u,null)};return g&&y&&y.access_token&&(T=a.createElement(B,{info:null==y?void 0:y.info,stateName:null==h?void 0:h.name,t:d}),D=D.filter((function(e){return"login-btn"!==(null==e?void 0:e.id)})),D=[].concat(D,[{text:d("EDIT_PROFILE"),element:"PROFILE",icon:"EditPencilIcon",populators:{onClick:_}},{text:d("CORE_COMMON_LOGOUT"),element:"LOGOUT",icon:"LogoutIcon",populators:{onClick:function(){S(!1),I(!0)}}},{text:a.createElement(a.Fragment,null,d("CS_COMMON_HELPLINE"),a.createElement("div",{className:"telephone",style:{marginTop:"-10%"}},null==E?void 0:E.tenants.map((function(e){})),a.createElement("div",{className:"link"},a.createElement("a",{href:"tel:"+(null==E?void 0:E.tenants[0].contactNumber)},null==E?void 0:E.tenants[0].contactNumber)))),element:"Helpline",icon:"Phone"}])),null===(t=Object.keys(u))||void 0===t||null===(n=t.sort((function(e,t){return t.localeCompare(e)})))||void 0===n||n.map((function(e){var t,n,r,i,l,a;(null===(t=u[e][0])||void 0===t?void 0:t.sidebar)===window.contextPath+"-links"&&D.splice(1,0,{type:null!==(n=u[e][0])&&void 0!==n&&null!==(r=n.sidebarURL)&&void 0!==r&&r.includes(null===(i=window)||void 0===i?void 0:i.contextPath)?"link":"external-link",text:d("ACTION_TEST_"+Digit.Utils.locale.getTransformedLocale(e)),links:u[e],icon:null===(l=u[e][0])||void 0===l?void 0:l.leftIcon,link:null===(a=u[e][0])||void 0===a?void 0:a.sidebarURL})})),a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("div",{style:{height:"100%",width:"100%",top:"0px",backgroundColor:"rgba(0, 0, 0, 0.54)",pointerzevents:"auto"}}),a.createElement("div",{style:{display:"flex",flexDirection:"column",height:C?"calc(100vh - 56px)":"auto",zIndex:"99"}},T,a.createElement("div",{className:"drawer-desktop"},null===(r=D)||void 0===r?void 0:r.map((function(e,t){return a.createElement("div",{className:"sidebar-list "+(v===(null==e?void 0:e.link)||v===(null==e?void 0:e.sidebarURL)?"active":""),key:t},a.createElement(L,{item:e}))})))),a.createElement("div",null,N&&a.createElement(k,{onSelect:function(){Digit.UserService.logout(),I(!1)},onCancel:w,onDismiss:w}))))},V=function(e){var t=e.info,n=e.t,r=a.useState(null),i=r[0],l=r[1];return a.useEffect((function(){try{var e=Digit.ULBService.getCurrentTenantId(),n=null==t?void 0:t.uuid,r=function(){if(n)return Promise.resolve(Digit.UserService.userSearch(e,{uuid:[n]},{})).then((function(e){if(e&&e.user&&e.user.length){var t,n=e.user[0],r=null==n||null===(t=n.photo)||void 0===t?void 0:t.split(",");l(null==r?void 0:r.at(0))}}))}();return Promise.resolve(r&&r.then?r.then((function(){})):void 0)}catch(e){return Promise.reject(e)}}),[null!==i]),a.createElement("div",{className:"profile-section"},a.createElement("div",{className:"imageloader imageloader-loaded"},a.createElement("img",{className:"img-responsive img-circle img-Profile",src:i||P,style:{objectFit:"cover",objectPosition:"center"}})),a.createElement("div",{id:"profile-name",className:"label-container name-Profile"},a.createElement("div",{className:"label-text"}," ",null==t?void 0:t.name," ")),a.createElement("div",{id:"profile-location",className:"label-container loc-Profile"},a.createElement("div",{className:"label-text"}," ",null==t?void 0:t.mobileNumber," ")),(null==t?void 0:t.emailId)&&a.createElement("div",{id:"profile-emailid",className:"label-container loc-Profile"},a.createElement("div",{className:"label-text"}," ",t.emailId," ")),a.createElement("div",{className:"profile-divider"}),window.location.href.includes("/employee")&&!window.location.href.includes("/employee/user/login")&&!window.location.href.includes("employee/user/language-selection")&&a.createElement(D,{t:n,mobileView:!0}))},H=function(){var e,t,n;return a.createElement("div",{className:"digit-footer",style:{marginBottom:0}},a.createElement("img",{alt:"Powered by DIGIT",src:null===(e=window)||void 0===e||null===(t=e.globalConfigs)||void 0===t||null===(n=t.getConfig)||void 0===n?void 0:n.call(t,"DIGIT_FOOTER"),style:{cursor:"pointer"},onClick:function(){var e,t,n;window.open(null===(e=window)||void 0===e||null===(t=e.globalConfigs)||void 0===t||null===(n=t.getConfig)||void 0===n?void 0:n.call(t,"DIGIT_HOME_URL"),"_blank").focus()}})," ")},G=function(e){var t=e.isOpen,n=e.isMobile,r=void 0!==n&&n,u=e.toggleSidebar,c=e.onLogout,d=e.isEmployee,m=void 0!==d&&d,v=e.linkData,p=e.islinkDataLoading,E=Digit.Hooks.useStore.getInitData(),g=E.data,h=E.isFetched,y=(g||{}).stateInfo,C=Digit.UserService.getUser(),O=l.useState(""),S=O[0],b=O[1],N=o.useTranslation().t,I=s.useHistory(),w=function(){Digit.clikOusideFired=!0,u(!1)},_=Digit.Hooks.useAccessControl(),D=_.isLoading,T=_.data;if(Digit.ULBService.getCurrentTenantId(),p||D)return a.createElement(i.Loader,null);var L,R=[].concat(A(N,w,(function(){var e;I.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/citizen/login"),w()}),m));h&&C&&C.access_token&&(L=a.createElement(V,{info:null==C?void 0:C.info,stateName:null==y?void 0:y.name,t:N}),R=R.filter((function(e){return"login-btn"!==(null==e?void 0:e.id)})),R=[].concat(R,[{text:N("EDIT_PROFILE"),element:"PROFILE",icon:"EditPencilIcon",populators:{onClick:function(){var e,t,n=m?"/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/user/profile":"/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/citizen/user/profile";I.push(n),w()}}},{text:N("CORE_COMMON_LOGOUT"),element:"LOGOUT",icon:"LogoutIcon",populators:{onClick:c}},{text:a.createElement(a.Fragment,null,N("CS_COMMON_HELPLINE"),a.createElement("div",{className:"telephone",style:{marginTop:"-10%"}},null==g?void 0:g.tenants.map((function(e){})),a.createElement("div",{className:"link"},a.createElement("a",{href:"tel:"+(null==g?void 0:g.tenants[0].contactNumber)},null==g?void 0:g.tenants[0].contactNumber)))),element:"Helpline",icon:"Phone"}]));var P={};if(m){var M;null==T||T.actions.filter((function(e){return"url"===e.url&&"Home"!==e.displayName})).forEach((function(e){var t;if(""==S&&""!==e.path){var n=e.path.split(".")[0];"TradeLicense"===n&&(n="Trade License"),P[n]?P[n].push(e):P[n]=[e]}else if(""!==e.path&&null!=e&&null!==(t=e.displayName)&&void 0!==t&&t.toLowerCase().includes(S.toLowerCase())){var r=e.path.split(".")[0];"TradeLicense"===r&&(r="Trade License"),P[r]?P[r].push(e):P[r]=[e]}}));for(var x=Object.keys(P),U=function(e){var t,n,r,i,l,a,o,u,c,s,d,m=null===(t=P[x[e]][0])||void 0===t||null===(n=t.displayName)||void 0===n||null===(r=n.toUpperCase())||void 0===r?void 0:r.replace(/[ -]/g,"_"),v=null===(i=x[e])||void 0===i||null===(l=i.toUpperCase())||void 0===l?void 0:l.replace(/[ -]/g,"_");-1===P[x[e]][0].path.indexOf(".")?R.splice(1,0,{type:"link",text:N("ACTION_TEST_"+m),link:null===(a=P[x[e]][0])||void 0===a?void 0:a.navigationURL,icon:null===(o=P[x[e]][0])||void 0===o||null===(u=o.leftIcon)||void 0===u||null===(c=u.split)||void 0===c?void 0:c.call(u,":")[1],populators:{onClick:function(){var t;I.push(null===(t=P[x[e]][0])||void 0===t?void 0:t.navigationURL),w()}}}):R.splice(1,0,{type:"dynamic",moduleName:N("ACTION_TEST_"+v),links:null===(s=P[x[e]])||void 0===s?void 0:s.map((function(e){var t,n;return f({},e,{displayName:N("ACTION_TEST_"+(null==e||null===(t=e.displayName)||void 0===t||null===(n=t.toUpperCase())||void 0===n?void 0:n.replace(/[ -]/g,"_")))})})),icon:null===(d=P[x[e]][1])||void 0===d?void 0:d.leftIcon})},k=0;k<x.length;k++)U(k);var B=R.findIndex((function(e){return"HOME"===e.element})),F=R.splice(B,1),G=R.findIndex((function(e){return"LANGUAGE"===e.element})),z=R.splice(G,(null===(M=R)||void 0===M?void 0:M.length)-G);R.sort((function(e,t){var n="dynamic"===(null==e?void 0:e.type)?null==e?void 0:e.moduleName:null==e?void 0:e.text,r="dynamic"===(null==t?void 0:t.type)?null==t?void 0:t.moduleName:null==t?void 0:t.text;return n.localeCompare(r)})),(null==F?void 0:F[0])&&R.splice(0,0,F[0]),R=(null==z?void 0:z.length)>0?R.concat(z):R}else{var W,q;null===(W=Object.keys(v))||void 0===W||null===(q=W.sort((function(e,t){return t.localeCompare(e)})))||void 0===q||q.map((function(e){var t,n,r,i,l,a;"digit-ui-links"===(null===(t=v[e][0])||void 0===t?void 0:t.sidebar)&&R.splice(1,0,{type:null!==(n=v[e][0])&&void 0!==n&&null!==(r=n.sidebarURL)&&void 0!==r&&r.includes(null===(i=window)||void 0===i?void 0:i.contextPath)?"link":"external-link",text:N("ACTION_TEST_"+Digit.Utils.locale.getTransformedLocale(e)),links:v[e],icon:null===(l=v[e][0])||void 0===l?void 0:l.leftIcon,link:null===(a=v[e][0])||void 0===a?void 0:a.sidebarURL})}))}return I.location.pathname.includes("/openlink")&&(L=a.createElement("span",null),R=R.filter((function(e){return"LANGUAGE"===e.element}))),r?a.createElement(i.NavBar,{open:t,toggleSidebar:u,profileItem:L,onClose:w,menuItems:R,Footer:a.createElement(H,null),isEmployee:m,search:S,setSearch:b}):a.createElement(j,{logout:c})},z=function(e){var t,r,u,c,m,v,f,p,E,g,h,y,C=e.item,O=l.useState(!1),S=O[0],b=O[1],N=s.useLocation().pathname,I=o.useTranslation().t,w=s.useHistory(),_={home:a.createElement(i.HomeIcon,null),announcement:a.createElement(i.ComplaintIcon,null),business:a.createElement(i.BPAHomeIcon,null),store:a.createElement(i.PropertyHouse,null),assignment:a.createElement(i.CaseIcon,null),receipt:a.createElement(i.ReceiptIcon,null),"business-center":a.createElement(i.PersonIcon,null),description:a.createElement(i.DocumentIconSolid,null),"water-tap":a.createElement(i.DropIcon,null),"collections-bookmark":a.createElement(i.CollectionsBookmarIcons,null),"insert-chart":a.createElement(i.FinanceChartIcon,null),edcr:a.createElement(i.CollectionIcon,null),collections:a.createElement(i.CollectionIcon,null)},D=_[(null==C||null===(t=C.icon)||void 0===t||null===(r=t.leftIcon)||void 0===r||null===(u=r.split)||void 0===u||null===(c=u.call(r,":"))||void 0===c?void 0:c[1])||(null==C||null===(m=C.leftIcon)||void 0===m||null===(v=m.split)||void 0===v?void 0:v.call(m,":")[1])]||_.collections,T=(null==C||null===(f=C.icon)||void 0===f||null===(p=f.leftIcon)||void 0===p||null===(E=p.split)||void 0===E?void 0:E.call(p,":"))||(null==C||null===(g=C.leftIcon)||void 0===g||null===(h=g.split)||void 0===h?void 0:h.call(g,":"));if("dynamic"==(null==T?void 0:T[0])){var L,R=null===(L=n(2947))||void 0===L?void 0:L[null==T?void 0:T[1]];D=R?a.createElement(R,null):D}var A,P=null==C||null===(y=C.moduleName)||void 0===y?void 0:y.replace(/[ -]/g,"_"),M=I("ACTION_TEST_"+P),x=I((null==M?void 0:M.length)>20?M.substring(0,20)+"...":M);if("single"===C.type){var U,k,B=window.location.origin;return a.createElement("div",{className:"submenu-container"},a.createElement("div",{className:"sidebar-link  "+(N===(null==C?void 0:C.navigationURL)?"active":"")},a.createElement("div",{className:"actions"},a.createElement("span",{style:{marginLeft:"0px"},onClick:function(){return w.push(""+C.navigationURL)}},D),-1===(null===(U=C.navigationURL)||void 0===U?void 0:U.indexOf("/"+(null===(k=window)||void 0===k?void 0:k.contextPath)))?a.createElement("a",{"data-tip":"React-tooltip","data-for":"jk-side-"+P,className:"custom-link",href:B+"/employee/"+C.navigationURL},a.createElement("span",null," ",x," "),(null==x?void 0:x.includes("..."))&&a.createElement(d,{textColor:"white",backgroundColor:"grey",place:"right",type:"info",effect:"solid",id:"jk-side-"+P},I("ACTION_TEST_"+P))):a.createElement(s.Link,{className:"custom-link",to:C.navigationURL},a.createElement("div",{"data-tip":"React-tooltip","data-for":"jk-side-"+P},a.createElement("span",null," ",x," "),(null==x?void 0:x.includes("..."))&&a.createElement(d,{textColor:"white",backgroundColor:"grey",place:"right",type:"info",effect:"solid",id:"jk-side-"+P},I("ACTION_TEST_"+P)))))))}return a.createElement(a.Fragment,null,a.createElement("div",{className:"submenu-container"},a.createElement("div",{onClick:C.links&&function(){return b(!S)},className:"sidebar-link  "+(null!=C&&null!==(A=C.links)&&void 0!==A&&A.some((function(e){return"url"===(null==e?void 0:e.url)&&(null==N?void 0:N.includes(null==e?void 0:e.navigationURL))}))?"active":"")},a.createElement("div",{className:"actions"},D,a.createElement("div",{"data-tip":"React-tooltip","data-for":"jk-side-"+P},a.createElement("span",null," ",x," "),(null==x?void 0:x.includes("..."))&&a.createElement(d,{textColor:"white",backgroundColor:"grey",place:"right",type:"info",effect:"solid",id:"jk-side-"+P},I("ACTION_TEST_"+P)))),a.createElement("div",null," ",C.links&&S?a.createElement(i.ArrowVectorDown,null):C.links?a.createElement(i.ArrowForward,null):null," "))),S&&C.links.sort((function(e,t){return e.orderNumber-t.orderNumber})).filter((function(e){return"url"===e.url||""!==e.url})).map((function(e,t){var n,r,i,l=null==e||null===(n=e.displayName)||void 0===n||null===(r=n.toUpperCase())||void 0===r?void 0:r.replace(/[ -]/g,"_"),o=I("ACTION_TEST_"+l),u=I((null==o?void 0:o.length)>20?o.substring(0,20)+"...":o);if(-1===e.navigationURL.indexOf("/"+(null===(i=window)||void 0===i?void 0:i.contextPath))){var c=window.location.origin;return a.createElement("a",{key:t,className:"dropdown-link "+(N===e.link?"active":""),href:c+"/employee/"+e.navigationURL},a.createElement("div",{className:"actions","data-tip":"React-tooltip","data-for":"jk-side-"+t},a.createElement("span",null," ",u," "),(null==u?void 0:u.includes("..."))&&a.createElement(d,{textColor:"white",backgroundColor:"grey",place:"right",type:"info",effect:"solid",id:"jk-side-"+t},I("ACTION_TEST_"+l))))}return a.createElement(s.Link,{to:(null==e?void 0:e.link)||e.navigationURL,key:t,className:"dropdown-link "+(N===(null==e?void 0:e.link)||N===(null==e?void 0:e.navigationURL)?"active":"")},a.createElement("div",{className:"actions","data-tip":"React-tooltip","data-for":"jk-side-"+t},a.createElement("span",null," ",u," "),(null==u?void 0:u.includes("..."))&&a.createElement(d,{textColor:"white",backgroundColor:"grey",place:"right",type:"info",effect:"solid",id:"jk-side-"+t},I("ACTION_TEST_"+l))))})))},W=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),e.toLowerCase().includes(t.toLowerCase())},q=function(){var e=l.useRef(null),t=Digit.Hooks.useAccessControl(),n=t.isLoading,r=t.data,u=l.useState(""),c=u[0],s=u[1],d=o.useTranslation().t;l.useEffect((function(){if(n)return a.createElement(i.Loader,null);e.current.style.cursor="pointer",m()}),[n]);var m=function(){e.current.style.width="55px",e.current.style.overflow="hidden",e.current.querySelectorAll(".dropdown-link").forEach((function(e){e.style.display="none"})),e.current.querySelectorAll(".actions").forEach((function(e){e.style.padding="0"}))},v={};null==r||r.actions.filter((function(e){return"url"===e.url})).forEach((function(e){var t,n,r,i,l=(null==e||null===(t=e.path)||void 0===t||null===(n=t.split("."))||void 0===n?void 0:n[0])||"";(""==c&&""!==e.path||W(d("ACTION_TEST_"+(null===(r=l)||void 0===r||null===(i=r.toUpperCase())||void 0===i?void 0:i.replace(/[ -]/g,"_"))),c)||W(d(Digit.Utils.locale.getTransformedLocale("ACTION_TEST_"+(null==e?void 0:e.displayName))),c))&&(l=e.path.split(".")[0],v[l]?v[l].push(e):v[l]=[e])}));var f=[];return n?a.createElement(i.Loader,null):f?a.createElement("div",{className:"sidebar",ref:e,onMouseOver:function(){e.current.style.width="260px",e.current.style.overflow="auto",e.current.querySelectorAll(".dropdown-link").forEach((function(e){e.style.display="flex"}))},onMouseLeave:m},a.createElement("div",{className:"submenu-container"},a.createElement("div",{className:"sidebar-link"},a.createElement("div",{className:"actions search-icon-wrapper"},a.createElement(i.SearchIcon,{className:"search-icon"}),a.createElement("input",{className:"employee-search-input",type:"text",placeholder:d("ACTION_TEST_SEARCH"),name:"search",value:c,onChange:function(e){return s(e.target.value)}})))),function(){var e,t=Object.keys(v);t.sort((function(e,t){return e.orderNumber-t.orderNumber}));for(var n=0;n<t.length;n++)if(-1===v[t[n]][0].path.indexOf("."))if("Home"===v[t[n]][0].displayName){var r,i="/"+(null===(r=window)||void 0===r?void 0:r.contextPath)+"/employee";f.unshift({moduleName:t[n].toUpperCase(),icon:v[t[n]][0],navigationURL:i,type:"single"})}else{var l;f.push({moduleName:null===(l=v[t[n]][0])||void 0===l?void 0:l.displayName.toUpperCase(),type:"single",icon:v[t[n]][0],navigationURL:v[t[n]][0].navigationURL})}else f.push({moduleName:t[n].toUpperCase(),links:v[t[n]],icon:v[t[n]][0],orderNumber:v[t[n]][0].orderNumber});if(f.find((function(e){return"HOME"===e.moduleName}))){var o,u,c=null===(o=f)||void 0===o?void 0:o.filter((function(e){return"HOME"===(null==e?void 0:e.moduleName)})),s=null===(u=f)||void 0===u?void 0:u.filter((function(e){return"HOME"!==(null==e?void 0:e.moduleName)}));f=s.sort((function(e,t){return e.moduleName.localeCompare(t.moduleName)})),(null==c?void 0:c[0])&&f.unshift(c[0])}else f.sort((function(e,t){return e.moduleName.localeCompare(t.moduleName)}));return null===(e=f)||void 0===e?void 0:e.map((function(e,t){return a.createElement(z,{item:e,key:t+1})}))}()):""},X=function(e){var t=e.CITIZEN,n=e.isSidebarOpen,r=e.toggleSidebar,i=e.handleLogout,l=e.mobileView,o=e.userDetails,u=e.modules,c=e.linkData,s=e.islinkDataLoading;return t?a.createElement(G,{isOpen:n,isMobile:!0,toggleSidebar:r,onLogout:i,linkData:c,islinkDataLoading:s}):!l&&null!=o&&o.access_token?a.createElement(q,{mobileView:l,userDetails:o,modules:u}):a.createElement(G,{isOpen:n,isMobile:!0,toggleSidebar:r,onLogout:i,isEmployee:!0})},Z=function(e){var t=e.t,n=e.stateInfo,r=e.userDetails,o=e.CITIZEN,u=e.cityDetails,c=e.mobileView,d=e.handleUserDropdownSelection,m=e.logoUrl,v=e.showSidebar,f=void 0===v||v,p=e.showLanguageChange,E=e.linkData,g=e.islinkDataLoading,h=l.useState(!1),y=h[0],C=h[1],O=s.useHistory(),S=l.useState(!1),b=S[0],N=S[1],I=function(){C(!1),N(!0)},w=function(){N(!1)},_=[{name:t("EDIT_PROFILE"),icon:a.createElement(i.EditPencilIcon,{className:"icon"}),func:function(){var e;O.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/user/profile")}},{name:t("CORE_COMMON_LOGOUT"),icon:a.createElement(i.LogoutIcon,{className:"icon"}),func:I}];return a.createElement(a.Fragment,null,a.createElement(R,{t,stateInfo:n,toggleSidebar:C,isSidebarOpen:y,handleLogout:I,userDetails:r,CITIZEN:o,cityDetails:u,mobileView:c,userOptions:_,handleUserDropdownSelection:d,logoUrl:m,showLanguageChange:p}),b&&a.createElement(k,{onSelect:function(){Digit.UserService.logout(),N(!1)},onCancel:w,onDismiss:w}),f&&a.createElement(X,{t,CITIZEN:o,isSidebarOpen:y,toggleSidebar:C,handleLogout:I,mobileView:c,userDetails:r,linkData:E,islinkDataLoading:g}))},Y=function(e){var t=e.question,n=e.answer,r=e.lastIndex,u=l.useState(!1),c=u[0],s=u[1],d=o.useTranslation().t;return a.createElement("div",{className:"faqs border-none",onClick:function(){return s(!c)}},a.createElement("div",{className:"faq-question",style:{justifyContent:"space-between",display:"flex"}},a.createElement("span",null,d(t)),a.createElement("span",{className:c?"faqicon rotate":"faqicon",style:{float:"right"}},a.createElement(i.ArrowForward,null))),a.createElement("div",{className:"faq-answer",style:c?{display:"block"}:{display:"none"}},a.createElement("span",null,d(n))),r?null:a.createElement("div",{className:"cs-box-border"}))},K=function(e){var t,n,r,u=e.module,c=Digit.UserService.getUser(),s=((null==c||null===(t=c.info)||void 0===t?void 0:t.tenantId)||Digit.ULBService.getCurrentTenantId(),o.useTranslation().t),d=Digit.Hooks.useGetFAQsJSON(Digit.ULBService.getStateId()),m=d.isLoading,v=d.data,f=null==v||null===(n=v.MdmsRes["common-masters"])||void 0===n||null===(r=n.faqs[0])||void 0===r?void 0:r[""+u].faqs;return m?a.createElement(i.Loader,null):a.createElement(l.Fragment,null,a.createElement("div",{className:"faq-page"},a.createElement(i.BackButton,{style:{marginLeft:"unset"}}),a.createElement("div",{style:{marginBottom:"15px"}},a.createElement(i.Header,{styles:{marginLeft:"0px",paddingTop:"10px",fontSize:"32px"}},s("FAQ_S"))),a.createElement("div",{className:"faq-list"},f.map((function(e,t){return a.createElement(Y,{key:"faq_"+t,question:e.question,answer:e.answer,lastIndex:t===(null==f?void 0:f.length)-1})})))))},J=function(){var e,t,n,r,l,u,c,d,m,v,p,E,g,h,y,C,O,S,b,N,I,w,_,D,T=o.useTranslation().t,L=s.useHistory(),R=Digit.ULBService.getCitizenCurrentTenant(!0),A=Digit.Hooks.useStore.getInitData(),P=A.data,M=(void 0===P?{}:P).uiHomePage,x=A.isLoading,U=window.Digit.Utils.browser.isMobile(),k=function(){var e,t,n,r,i;return"EMPLOYEE"!==(null===(e=Digit.UserService)||void 0===e||null===(t=e.getUser())||void 0===t||null===(n=t.info)||void 0===n?void 0:n.type)&&!(null===(r=Digit.UserService)||void 0===r||null===(i=r.getUser())||void 0===i||!i.access_token)},B=Digit.Hooks.useEvents({tenantId:R,variant:"whats-new",config:{enabled:k()}}),F=B.data,j=B.isLoading;R||L.push("/"+(null===(D=window)||void 0===D?void 0:D.contextPath)+"/citizen/select-language");var V,H,G=null==M?void 0:M.appBannerDesktop,z=null==M?void 0:M.appBannerMobile,W=null==M?void 0:M.citizenServicesCard,q=null==M?void 0:M.informationAndUpdatesCard,X=null==M?void 0:M.whatsAppBannerDesktop,Z=null==M?void 0:M.whatsAppBannerMobile,Y=null==M?void 0:M.whatsNewSection,K=null==M?void 0:M.redirectURL;K&&L.push("/"+(null===(V=window)||void 0===V?void 0:V.contextPath)+"/citizen/"+K),null!==(e=window)&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&null!==(n=t.href)&&void 0!==n&&null!==(r=n.includes)&&void 0!==r&&r.call(n,"sanitation-ui")&&L.push("/"+(null===(H=window)||void 0===H?void 0:H.contextPath)+"/citizen/all-services");var J=function(e){window.open(null==e?void 0:e.navigationUrl)},Q={header:T(null==W?void 0:W.headerLabel),sideOption:{name:T(null==W||null===(l=W.sideOption)||void 0===l?void 0:l.name),onClick:function(){var e;return L.push(null==W||null===(e=W.sideOption)||void 0===e?void 0:e.navigationUrl)}},options:[{name:T(null==W||null===(u=W.props)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.label),Icon:a.createElement(i.ComplaintIcon,null),onClick:function(){var e,t;return L.push(null==W||null===(e=W.props)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.navigationUrl)}},{name:T(null==W||null===(d=W.props)||void 0===d||null===(m=d[1])||void 0===m?void 0:m.label),Icon:a.createElement(i.PTIcon,{className:"fill-path-primary-main"}),onClick:function(){var e,t;return L.push(null==W||null===(e=W.props)||void 0===e||null===(t=e[1])||void 0===t?void 0:t.navigationUrl)}},{name:T(null==W||null===(v=W.props)||void 0===v||null===(p=v[2])||void 0===p?void 0:p.label),Icon:a.createElement(i.CaseIcon,{className:"fill-path-primary-main"}),onClick:function(){var e,t;return L.push(null==W||null===(e=W.props)||void 0===e||null===(t=e[2])||void 0===t?void 0:t.navigationUrl)}},{name:T(null==W||null===(E=W.props)||void 0===E||null===(g=E[3])||void 0===g?void 0:g.label),Icon:a.createElement(i.OBPSIcon,null),onClick:function(){var e,t;return L.push(null==W||null===(e=W.props)||void 0===e||null===(t=e[3])||void 0===t?void 0:t.navigationUrl)}}],styles:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",width:"100%"}},$={header:T(null==q?void 0:q.headerLabel),sideOption:{name:T(null==q||null===(h=q.sideOption)||void 0===h?void 0:h.name),onClick:function(){var e;return L.push(null==q||null===(e=q.sideOption)||void 0===e?void 0:e.navigationUrl)}},options:[{name:T(null==q||null===(y=q.props)||void 0===y||null===(C=y[0])||void 0===C?void 0:C.label),Icon:a.createElement(i.HomeIcon,null),onClick:function(){var e,t;return L.push(null==q||null===(e=q.props)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.navigationUrl)}},{name:T(null==q||null===(O=q.props)||void 0===O||null===(S=O[1])||void 0===S?void 0:S.label),Icon:a.createElement(i.Calender,null),onClick:function(){var e,t;return L.push(null==q||null===(e=q.props)||void 0===e||null===(t=e[1])||void 0===t?void 0:t.navigationUrl)}},{name:T(null==q||null===(b=q.props)||void 0===b||null===(N=b[2])||void 0===N?void 0:N.label),Icon:a.createElement(i.DocumentIcon,null),onClick:function(){var e,t;return L.push(null==q||null===(e=q.props)||void 0===e||null===(t=e[2])||void 0===t?void 0:t.navigationUrl)}},{name:T(null==q||null===(I=q.props)||void 0===I||null===(w=I[3])||void 0===w?void 0:w.label),Icon:a.createElement(i.DocumentIcon,null),onClick:function(){var e,t;return L.push(null==q||null===(e=q.props)||void 0===e||null===(t=e[3])||void 0===t?void 0:t.navigationUrl)}}],styles:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",width:"100%"}};return x?a.createElement(i.Loader,null):a.createElement("div",{className:"HomePageContainer"},a.createElement("div",{className:"HomePageWrapper"},a.createElement("div",{className:"BannerWithSearch"},U?a.createElement("img",{src:null==z?void 0:z.bannerUrl}):a.createElement("img",{src:null==G?void 0:G.bannerUrl}),a.createElement("div",{className:"ServicesSection"},a.createElement(i.CardBasedOptions,f({style:{marginTop:"-30px"}},Q)),a.createElement(i.CardBasedOptions,f({style:U?{}:{marginTop:"-30px"}},$)))),(Z||X)&&a.createElement("div",{className:"WhatsAppBanner"},U?a.createElement("img",{src:null==Z?void 0:Z.bannerUrl,onClick:function(){return J(Z)}}):a.createElement("img",{src:null==X?void 0:X.bannerUrl,onClick:function(){return J(X)}})),k()?j?a.createElement(i.Loader,null):a.createElement("div",{className:"WhatsNewSection"},a.createElement("div",{className:"headSection"},a.createElement("h2",null,T(null==Y?void 0:Y.headerLabel)),a.createElement("p",{onClick:function(){var e;return L.push(null==Y||null===(e=Y.sideOption)||void 0===e?void 0:e.navigationUrl)}},T(null==Y||null===(_=Y.sideOption)||void 0===_?void 0:_.name))),a.createElement(i.WhatsNewCard,null==F?void 0:F[0])):null))},Q=function(){var e=o.useTranslation().t,t=s.useHistory(),n=Digit.Hooks.useStore.getInitData(),r=n.data,u=void 0===r?{}:r,c=u.languages,d=u.stateInfo,m=n.isLoading,v=Digit.StoreData.getCurrentLanguage(),f=l.useMemo((function(){return{header:e("CS_COMMON_CHOOSE_LANGUAGE"),submitBarLabel:e("CORE_COMMON_CONTINUE")}}),[e]),p=l.useMemo((function(){return{options:c,optionsKey:"label",additionalWrapperClass:"reverse-radio-selection-wrapper",onSelect:function(e){return Digit.LocalizationService.changeLanguage(e.value,d.code)},selectedOption:null==c?void 0:c.filter((function(e){return e.value===v}))[0]}}),[v,c]);return m?a.createElement(i.Loader,null):a.createElement("div",{className:"selection-card-wrapper"},a.createElement(i.PageBasedInput,{texts:f,onSubmit:function(){var e;t.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/citizen/select-location")}},a.createElement(i.CardHeader,null,e("CS_COMMON_CHOOSE_LANGUAGE")),a.createElement(i.RadioButtons,p)))},$=function(){var e=o.useTranslation().t,t=s.useHistory(),n=s.useLocation(),r=Digit.Hooks.useTenants(),u=r.data,c=r.isLoading,d=l.useState((function(){return{code:Digit.ULBService.getCitizenCurrentTenant(!0)}})),m=d[0],v=d[1],p=l.useState(!1),E=p[0],g=p[1],h=l.useMemo((function(){return{header:e("CS_COMMON_CHOOSE_LOCATION"),submitBarLabel:e("CORE_COMMON_CONTINUE")}}),[e]);function y(e){v(e),g(!1)}var C=l.useMemo((function(){return{options:u,optionsKey:"i18nKey",additionalWrapperClass:"reverse-radio-selection-wrapper",onSelect:y,selectedOption:m}}),[u,e,m]);return c?a.createElement("loader",null):a.createElement("div",{className:"selection-card-wrapper"},a.createElement(i.BackButton,null),a.createElement(i.PageBasedInput,{texts:h,onSubmit:function(){if(m){var e,r;Digit.SessionStorage.set("CITIZEN.COMMON.HOME.CITY",m);var i=null===(e=n.state)||void 0===e?void 0:e.redirectBackTo;i?t.replace(i):t.push("/"+(null===(r=window)||void 0===r?void 0:r.contextPath)+"/citizen")}else g(!0)},className:"location-selection-container"},a.createElement(i.CardHeader,null,e("CS_COMMON_CHOOSE_LOCATION")),a.createElement(i.SearchOnRadioButtons,f({},C,{placeholder:e("COMMON_TABLE_SEARCH")})),E?a.createElement(i.CardLabelError,null,e("CS_COMMON_LOCATION_SELECTION_ERROR")):null))},ee=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var l=1&i?t:n;if(l){try{te(r,1,l(this.v))}catch(e){te(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?te(r,1,t?t(i):i):n?te(r,1,n(i)):te(r,2,i)}catch(e){te(r,2,e)}},r},e}();function te(e,t,n){if(!e.s){if(n instanceof ee){if(!n.s)return void(n.o=te.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(te.bind(null,e,t),te.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}function ne(e){return e instanceof ee&&1&e.s}var re="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function ie(e,t,n){if("function"==typeof e[re]){var r,i,l,a=e[re]();if(function e(o){try{for(;!((r=a.next()).done||n&&n());)if((o=t(r.value))&&o.then){if(!ne(o))return void o.then(e,l||(l=te.bind(null,i=new ee,2)));o=o.v}i?te(i,1,o):i=o}catch(e){te(i||(i=new ee),2,e)}}(),a.return){var o=function(e){try{r.done||a.return()}catch(e){}return e};if(i&&i.then)return i.then(o,(function(e){throw o(e)}));o()}return i}if(!("length"in e))throw new TypeError("Object is not iterable");for(var u=[],c=0;c<e.length;c++)u.push(e[c]);return function(e,t,n){var r,i,l=-1;return function a(o){try{for(;++l<e.length&&(!n||!n());)if((o=t(l))&&o.then){if(!ne(o))return void o.then(a,i||(i=te.bind(null,r=new ee,2)));o=o.v}r?te(r,1,o):r=o}catch(e){te(r||(r=new ee),2,e)}}(),r}(u,(function(e){return t(u[e])}),n)}function le(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function ae(e){var t=e.setProfilePic,n=e.closeDrawer,r=e.userType,u=e.removeProfilePic,c=e.showToast,s=l.useState(null)[1],d=l.useState(""),m=d[0],v=d[1],f=l.useState(null)[1],p=o.useTranslation().t;return l.useEffect((function(){!function(){try{f(null);var e=function(){if(m){var e=function(){if(m.size>=1e6)c("error",p("CORE_COMMON_PROFILE_MAXIMUM_UPLOAD_SIZE_EXCEEDED")),f(p("CORE_COMMON_PROFILE_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));else{var e=le((function(){return Promise.resolve(Digit.UploadServices.Filestorage(r+"-profile",m,Digit.ULBService.getStateId())).then((function(e){var n,r;if((null==e||null===(n=e.data)||void 0===n||null===(r=n.files)||void 0===r?void 0:r.length)>0){var i,l,a=null==e||null===(i=e.data)||void 0===i||null===(l=i.files[0])||void 0===l?void 0:l.fileStoreId;s(a),t(a)}else c("error",p("CORE_COMMON_PROFILE_FILE_UPLOAD_ERROR")),f(p("CORE_COMMON_PROFILE_FILE_UPLOAD_ERROR"))}))}),(function(){c("error",p("CORE_COMMON_PROFILE_INVALID_FILE_INPUT"))}));if(e&&e.then)return e.then((function(){}))}}();if(e&&e.then)return e.then((function(){}))}}();return e&&e.then?e.then((function(){})):void 0}catch(e){Promise.reject(e)}}()}),[m]),a.createElement(a.Fragment,null,a.createElement("div",{style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",width:"100%",height:"100vh",backgroundColor:"rgba(0,0,0,.5)"},onClick:function(){return n()}}),a.createElement("div",{style:{width:"100%",justifyContent:"space-between",display:"flex",backgroundColor:"white",alignItems:"center",position:"fixed",left:"0",right:"0",height:"20%",bottom:"citizen"===r?"2.5rem":"0",zIndex:"1000"}},a.createElement("div",{style:{display:"flex",flex:"1",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",gap:"8px 0"}},a.createElement("label",{for:"file",style:{cursor:"pointer"}}," ",a.createElement(i.GalleryIcon,null)),a.createElement("label",{style:{cursor:"pointer"}}," Gallery"),a.createElement("input",{type:"file",id:"file",accept:"image/*, .png, .jpeg, .jpg",onChange:function(e){return v(e.target.files[0])},style:{display:"none"}})),a.createElement("div",{style:{display:"flex",flex:"1",width:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:"8px 0"}},a.createElement("button",{onClick:function(){u(),n()}},a.createElement(i.RemoveIcon,null)),a.createElement("label",{style:{cursor:"pointer"}},"Remove"))))}"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var oe,ue=function(e){var t,n,r,u,c,d,m,v,p,E,g,h,y=e.stateCode,C=e.userType,O=e.cityDetails,S=(s.useHistory(),o.useTranslation().t),b=window.location.href,N=Digit.ULBService.getStateId(),I=Digit.ULBService.getCurrentTenantId(),w=(null===(t=Digit.UserService.getUser())||void 0===t?void 0:t.info)||{},_=l.useState(null),D=_[0],T=_[1],L=l.useState(null!=w&&w.name?w.name:""),R=L[0],A=L[1],P=l.useState(null!=w&&w.emailId?w.emailId:""),M=P[0],x=P[1],U=l.useState(null==D?void 0:D.gender),k=U[0],B=U[1],F=l.useState(null!=w&&w.permanentCity?w.permanentCity:O.name),j=F[0],V=F[1],H=l.useState(null!=w&&w.mobileNumber?w.mobileNumber:""),G=H[0],z=H[1],W=l.useState(null),q=W[0],X=W[1],Z=l.useState(""),Y=Z[0],K=Z[1],J=l.useState(!1),Q=J[0],$=J[1],ee=l.useState(!1),te=ee[0],ne=ee[1],re=l.useState(""),ie=re[0],oe=re[1],ue=l.useState(""),ce=ue[0],se=ue[1],de=l.useState(""),me=de[0],ve=de[1],fe=l.useState(null),pe=fe[0],Ee=fe[1],ge=l.useState(!1),he=ge[0],ye=ge[1],Ce=a.useState(window.innerWidth),Oe=Ce[0],Se=Ce[1],be=a.useState({}),Ne=be[0],Ie=be[1],we=window.Digit.Utils.browser.isMobile();a.useEffect((function(){return window.addEventListener("resize",(function(){return Se(window.innerWidth)})),function(){window.removeEventListener("resize",(function(){return Se(window.innerWidth)}))}})),l.useEffect((function(){var e;ye(!0),function(){try{var e=null==w?void 0:w.uuid,t=function(){if(e)return Promise.resolve(Digit.UserService.userSearch(I,{uuid:[e]},{})).then((function(e){e&&e.user&&e.user.length&&T(e.user[0])}))}();return Promise.resolve(t&&t.then?t.then((function(){})):void 0)}catch(e){return Promise.reject(e)}}(),B({i18nKey:void 0,code:null==D?void 0:D.gender,value:null==D?void 0:D.gender});var t=null==D||null===(e=D.photo)||void 0===e?void 0:e.split(",");K(null==t?void 0:t.at(0)),ye(!1)}),[null!==D]);var _e=!1,De=function(e){return B(e)},Te=function(){return $(!1)},Le=function(e){A(e),!new RegExp(/^[a-zA-Z ]+$/i).test(e)||0===e.length||e.length>50?Ie(f({},Ne,{userName:{type:"pattern",message:"CORE_COMMON_PROFILE_NAME_INVALID"}})):Ie(f({},Ne,{userName:null}))},Re=function(e){(null==w?void 0:w.userName)!==e?(x(e),!e.length||e.includes("@")&&e.includes(".")?Ie(f({},Ne,{emailAddress:null})):Ie(f({},Ne,{emailAddress:{type:"pattern",message:"CORE_COMMON_PROFILE_EMAIL_INVALID"}}))):Ie(f({},Ne,{emailAddress:null}))},Ae=function(e,t,n){void 0===n&&(n=5e3),Ee({key:e,action:t}),setTimeout((function(){Ee(null)}),n)},Pe=function(){try{var e=function(e){if(t)return e;ye(!1)},t=!1;ye(!0);var n=le((function(){var e=f({},w,{name:R,gender:null==k?void 0:k.value,emailId:M,photo:q});if(!new RegExp(/^([a-zA-Z ])*$/).test(R)||""===R||R.length>50||R.length<1)throw JSON.stringify({type:"error",message:S("CORE_COMMON_PROFILE_NAME_INVALID")});if("employee"===C&&!new RegExp(/^[6-9]{1}[0-9]{9}$/).test(G))throw JSON.stringify({type:"error",message:S("CORE_COMMON_PROFILE_MOBILE_NUMBER_INVALID")});if(M.length&&(!M.includes("@")||!M.includes(".")))throw JSON.stringify({type:"error",message:S("CORE_COMMON_PROFILE_EMAIL_INVALID")});if(te&&(ie.length||ce.length||me.length)){if(ce!==me)throw JSON.stringify({type:"error",message:S("CORE_COMMON_PROFILE_PASSWORD_MISMATCH")});if(!(ie.length&&ce.length&&me.length))throw JSON.stringify({type:"error",message:S("CORE_COMMON_PROFILE_PASSWORD_INVALID")});if(!new RegExp(/^([a-zA-Z0-9@#$%]{8,15})$/i).test(ce)&&!new RegExp(/^([a-zA-Z0-9@#$%]{8,15})$/i).test(me))throw JSON.stringify({type:"error",message:S("CORE_COMMON_PROFILE_PASSWORD_INVALID")})}return Promise.resolve(Digit.UserService.updateUser(e,y)).then((function(e){var t=e.responseInfo;if(e.user,t&&"200"===t.status){var n=Digit.UserService.getUser();n&&Digit.UserService.setUser(f({},n,{info:f({},n.info,{name:R,mobileNumber:G,emailId:M,permanentCity:j})}))}return function(){if(ie.length&&ce.length&&me.length){var e={existingPassword:ie,newPassword:ce,tenantId:I,type:"EMPLOYEE",username:null==w?void 0:w.userName,confirmPassword:me};return function(){if(ce===me)return le((function(){return Promise.resolve(Digit.UserService.changePassword(e,I)).then((function(e){var t=e.responseInfo;if(null==t||!t.status||"200"!==t.status)throw"";Ae("success",S("CORE_COMMON_PROFILE_UPDATE_SUCCESS_WITH_PASSWORD"),5e3),setTimeout((function(){return Digit.UserService.logout()}),2e3)}))}),(function(e){var t,n;throw JSON.stringify({type:"error",message:null!==(t=e.Errors)&&void 0!==t&&null!==(n=t.at(0))&&void 0!==n&&n.description?e.Errors.at(0).description:"CORE_COMMON_PROFILE_UPDATE_ERROR_WITH_PASSWORD"})}));throw JSON.stringify({type:"error",message:"CORE_COMMON_PROFILE_ERROR_PASSWORD_NOT_MATCH"})}()}null!=t&&t.status&&"200"===t.status&&Ae("success",S("CORE_COMMON_PROFILE_UPDATE_SUCCESS"),5e3)}()}))}),(function(e){var t=JSON.parse(e);Ae(t.type,S(t.message),5e3)}));return Promise.resolve(n&&n.then?n.then(e):e(n))}catch(e){return Promise.reject(e)}},Me=[],xe=Digit.Hooks.useGenderMDMS(N,"common-masters","GenderType").data;xe&&xe.map((function(e){Me.push({i18nKey:"PT_COMMON_GENDER_"+e.code,code:""+e.code,value:""+e.code})}));return he?a.createElement(i.Loader,null):a.createElement("div",{className:"user-profile"},a.createElement("section",{style:{margin:"citizen"===C?"8px":"24px"}},"citizen"===C?a.createElement(i.BackButton,null):a.createElement(i.BreadCrumb,{crumbs:[{path:"/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee",content:S("ES_COMMON_HOME"),show:!0},{path:"/"+(null===(r=window)||void 0===r?void 0:r.contextPath)+"/employee/user/profile",content:S("ES_COMMON_PAGE_1"),show:b.includes("/user/profile")}]})),a.createElement("div",{style:{display:"flex",flex:1,flexDirection:Oe<768||"citizen"===C?"column":"row",margin:"citizen"===C?"8px":"16px",gap:"citizen"===C?"":"0 24px",boxShadow:"citizen"===C?"1px 1px 4px 0px rgba(0,0,0,0.2)":"",background:"citizen"===C?"white":"",borderRadius:"citizen"===C?"4px":"",maxWidth:"citizen"===C?"960px":""}},a.createElement("section",{style:{position:"relative",display:"flex",flex:"citizen"===C?1:2.5,justifyContent:"center",alignItems:"center",maxWidth:"100%",height:"376px",borderRadius:"4px",boxShadow:"citizen"===C?"":"1px 1px 4px 0px rgba(0,0,0,0.2)",border:("citizen"===C?"8px":"24px")+" solid #fff",background:"#EEEEEE",padding:"citizen"===C?"8px":"16px"}},a.createElement("div",{style:{position:"relative",height:"citizen"===C?"114px":"150px",width:"citizen"===C?"114px":"150px",margin:"16px"}},a.createElement("img",{style:{margin:"auto",borderRadius:"300px",justifyContent:"center",height:"100%",width:"100%"},src:Y&&""!==Y?Y:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAO4AAADUCAMAAACs0e/bAAAAM1BMVEXK0eL////Dy97GzuD4+fvL0uPg5O7T2efb4OvR1+Xr7vTk5/Df4+37/P3v8fbO1eTt8PUsnq5FAAAGqElEQVR4nO2d25ajIBBFCajgvf//a0eMyZgEjcI5xgt7Hmatme507UaxuJXidiDqjmSgeVIMlB1ZR1WZAf2gbdu0QwixSYzjOJPmHurfEGEfY9XzjNGG9whQCeVAuv5xQEySLtR9hPuIcwj0EeroN5m3D1IbsbgHK0esiQ9MKsqXVr8Hm/a/Pulk6wihpCIXBw3dh7bTvRBt9+dC5NfS1VH3xETdM3MxXRN1T0zUPTNR98xcS1dlV9NNfx3DhkTdM6PKqHteVBF1z0vU5f0sKdpc2zWLKutXrjJjdLvpesRmukqYonauPhXpdsLb6CppmpnltsYIuY2yavi6Mi2/rzAWm1zUfF0limVLqkZyA+mDYevKBS37aGC+L1lX5e7uyU1Cv565uiua9k5LFqbqqrnu2I3m+jJ11ZoLeRtfmdB0Uw/ZDsP0VTxdn7a1VERfmq7XlXyn5D2QWLoq8bZlPoBJumphJjVBw/Ll6CoTZGsTDs4NrGqKbqBth8ZHJUi6cn168QmleSm6GmB7Kxm+6obXlf7PoDHosCwM3QpiS2legi6ocSl3L0G3BdneDDgwQdENfeY+SfDJBkF37ZB+GvwzA6/rMaafAn8143VhPZWdjMWG1oHXhdnemgPoAvLlB/iZyRTfVeF06wPoQhJmlm4bdcOAZRlRN5gcPc5SoPEQR1fDdbOo6wn+uYvXxY0QCLom6gYROKH+Aj5nvphuFXWDiLpRdxl/19LFT95k6CHCrnW7pCDqBn1i1PUFvii2c11oZOJ6usWeH0RRNzC4Zs+6FTi2nevCVwCjbugnXklX5fkfTldL8PEilUB1kfNyN1u9MME2sATr4lbuB7AjfLAuvsRm1A0g6gYRdcPAjvBlje2Z8brI8OC68AcRdlCkwLohx2mcZMjw9q+LzarQurjtnwPYAydX08WecECO/u6Ad0GBdYG7jO5gB4Ap+PwKcA9ZT43dn4/W9TyiPAn4OAJaF7h3uwe8StSCddFdM3jqFa2LvnnB5zzhuuBBAjY4gi50cg694gnXhTYvfMdrjtcFZhrwE9r41gUem8IXWMC3LrBzxh+a0gRd1N1LOK7M0IUUGuggvEmHoStA2/MJh7MpupiDU4TzjhxdzLAoO4ouZvqVURbFMHQlZD6SUeWHoguZsSLUGegrehA+FZFowPdUWTi6iMoZlIpGGUUXkDbjj/9ZOLqAQS/+GIKl5BQOCn/ycqpzkXSDm5dU7ZWkG7wUyGlcmm7g5Ux56AqirgoaJ7BeokPTDbp9CbVunjFxPrl7+HqnkrSq1Da7JX20f3dV8yJi6voO81mX8vV0mx3qUsZCPRfTlVRdz2EvdufYGDvNQvvwqHtmXd+a1ITinwNcXc+lT6JuzdT1XDyBn/x7wtX1HCQQdW9MXc8xArGrirowfLeUEbMqqq6f7TF1lfRdOuGNiGi6SpT+WxY06xUfNN2wBfyE9I4tlm7w5hvOPDNJN3yNiLMipji6gE3chKhouoCtN5x3QlF0EZt8OW/8ougitqJQlk1aii7iFC9l0MvRReyao7xNjKML2Z/PuHlzhi5mFxljiZeiC9rPTEisNEMX9KYAwo5Xhi7qaA3hamboYm7dG+NVrXhdaYDv5zFaQZsYrCtbbAGnjkQDX2+J1FXCwOsqWOpKoIQNTFdqYBWydxqNqUoG0pVpCS+H8kaJaGKErlIaXj7CRRE+gRWuKwW9YZ80oVOUgbpdT0zpnSZJTIiwCtJVelvXntr4P5j6BWfPb5Wcx84C4cq3hb11lco2u2Mdwp6XdJ/Ne3wb8DWdfiRenZaXrhLwOj4e+GQeHroy3YOspS7TlU28Wle2m2QUS0mqdcbrdNW+ZHsSsyK7tBfm0q/dWcv+Z3mytVx3t7KWulqUe6ilunu8jF8pFwgv1FXp3mUt35OtRbr7eM4u4Gs6vUBXgeuHc5kfE/cbvWZtkROLm1DMtLCy80tzsu2PRj0hTI8fvrQuvsjlJkyutszq+m423wHaLTyniy/XuiGZ84LuT+m5ZfNfRxyGs7LXZOvia7VujatUwVTrIt+Q/Csc7Tuhe+BOakT10b4TuoiiJjvgU9emTO42PwEfBa+cuodKkuf42DXr1D3JpXz73Hnn0j10evHKe+nufgfUm+7B84sX9FfdEzXux2DBpWuKokkCqN/5pa/8pmvnL+RGKCddCGmatiPyPB/+ekO/M/q/7uvbt22kTt3zEnXPzCV13T3Gel4/6NduDu66xRvlPNkM1RjjxUdv+4WhGx6TftD19Q/dfzpwcHO+rE3fAAAAAElFTkSuQmCC"}),a.createElement("button",{style:{position:"absolute",left:"50%",bottom:"-24px",transform:"translateX(-50%)"},onClick:function(){return $(!Q)}},a.createElement(i.CameraIcon,null)))),a.createElement("section",{style:{display:"flex",flexDirection:"column",flex:"citizen"===C?1:7.5,width:"100%",borderRadius:"4px",height:"fit-content",boxShadow:"citizen"===C?"":"1px 1px 4px 0px rgba(0,0,0,0.2)",background:"white",padding:"citizen"===C?"8px":"24px",paddingBottom:"20px"}},"citizen"===C?a.createElement(a.Fragment,null,a.createElement(i.LabelFieldPair,null,a.createElement(i.CardLabel,{style:{}},""+S("CORE_COMMON_PROFILE_NAME"),"*"),a.createElement("div",{style:{width:"100%",maxWidth:"960px"}},a.createElement(i.TextInput,f({t:S,style:{width:"100%"},type:"text",isMandatory:!1,name:"name",value:R,onChange:function(e){return Le(e.target.value)}},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"tel",title:S("CORE_COMMON_PROFILE_NAME_ERROR_MESSAGE")},{disable:_e})),(null==Ne?void 0:Ne.userName)&&a.createElement(i.CardLabelError,null," ",S(null==Ne||null===(u=Ne.userName)||void 0===u?void 0:u.message)," "))),a.createElement(i.LabelFieldPair,null,a.createElement(i.CardLabel,{style:{}},""+S("CORE_COMMON_PROFILE_GENDER")),a.createElement(i.Dropdown,{style:{width:"100%"},className:"form-field",selected:1===(null==k?void 0:k.length)?k[0]:k,disable:1===(null==k?void 0:k.length)||_e,option:Me,select:De,value:k,optionKey:"code",t:S,name:"gender"})),a.createElement(i.LabelFieldPair,null,a.createElement(i.CardLabel,{style:{}},""+S("CORE_COMMON_PROFILE_EMAIL")),a.createElement("div",{style:{width:"100%"}},a.createElement(i.TextInput,{t:S,style:{width:"100%"},type:"email",isMandatory:!1,optionKey:"i18nKey",name:"email",value:M,onChange:function(e){return Re(e.target.value)},disable:_e}),(null==Ne?void 0:Ne.emailAddress)&&a.createElement(i.CardLabelError,null," ",S(null==Ne||null===(c=Ne.emailAddress)||void 0===c?void 0:c.message)," "))),a.createElement("button",{onClick:Pe,style:{marginTop:"24px",backgroundColor:"#F47738",width:"100%",height:"40px",color:"white",maxWidth:we?"100%":"240px",borderBottom:"1px solid black"}},S("CORE_COMMON_SAVE"))):a.createElement(a.Fragment,null,a.createElement(i.LabelFieldPair,{style:{display:"flex"}},a.createElement(i.CardLabel,{className:"profile-label-margin",style:{width:"300px"}},""+S("CORE_COMMON_PROFILE_NAME"),"*"),a.createElement("div",{style:{width:"100%"}},a.createElement(i.TextInput,f({t:S,type:"text",isMandatory:!1,name:"name",value:R,onChange:function(e){return Le(e.target.value)},placeholder:"Enter Your Name"},{isRequired:!0,pattern:"^[a-zA-Z-.`' ]*$",type:"text",title:S("CORE_COMMON_PROFILE_NAME_ERROR_MESSAGE")},{disable:_e})),(null==Ne?void 0:Ne.userName)&&a.createElement(i.CardLabelError,{style:{margin:0,padding:0}}," ",S(null==Ne||null===(d=Ne.userName)||void 0===d?void 0:d.message)," "))),a.createElement(i.LabelFieldPair,{style:{display:"flex"}},a.createElement(i.CardLabel,{className:"profile-label-margin",style:{width:"300px"}},""+S("CORE_COMMON_PROFILE_GENDER")),a.createElement(i.Dropdown,{style:{width:"100%"},selected:1===(null==k?void 0:k.length)?k[0]:k,disable:1===(null==k?void 0:k.length)||_e,option:Me,select:De,value:k,optionKey:"code",t:S,name:"gender"})),a.createElement(i.LabelFieldPair,{style:{display:"flex"}},a.createElement(i.CardLabel,{className:"profile-label-margin",style:{width:"300px"}},""+S("CORE_COMMON_PROFILE_CITY")),a.createElement("div",{style:{width:"100%"}},a.createElement(i.TextInput,f({t:S,type:"text",isMandatory:!1,name:"city",value:S(Digit.Utils.locale.getTransformedLocale("TENANT_TENANTS_"+I)),onChange:function(e){return V(e.target.value)},placeholder:"Enter Your City Name"},{isRequired:!0,type:"text",title:S("CORE_COMMON_PROFILE_CITY_ERROR_MESSAGE")},{disable:!0})),a.createElement(i.CardLabelError,null))),a.createElement(i.LabelFieldPair,{style:{display:"flex"}},a.createElement(i.CardLabel,{className:"profile-label-margin",style:{width:"300px"}},S("CORE_COMMON_PROFILE_MOBILE_NUMBER")+"*"),a.createElement("div",{style:{width:"100%"}},a.createElement(i.MobileNumber,{value:G,style:{width:"100%"},name:"mobileNumber",placeholder:"Enter a valid Mobile No.",onChange:function(e){return function(e){z(e),"employee"!==C||new RegExp(/^[6-9]{1}[0-9]{9}$/).test(e)?Ie(f({},Ne,{mobileNumber:null})):Ie(f({},Ne,{mobileNumber:{type:"pattern",message:"CORE_COMMON_PROFILE_MOBILE_NUMBER_INVALID"}}))}(e)},disable:!0,required:!0,pattern:"[6-9]{1}[0-9]{9}",type:"tel",title:S("CORE_COMMON_PROFILE_MOBILE_NUMBER_INVALID")}),(null==Ne?void 0:Ne.mobileNumber)&&a.createElement(i.CardLabelError,{style:{margin:0,padding:0}}," ",S(null==Ne||null===(m=Ne.mobileNumber)||void 0===m?void 0:m.message)," "))),a.createElement(i.LabelFieldPair,{style:{display:"flex"}},a.createElement(i.CardLabel,{className:"profile-label-margin",style:{width:"300px"}},""+S("CORE_COMMON_PROFILE_EMAIL")),a.createElement("div",{style:{width:"100%"}},a.createElement(i.TextInput,{t:S,type:"email",isMandatory:!1,placeholder:S("EMAIL_VALIDATION"),optionKey:"i18nKey",name:"email",value:M,onChange:function(e){return Re(e.target.value)},disable:_e}),(null==Ne?void 0:Ne.emailAddress)&&a.createElement(i.CardLabelError,null," ",S(null==Ne||null===(v=Ne.emailAddress)||void 0===v?void 0:v.message)," "))),a.createElement(i.LabelFieldPair,null,a.createElement("div",null,a.createElement("a",{style:(p={color:"orange",cursor:"default",marginBottom:"5"},p.cursor="pointer",p),onClick:function(){return ne(!te)}},S("CORE_COMMON_CHANGE_PASSWORD")),te?a.createElement("div",{style:{marginTop:"10px"}},a.createElement(i.LabelFieldPair,{style:{display:"flex"}},a.createElement(i.CardLabel,{className:"profile-label-margin",style:{width:"300px"}},""+S("CORE_COMMON_PROFILE_CURRENT_PASSWORD")),a.createElement("div",{style:{width:"100%"}},a.createElement(i.TextInput,{t:S,type:"password",isMandatory:!1,name:"name",pattern:"^([a-zA-Z0-9@#$%])+$",onChange:function(e){return t=e.target.value,oe(t),void(new RegExp(/^([a-zA-Z0-9@#$%]{8,15})$/i).test(t)?Ie(f({},Ne,{currentPassword:null})):Ie(f({},Ne,{currentPassword:{type:"pattern",message:"CORE_COMMON_PROFILE_PASSWORD_INVALID"}})));var t},disable:_e}),(null==Ne?void 0:Ne.currentPassword)&&a.createElement(i.CardLabelError,null,S(null==Ne||null===(E=Ne.currentPassword)||void 0===E?void 0:E.message)))),a.createElement(i.LabelFieldPair,{style:{display:"flex"}},a.createElement(i.CardLabel,{className:"profile-label-margin",style:{width:"300px"}},""+S("CORE_COMMON_PROFILE_NEW_PASSWORD")),a.createElement("div",{style:{width:"100%"}},a.createElement(i.TextInput,{t:S,type:"password",isMandatory:!1,name:"name",pattern:"^([a-zA-Z0-9@#$%])+$",onChange:function(e){return t=e.target.value,se(t),void(new RegExp(/^([a-zA-Z0-9@#$%]{8,15})$/i).test(t)?Ie(f({},Ne,{newPassword:null})):Ie(f({},Ne,{newPassword:{type:"pattern",message:"CORE_COMMON_PROFILE_PASSWORD_INVALID"}})));var t},disable:_e}),(null==Ne?void 0:Ne.newPassword)&&a.createElement(i.CardLabelError,null,S(null==Ne||null===(g=Ne.newPassword)||void 0===g?void 0:g.message)))),a.createElement(i.LabelFieldPair,{style:{display:"flex"}},a.createElement(i.CardLabel,{className:"profile-label-margin",style:{width:"300px"}},""+S("CORE_COMMON_PROFILE_CONFIRM_PASSWORD")),a.createElement("div",{style:{width:"100%"}},a.createElement(i.TextInput,{t:S,type:"password",isMandatory:!1,name:"name",pattern:"^([a-zA-Z0-9@#$%])+$",onChange:function(e){return t=e.target.value,ve(t),void(new RegExp(/^([a-zA-Z0-9@#$%]{8,15})$/i).test(t)?Ie(f({},Ne,{confirmPassword:null})):Ie(f({},Ne,{confirmPassword:{type:"pattern",message:"CORE_COMMON_PROFILE_PASSWORD_INVALID"}})));var t},disable:_e}),(null==Ne?void 0:Ne.confirmPassword)&&a.createElement(i.CardLabelError,null,S(null==Ne||null===(h=Ne.confirmPassword)||void 0===h?void 0:h.message))))):""))))),"employee"===C?a.createElement("div",{className:"action-bar-wrap"},a.createElement(i.SubmitBar,{t:S,label:S("CORE_COMMON_SAVE"),onSubmit:Pe})):"",pe&&a.createElement(i.Toast,{error:"error"===pe.key,label:S("success"===pe.key?"CORE_COMMON_PROFILE_UPDATE_SUCCESS":pe.action),onClose:function(){return Ee(null)},style:{maxWidth:"670px"}}),1==Q?a.createElement(ae,{setProfilePic:function(e){try{var t=function(e){K(null==e?void 0:e.thumbs[0]),Te()};return X(e),Promise.resolve(e?Promise.resolve(function(e,t){try{return Promise.resolve(Digit.UploadServices.Filefetch(e,t)).then((function(e){return e.data.fileStoreIds&&0!==e.data.fileStoreIds.length?{thumbs:e.data.fileStoreIds.map((function(e){return e.url.split(",")[3]})),images:e.data.fileStoreIds.map((function(e){return Digit.Utils.getFileUrl(e.url)}))}:null}))}catch(e){return Promise.reject(e)}}([e],N)).then(t):t(null))}catch(e){return Promise.reject(e)}},closeDrawer:Te,userType:C,removeProfilePic:function(){X(null),K(null)},showToast:Ae}):"")},ce=function(e){var t,n,r,u=e.module,c=Digit.UserService.getUser(),s=((null==c||null===(t=c.info)||void 0===t?void 0:t.tenantId)||Digit.ULBService.getCurrentTenantId(),o.useTranslation().t),d=Digit.SessionStorage.get("initData").stateInfo,m=Digit.StoreData.getCurrentLanguage(),v=l.useState(m),f=v[0],p=v[1],E=l.useState(!1),g=E[0],h=E[1],y=l.useState(""),C=y[0],O=y[1],S=function(){return a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M12 24C5.38053 24 0 18.6143 0 12C0 5.38054 5.38053 1.90735e-06 12 1.90735e-06C18.6143 1.90735e-06 24 5.38054 24 12C24 18.6143 18.6143 24 12 24ZM16.3488 10.7852L11.3855 7.25251C11.1263 7.0701 10.8238 6.97889 10.5214 6.97889C10.291 6.97889 10.0557 7.03172 9.83976 7.14202C9.34054 7.40118 9.02857 7.91006 9.02857 8.46694L9.02877 15.5323C9.02877 16.0892 9.34076 16.5979 9.83996 16.8572C10.3344 17.1116 10.9296 17.0732 11.3857 16.7467L16.349 13.214C16.7426 12.9356 16.9778 12.4795 16.9778 11.9996C16.9776 11.5197 16.7426 11.0636 16.3489 10.7852L16.3488 10.7852Z",fill:"white"}))},b=Digit.Hooks.useGetHowItWorksJSON(Digit.ULBService.getStateId()),N=b.isLoading,I=b.data,w=null==I||null===(n=I.MdmsRes["common-masters"])||void 0===n||null===(r=n.howItWorks[0])||void 0===r?void 0:r[""+u];return N?a.createElement(i.Loader,null):a.createElement(l.Fragment,null,a.createElement("div",{className:"how-it-works-page"},a.createElement(i.BackButton,null),a.createElement("div",{className:"how-it-works-page-header"},a.createElement(i.Header,null,s("HOW_IT_WORKS"))),a.createElement("div",{className:"language-selector",style:{margin:"10px"}},[{label:"ENGLISH",value:"en_IN"},{label:"",value:"hi_IN"}].map((function(e,t){return a.createElement("div",{className:"language-button-container",key:t},a.createElement(i.CustomButton,{selected:e.value===f,text:e.label,onClick:function(){return function(e){p(e.value),Digit.LocalizationService.changeLanguage(e.value,d.code)}(e)}}))}))),w.videosJson.map((function(e,t){return a.createElement("div",null,a.createElement("div",{className:"WhatsNewCard",style:{float:"left",position:"relative",width:"100%",marginBottom:10}},a.createElement("div",{className:"video-icon",onClick:function(){return t=e,O("hi_IN"===f?t.hi_IN:t.en_IN),void h(!0);var t}},a.createElement("div",{className:"vid-svg"},a.createElement(S,null))),a.createElement("div",{className:"how-it-works-header-description"},a.createElement("h2",null,s(e.headerLabel)),a.createElement("p",null,s(e.description)))))})),a.createElement("div",{className:"WhatsNewCard",style:{position:"relative",width:"100%",marginBottom:10,display:"inline-block"}},a.createElement("div",{className:"how-it-works-pdf-section"},a.createElement("div",{className:"pdf-icon-header-desc"},a.createElement("div",{className:"pdf-icon"},a.createElement(i.PDFSvg,null)),a.createElement("div",{className:"pdf-header-desc"},a.createElement("h2",null,s(w.pdfHeader)),a.createElement("p",null,s(w.pdfDesc)))),a.createElement("div",{className:"download-icon"},a.createElement(i.DownloadImgIcon,null)))),g&&a.createElement("div",{className:"how-it-works-video-play"},a.createElement("div",{className:"close-button"},a.createElement(i.CloseSvg,{onClick:function(){h(!1)}})),a.createElement("video",{width:500,height:500,controls:!0,autoPlay:!0},a.createElement("source",{src:C,type:"video/mp4"})))))},se=[{texts:{header:"CS_LOGIN_PROVIDE_MOBILE_NUMBER",cardText:"CS_LOGIN_TEXT",nextText:"CS_COMMONS_NEXT",submitBarLabel:"CS_COMMONS_NEXT"},inputs:[{label:"CORE_COMMON_MOBILE_NUMBER",type:"text",name:"mobileNumber",error:"ERR_HRMS_INVALID_MOB_NO",validation:{required:!0,minLength:10,maxLength:10}}]},{texts:{header:"CS_LOGIN_OTP",cardText:"CS_LOGIN_OTP_TEXT",nextText:"CS_COMMONS_NEXT",submitBarLabel:"CS_COMMONS_NEXT"}},{texts:{header:"CS_LOGIN_PROVIDE_NAME",cardText:"CS_LOGIN_NAME_TEXT",nextText:"CS_COMMONS_NEXT",submitBarLabel:"CS_COMMONS_NEXT"},inputs:[{label:"CORE_COMMON_NAME",type:"text",name:"name",error:"CORE_COMMON_NAME_VALIDMSG",validation:{required:!0,minLength:1,pattern:/^[^{0-9}^\$\"<>?\\\\~!@#$%^()+={}\[\]*,/_:;]{1,50}$/i}}]}],de=function(e){var t=e.t,n=e.onSelect,r=e.mobileNumber,l=e.onMobileChange,o=e.config,u=e.canSubmit;return a.createElement(i.FormStep,{isDisabled:!(10===r.length&&u),onSelect:n,config:o,t,componentInFront:"+91",onChange:l,value:r})},me=function(e){var t=e.config,n=e.onSelect,r=e.t,l=e.isDisabled;return a.createElement(i.FormStep,{config:t,onSelect:n,t:r,isDisabled:l})},ve=function(e){var t,n,r,o=e.config,u=e.otp,c=e.onOtpChange,s=e.onResend,d=e.onSelect,m=e.t,v=e.error,f=e.userType,p=void 0===f?"citizen":f,E=e.canSubmit,g=l.useState(30),h=g[0],y=g[1];t=function(){y(h-1)},n=h>0?1e3:null,r=l.useRef(),l.useEffect((function(){r.current=t}),[t]),l.useEffect((function(){if(null!==n){var e=setInterval((function(){r.current()}),n);return function(){return clearInterval(e)}}}),[n]);var C=function(){s(),y(2)};return"employee"===p?a.createElement(l.Fragment,null,a.createElement(i.OTPInput,{length:6,onChange:c,value:u}),h>0?a.createElement(i.CardText,null,m("CS_RESEND_ANOTHER_OTP")+" "+h+" "+m("CS_RESEND_SECONDS")):a.createElement("p",{className:"card-text-button resend-otp",onClick:C},m("CS_RESEND_OTP")),!v&&a.createElement(i.CardLabelError,null,m("CS_INVALID_OTP"))):a.createElement(i.FormStep,{onSelect:d,config:o,t:m,isDisabled:!(6===(null==u?void 0:u.length)&&E)},a.createElement(i.OTPInput,{length:6,onChange:c,value:u}),h>0?a.createElement(i.CardText,null,m("CS_RESEND_ANOTHER_OTP")+" "+h+" "+m("CS_RESEND_SECONDS")):a.createElement("p",{className:"card-text-button",onClick:C},m("CS_RESEND_OTP")),!v&&a.createElement(i.CardLabelError,null,m("CS_INVALID_OTP")))},fe=["ResponseInfo","UserRequest"],pe=["ResponseInfo","UserRequest"],Ee={type:"register"},ge={type:"login"},he="/"+(null===(oe=window)||void 0===oe?void 0:oe.contextPath)+"/citizen",ye=function(e,t){return(null==e?void 0:e.from)||(null==t?void 0:t.from)||he},Ce=function(e){var t,n,r=e.stateCode,u=e.isUserRegistered,c=void 0===u||u,d=o.useTranslation().t,m=s.useLocation(),v=s.useRouteMatch().path,p=s.useHistory(),g=l.useState(null),h=g[0],y=g[1],C=l.useState(null),O=C[0],S=C[1],b=l.useState(!0),N=b[0],I=b[1],w=(l.useState(null),l.useState(c?{}:null==m||null===(t=m.state)||void 0===t?void 0:t.data)),_=w[0],D=w[1],T=l.useState(null),L=T[0],R=T[1],A=Digit.Hooks.useQueryParams(),P=l.useState(!1),M=P[0],x=P[1],U=l.useState(!0),k=U[0],B=U[1],F=l.useState(!0),j=F[0],V=F[1];l.useEffect((function(){var e;return O&&(L&&(clearTimeout(L),R(null)),e=setTimeout((function(){S("")}),5e3),R(e)),function(){e&&clearTimeout(e)}}),[O]),l.useEffect((function(){var e;if(h){var t,n,i,l,a,o;Digit.SessionStorage.set("citizen.userRequestObject",h),Digit.UserService.setUser(h),t=null==h?void 0:h.info,n=null==h?void 0:h.access_token,i=r,o=null===(l=JSON.parse(sessionStorage.getItem("Digit.initData")))||void 0===l||null===(a=l.value)||void 0===a?void 0:a.selectedLanguage,localStorage.setItem("Citizen.tenant-id",i),localStorage.setItem("tenant-id",i),localStorage.setItem("citizen.userRequestObject",JSON.stringify(t)),localStorage.setItem("locale",o),localStorage.setItem("Citizen.locale",o),localStorage.setItem("token",n),localStorage.setItem("Citizen.token",n),localStorage.setItem("user-info",JSON.stringify(t)),localStorage.setItem("Citizen.user-info",JSON.stringify(t));var u,c=(null===(e=m.state)||void 0===e?void 0:e.from)||he;Digit.ULBService.getCitizenCurrentTenant(!0)?p.replace(c):p.replace("/"+(null===(u=window)||void 0===u?void 0:u.contextPath)+"/citizen/select-location",{redirectBackTo:c})}}),[h]);var H=l.useMemo((function(){return se.map((function(e){var t={};for(var n in e.texts)t[n]=d(e.texts[n]);return f({},e,{texts:t})}),[se])})),G=function(){return Digit.UserService.getType()},z=function(e){return Promise.resolve(le((function(){return Promise.resolve(Digit.UserService.sendOtp(e,r)).then((function(e){return[e,null]}))}),(function(e){return[null,e]})))};return a.createElement("div",{className:"citizen-form-wrapper"},a.createElement(s.Switch,null,a.createElement(i.AppContainer,null,a.createElement(i.BackButton,null),a.createElement(s.Route,{path:""+v,exact:!0},a.createElement(de,{onSelect:function(e){try{V(!1),D(f({},_,e));var t=f({},e,{tenantId:r,userType:G()});return Promise.resolve(c?Promise.resolve(z({otp:f({},t,ge)})).then((function(e){var n,r,i,l;if(e[0],!e[1])return V(!0),void p.replace(v+"/otp",{from:ye(m.state,A),role:null===(r=m.state)||void 0===r?void 0:r.role});V(!0),m.state&&"FSM_DSO"===m.state.role||p.push("/"+(null===(i=window)||void 0===i?void 0:i.contextPath)+"/citizen/register/name",{from:ye(m.state,A),data:t}),null!==(n=m.state)&&void 0!==n&&n.role&&(V(!0),S("FSM_DSO"===(null===(l=m.state)||void 0===l?void 0:l.role)?d("ES_ERROR_DSO_LOGIN"):"User not registered."))})):Promise.resolve(z({otp:f({},t,Ee)})).then((function(e){if(e[0],!e[1])return V(!0),void p.replace(v+"/otp",{from:ye(m.state,A)});V(!0)})))}catch(e){return Promise.reject(e)}},config:H[0],mobileNumber:_.mobileNumber||"",onMobileChange:function(e){var t=e.target.value;D(f({},_,{mobileNumber:t}))},canSubmit:j,showRegisterLink:c&&!(null!==(n=m.state)&&void 0!==n&&n.role),t:d})),a.createElement(s.Route,{path:v+"/otp"},a.createElement(ve,{config:f({},H[1],{texts:f({},H[1].texts,{cardText:H[1].texts.cardText+" "+(_.mobileNumber||"")})}),onOtpChange:function(e){D(f({},_,{otp:e}))},onResend:function(){try{var e={mobileNumber:_.mobileNumber,tenantId:r,userType:G()},t=function(){if(!c)return Promise.resolve(z({otp:f({},e,Ee)})).then((function(){}));var t=function(){if(c)return Promise.resolve(z({otp:f({},e,ge)})).then((function(){}))}();return t&&t.then?t.then((function(){})):void 0}();return Promise.resolve(t&&t.then?t.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},onSelect:function(){try{return Promise.resolve(le((function(){I(!0),B(!1);var e=_.mobileNumber,t=_.otp,n=_.name;return function(){if(c){var i={username:e,password:t,tenantId:r,userType:G()};return Promise.resolve(Digit.UserService.authenticate(i)).then((function(e){e.ResponseInfo;var t,n,r,i=e.UserRequest,l=E(e,fe);if(null!==(t=m.state)&&void 0!==t&&t.role){var a=i.roles.find((function(e){return e.code===m.state.role}));if(!a||!a.code)return S(d("ES_ERROR_USER_NOT_PERMITTED")),void setTimeout((function(){return p.replace(he)}),5e3)}null!==(n=window)&&void 0!==n&&null!==(r=n.globalConfigs)&&void 0!==r&&r.getConfig("ENABLE_SINGLEINSTANCE")&&(i.tenantId=Digit.ULBService.getStateId()),y(f({info:i},l))}))}var l=function(){if(!c){var i={name:n,username:e,otpReference:t,tenantId:r};return Promise.resolve(Digit.UserService.registerUser(i,r)).then((function(e){e.ResponseInfo;var t,n,r=e.UserRequest,i=E(e,pe);null!==(t=window)&&void 0!==t&&null!==(n=t.globalConfigs)&&void 0!==n&&n.getConfig("ENABLE_SINGLEINSTANCE")&&(r.tenantId=Digit.ULBService.getStateId()),y(f({info:r},i))}))}}();if(l&&l.then)return l.then((function(){}))}()}),(function(){B(!0),I(!1)})))}catch(e){return Promise.reject(e)}},otp:_.otp,error:N,canSubmit:k,t:d})),a.createElement(s.Route,{path:v+"/name"},a.createElement(me,{config:H[2],onSelect:function(e){try{var t=f({},_,{tenantId:r,userType:G()},e);return D(f({},_,e)),x(!0),Promise.resolve(z({otp:f({},t,Ee)})).then((function(e){var t=e[0];e[1],t?(x(!1),p.replace(v+"/otp",{from:ye(m.state,A)})):x(!1)}))}catch(e){return Promise.reject(e)}},t:d,isDisabled:M})),O&&a.createElement(i.Toast,{error:!0,label:O,onClose:function(){return S(null)}}))))},Oe=function(e){return e instanceof HTMLElement},Se="blur",be="change",Ne="input",Ie="onChange",we="onSubmit",_e="select",De="undefined",Te="pattern",Le="required",Re=function(e){return null==e},Ae=function(e){return"object"==typeof e},Pe=function(e){return!Re(e)&&!Array.isArray(e)&&Ae(e)&&!(e instanceof Date)},Me=function(e){return/^\w*$/.test(e)},xe=function(e){return e.filter(Boolean)},Ue=function(e){return xe(e.replace(/["|']/g,"").replace(/\[/g,".").replace(/\]/g,"").split("."))};function ke(e,t,n){for(var r=-1,i=Me(t)?[t]:Ue(t),l=i.length,a=l-1;++r<l;){var o=i[r],u=n;if(r!==a){var c=e[o];u=Pe(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}e[o]=u,e=e[o]}return e}var Be=function(e,t){for(var n in void 0===t&&(t={}),e)Me(n)?t[n]=e[n]:ke(t,n,e[n]);return t},Fe=function(e){return void 0===e},je=function(e,t,n){void 0===e&&(e={});var r=xe(t.split(/[,[\].]+?/)).reduce((function(e,t){return Re(e)?e:e[t]}),e);return Fe(r)||r===e?Fe(e[t])?n:e[t]:r},Ve=function(e,t){Oe(e)&&e.removeEventListener&&(e.removeEventListener(Ne,t),e.removeEventListener(be,t),e.removeEventListener(Se,t))},He={isValid:!1,value:null},Ge=function(e){return Array.isArray(e)?e.reduce((function(e,t){return t&&t.ref.checked?{isValid:!0,value:t.ref.value}:e}),He):He},ze=function(e){return[].concat(e).filter((function(e){return e.selected})).map((function(e){return e.value}))},We=function(e){return"radio"===e.type},qe=function(e){return"file"===e.type},Xe=function(e){return"checkbox"===e.type},Ze=function(e){return e.type===_e+"-multiple"},Ye={value:!1,isValid:!1},Ke={value:!0,isValid:!0},Je=function(e){if(Array.isArray(e)){if(e.length>1){var t=e.filter((function(e){return e&&e.ref.checked})).map((function(e){return e.ref.value}));return{value:t,isValid:!!t.length}}var n=e[0].ref,r=n.checked,i=n.value,l=n.attributes;return r?l&&!Fe(l.value)?Fe(i)||""===i?Ke:{value:i,isValid:!0}:Ke:Ye}return Ye};function Qe(e,t,n,r,i){var l=e.current[t];if(l){var a=l.ref,o=a.value,u=a.disabled,c=l.ref,s=l.valueAsNumber,d=l.valueAsDate,m=l.setValueAs;if(u&&r)return;return qe(c)?c.files:We(c)?Ge(l.options).value:Ze(c)?ze(c.options):Xe(c)?Je(l.options).value:i?o:s?""===o?NaN:+o:d?c.valueAsDate:m?m(o):o}if(n)return je(n.current,t)}function $e(e){return!e||e instanceof HTMLElement&&e.nodeType!==Node.DOCUMENT_NODE&&$e(e.parentNode)}var et=function(e){return Pe(e)&&!Object.keys(e).length},tt=function(e){return"boolean"==typeof e};function nt(e,t){var n,r=Me(t)?[t]:Ue(t),i=1==r.length?e:function(e,t){for(var n=t.slice(0,-1).length,r=0;r<n;)e=Fe(e)?r++:e[t[r++]];return e}(e,r),l=r[r.length-1];i&&delete i[l];for(var a=0;a<r.slice(0,-1).length;a++){var o=-1,u=void 0,c=r.slice(0,-(a+1)),s=c.length-1;for(a>0&&(n=e);++o<c.length;){var d=c[o];u=u?u[d]:e[d],s===o&&(Pe(u)&&et(u)||Array.isArray(u)&&!u.filter((function(e){return Pe(e)&&!et(e)||tt(e)})).length)&&(n?delete n[d]:delete e[d]),n=u}}return e}var rt=function(e,t){return e&&e.ref===t},it=function(e){return Re(e)||!Ae(e)};function lt(e,t){if(it(e)||it(t))return t;for(var n in t){var r=e[n],i=t[n];try{e[n]=Pe(r)&&Pe(i)||Array.isArray(r)&&Array.isArray(i)?lt(r,i):i}catch(e){}}return e}function at(e,t,n){if(it(e)||it(t)||e instanceof Date||t instanceof Date)return e===t;if(!l.isValidElement(e)){var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var a=0,o=r;a<o.length;a++){var u=o[a],c=e[u];if(!n||"ref"!==u){var s=t[u];if((Pe(c)||Array.isArray(c))&&(Pe(s)||Array.isArray(s))?!at(c,s,n):c!==s)return!1}}}return!0}function ot(e,t,n,r,i){for(var l=-1;++l<e.length;){for(var a in e[l]){var o;Array.isArray(e[l][a])?(!n[l]&&(n[l]={}),n[l][a]=[],ot(e[l][a],je(t[l]||{},a,[]),n[l][a],n[l],a)):at(je(t[l]||{},a),e[l][a])?ke(n[l]||{},a):n[l]=Object.assign(Object.assign({},n[l]),((o={})[a]=!0,o))}r&&!n.length&&delete r[i]}return n}var ut=function(e){return"string"==typeof e},ct=function(e,t,n,r,i){var l={},a=function(t){(Fe(i)||(ut(i)?t.startsWith(i):Array.isArray(i)&&i.find((function(e){return t.startsWith(e)}))))&&(l[t]=Qe(e,t,void 0,r))};for(var o in e.current)a(o);return n?Be(l):lt(t,Be(l))},st=function(e){return e instanceof RegExp},dt=function(e){return Pe(e)&&!st(e)?e:{value:e,message:""}},mt=function(e){return"function"==typeof e},vt=function(e){return ut(e)||l.isValidElement(e)};function ft(e,t,n){if(void 0===n&&(n="validate"),vt(e)||tt(e)&&!e)return{type:n,message:vt(e)?e:"",ref:t}}var pt=function(e,t,n,r,i){var l;return t?Object.assign(Object.assign({},n[e]),{types:Object.assign(Object.assign({},n[e]&&n[e].types?n[e].types:{}),(l={},l[r]=i||!0,l))}):{}},Et=function(e,t,n,r){var i=n.ref,l=n.ref.value,a=n.options,o=n.required,u=n.maxLength,c=n.minLength,s=n.min,d=n.max,m=n.pattern,v=n.validate;try{var f=!1,p=i.name,E={},g=We(i),h=Xe(i),y=g||h,C=""===l,O=pt.bind(null,p,t,E),S=function(e,t,n,r,l){void 0===r&&(r="maxLength"),void 0===l&&(l="minLength");var a=e?t:n;E[p]=Object.assign({type:e?r:l,message:a,ref:i},O(e?r:l,a))};if(o&&(!g&&!h&&(C||Re(l))||tt(l)&&!l||h&&!Je(a).isValid||g&&!Ge(a).isValid)){var b=vt(o)?{value:!!o,message:o}:dt(o),N=b.value,I=b.message;if(N&&(E[p]=Object.assign({type:Le,message:I,ref:y?((e.current[p].options||[])[0]||{}).ref:i},O(Le,I)),!t))return Promise.resolve(E)}if(!(Re(s)&&Re(d)||""===l)){var w,_,D=dt(d),T=dt(s);if(isNaN(l)){var L=i.valueAsDate||new Date(l);ut(D.value)&&(w=L>new Date(D.value)),ut(T.value)&&(_=L<new Date(T.value))}else{var R=i.valueAsNumber||parseFloat(l);Re(D.value)||(w=R>D.value),Re(T.value)||(_=R<T.value)}if((w||_)&&(S(!!w,D.message,T.message,"max","min"),!t))return Promise.resolve(E)}if(ut(l)&&!C&&(u||c)){var A=dt(u),P=dt(c),M=!Re(A.value)&&l.length>A.value,x=!Re(P.value)&&l.length<P.value;if((M||x)&&(S(M,A.message,P.message),!t))return Promise.resolve(E)}if(ut(l)&&m&&!C){var U=dt(m),k=U.value,B=U.message;if(st(k)&&!k.test(l)&&(E[p]=Object.assign({type:Te,message:B,ref:i},O(Te,B)),!t))return Promise.resolve(E)}var F=function(){if(v){var n=Qe(e,p,r,!1,!0),l=y&&a?a[0].ref:i;return mt(v)?Promise.resolve(v(n)).then((function(e){var n=ft(e,l);if(n&&(E[p]=Object.assign(Object.assign({},n),O("validate",n.message)),!t))return f=!0,E})):function(){if(Pe(v)){var e=function(){if(!et(i)&&(E[p]=Object.assign({ref:l},i),!t))return f=!0,E},r=!1,i={},a=ie(Object.entries(v),(function(e){var a=e[0],o=e[1];if(et(i)||t)return Promise.resolve(o(n)).then((function(e){var n=ft(e,l,a);n&&(i=Object.assign(Object.assign({},n),O(a,n.message)),t&&(E[p]=i))}));r=!0}),(function(){return r}));return a&&a.then?a.then(e):e()}}()}}();return Promise.resolve(F&&F.then?F.then((function(e){return f?e:E})):f?F:E)}catch(e){return Promise.reject(e)}},gt=function e(t,n,r){for(var i in void 0===r&&(r=[]),n){var l=t+(Pe(n)?"."+i:"["+i+"]");it(n[i])?r.push(l):e(l,n[i],r)}return r},ht=function(e,t,n,r,i){var l=void 0;return n.add(t),et(e)||(l=je(e,t),(Pe(l)||Array.isArray(l))&&gt(t,l).forEach((function(e){return n.add(e)}))),Fe(l)?i?r:je(r,t):l},yt=function(e){var t=e.isOnBlur,n=e.isOnChange,r=e.isOnTouch,i=e.isTouched,l=e.isReValidateOnBlur,a=e.isReValidateOnChange,o=e.isBlurEvent,u=e.isSubmitted;return!e.isOnAll&&(!u&&r?!(i||o):(u?l:t)?!o:!(u?a:n)||o)},Ct=function(e){return e.substring(0,e.indexOf("["))},Ot=function(e,t){return[].concat(e).some((function(e){return function(e,t){return RegExp(("^"+t+"([|.)\\d+").replace(/\[/g,"\\[").replace(/\]/g,"\\]")).test(e)}(t,e)}))},St=typeof window!==De&&typeof document!==De;function bt(e){var t,n;if(it(e)||St&&(e instanceof File||Oe(e)))return e;if(!["Set","Map","Object","Date","Array"].includes(null===(t=e.constructor)||void 0===t?void 0:t.name))return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Set){n=new Set;for(var r,i=h(e);!(r=i()).done;){var l=r.value;n.add(l)}return n}if(e instanceof Map){n=new Map;for(var a,o=h(e.keys());!(a=o()).done;){var u=a.value;n.set(u,bt(e.get(u)))}return n}for(var c in n=Array.isArray(e)?[]:{},e)n[c]=bt(e[c]);return n}var Nt=function(e){return{isOnSubmit:!e||e===we,isOnBlur:"onBlur"===e,isOnChange:e===Ie,isOnAll:"all"===e,isOnTouch:"onTouched"===e}},It=function(e){return We(e)||Xe(e)},wt=typeof window===De,_t=St?"Proxy"in window:typeof Proxy!==De;function Dt(e){var t=void 0===e?{}:e,n=t.mode,r=void 0===n?we:n,i=t.reValidateMode,a=void 0===i?Ie:i,o=t.resolver,u=t.context,c=t.defaultValues,s=void 0===c?{}:c,d=t.shouldFocusError,m=void 0===d||d,v=t.shouldUnregister,f=void 0===v||v,p=t.criteriaMode,E=l.useRef({}),g=l.useRef({}),y=l.useRef({}),C=l.useRef(new Set),O=l.useRef({}),S=l.useRef({}),b=l.useRef({}),N=l.useRef({}),I=l.useRef(s),w=l.useRef(!1),_=l.useRef(!1),D=l.useRef(),T=l.useRef({}),L=l.useRef({}),R=l.useRef(u),A=l.useRef(o),P=l.useRef(new Set),M=l.useRef(Nt(r)),x=M.current,U=x.isOnSubmit,k=x.isOnTouch,B="all"===p,F=l.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touched:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!U,errors:{}}),j=F[0],V=F[1],H=l.useRef({isDirty:!_t,dirtyFields:!_t,touched:!_t||k,isValidating:!_t,isSubmitting:!_t,isValid:!_t}),G=l.useRef(j),z=l.useRef(),W=l.useRef(Nt(a)).current,q=W.isOnBlur,X=W.isOnChange;R.current=u,A.current=o,G.current=j,T.current=f?{}:et(T.current)?bt(s):T.current;var Z=l.useCallback((function(e){void 0===e&&(e={}),w.current||(G.current=Object.assign(Object.assign({},G.current),e),V(G.current))}),[]),Y=function(){return H.current.isValidating&&Z({isValidating:!0})},K=l.useCallback((function(e,t,n,r,i){void 0===n&&(n=!1),void 0===r&&(r={});var l=n||function(e){var t=e.errors,n=e.name,r=e.error,i=e.validFields,l=e.fieldsWithValidation,a=Fe(r),o=je(t,n);return a&&!!o||!a&&!at(o,r,!0)||a&&je(l,n)&&!je(i,n)}({errors:G.current.errors,error:t,name:e,validFields:N.current,fieldsWithValidation:b.current}),a=je(G.current.errors,e);t?(nt(N.current,e),l=l||!a||!at(a,t,!0),ke(G.current.errors,e,t)):((je(b.current,e)||A.current)&&(ke(N.current,e,!0),l=l||a),nt(G.current.errors,e)),(l&&!Re(n)||!et(r)||H.current.isValidating)&&Z(Object.assign(Object.assign(Object.assign({},r),A.current?{isValid:!!i}:{}),{isValidating:!1}))}),[]),J=l.useCallback((function(e,t){var n=E.current[e],r=n.ref,i=n.options,l=St&&Oe(r)&&Re(t)?"":t;We(r)?(i||[]).forEach((function(e){var t=e.ref;return t.checked=t.value===l})):qe(r)&&!ut(l)?r.files=l:Ze(r)?[].concat(r.options).forEach((function(e){return e.selected=l.includes(e.value)})):Xe(r)&&i?i.length>1?i.forEach((function(e){var t=e.ref;return t.checked=Array.isArray(l)?!!l.find((function(e){return e===t.value})):l===t.value})):i[0].ref.checked=!!l:r.value=l}),[]),Q=l.useCallback((function(e,t){if(H.current.isDirty){var n=ce();return e&&t&&ke(n,e,t),!at(n,I.current)}return!1}),[]),$=l.useCallback((function(e,t){if(void 0===t&&(t=!0),H.current.isDirty||H.current.dirtyFields){var n=!at(je(I.current,e),Qe(E,e,T)),r=je(G.current.dirtyFields,e),i=G.current.isDirty;n?ke(G.current.dirtyFields,e,!0):nt(G.current.dirtyFields,e);var l={isDirty:Q(),dirtyFields:G.current.dirtyFields},a=H.current.isDirty&&i!==l.isDirty||H.current.dirtyFields&&r!==je(G.current.dirtyFields,e);return a&&t&&Z(l),a?l:{}}return{}}),[]),ee=l.useCallback((function(e,t){try{return Promise.resolve(Et(E,B,E.current[e],T)).then((function(n){var r=n[e];return K(e,r,t),Fe(r)}))}catch(e){return Promise.reject(e)}}),[K,B]),te=l.useCallback((function(e){try{return Promise.resolve(A.current(ce(),R.current,B)).then((function(t){var n=t.errors,r=G.current.isValid;if(Array.isArray(e)){var i=e.map((function(e){var t=je(n,e);return t?ke(G.current.errors,e,t):nt(G.current.errors,e),!t})).every(Boolean);return Z({isValid:et(n),isValidating:!1}),i}var l=je(n,e);return K(e,l,r!==et(n),{},et(n)),!l}))}catch(e){return Promise.reject(e)}}),[K,B]),ne=l.useCallback((function(e){try{var t=function(e){return n?e:Promise.resolve(ee(r))},n=!1,r=e||Object.keys(E.current);if(Y(),A.current)return Promise.resolve(te(r));var i=function(){if(Array.isArray(r))return!e&&(G.current.errors={}),Promise.resolve(Promise.all(r.map((function(e){try{return Promise.resolve(ee(e,null))}catch(e){return Promise.reject(e)}})))).then((function(e){Z({isValidating:!1});var t=e.every(Boolean);return n=!0,t}))}();return Promise.resolve(i&&i.then?i.then(t):t(i))}catch(e){return Promise.reject(e)}}),[te,ee]),re=l.useCallback((function(e,t,n){var r=n.shouldDirty,i=n.shouldValidate,l={};ke(l,e,t);for(var a,o=h(gt(e,t));!(a=o()).done;){var u=a.value;E.current[u]&&(J(u,je(l,u)),r&&$(u),i&&ne(u))}}),[ne,J,$]),le=l.useCallback((function(e,t,n){if(!f&&!it(t)&&ke(T.current,e,Array.isArray(t)?[].concat(t):Object.assign({},t)),E.current[e])J(e,t),n.shouldDirty&&$(e),n.shouldValidate&&ne(e);else if(!it(t)&&(re(e,t,n),P.current.has(e))){var r,i,l=Ct(e)||e;ke(g.current,e,t),L.current[l](((r={})[l]=je(g.current,l),r)),(H.current.isDirty||H.current.dirtyFields)&&n.shouldDirty&&(ke(G.current.dirtyFields,e,function(e,t,n){return lt(ot(e,t,n.slice(0,e.length)),ot(t,e,n.slice(0,e.length)))}(t,je(I.current,e,[]),je(G.current.dirtyFields,e,[]))),Z({isDirty:!at(Object.assign(Object.assign({},ce()),(i={},i[e]=t,i)),I.current)}))}!f&&ke(T.current,e,t)}),[$,J,re]),ae=function(e){return _.current||C.current.has(e)||C.current.has((e.match(/\w+/)||[])[0])},oe=function(e){var t=!0;if(!et(O.current))for(var n in O.current)e&&O.current[n].size&&!O.current[n].has(e)&&!O.current[n].has(Ct(e))||(S.current[n](),t=!1);return t};function ue(e){if(!f){for(var t,n=bt(e),r=h(P.current);!(t=r()).done;){var i,l=t.value;Me(l)&&!n[l]&&(n=Object.assign(Object.assign({},n),((i={})[l]=[],i)))}return n}return e}function ce(e){if(ut(e))return Qe(E,e,T);if(Array.isArray(e)){for(var t,n={},r=h(e);!(t=r()).done;){var i=t.value;ke(n,i,Qe(E,i,T))}return n}return ue(ct(E,bt(T.current),f))}D.current=D.current?D.current:function(e){var t=e.type,n=e.target;try{var r,i,l=n.name,a=E.current[l];return Promise.resolve(function(){if(a){var e=function(){!o&&oe(l),K(l,r,s,c,i)},o=t===Se,u=yt(Object.assign({isBlurEvent:o,isReValidateOnChange:X,isReValidateOnBlur:q,isTouched:!!je(G.current.touched,l),isSubmitted:G.current.isSubmitted},M.current)),c=$(l,!1),s=!et(c)||!o&&ae(l);if(o&&!je(G.current.touched,l)&&H.current.touched&&(ke(G.current.touched,l,!0),c=Object.assign(Object.assign({},c),{touched:G.current.touched})),!f&&Xe(n)&&ke(T.current,l,Qe(E,l)),u)return!o&&oe(l),(!et(c)||s&&et(c))&&Z(c);Y();var d=A.current?Promise.resolve(A.current(ce(),R.current,B)).then((function(e){var t=e.errors,a=G.current.isValid;if(r=je(t,l),Xe(n)&&!r&&A.current){var o=Ct(l),u=je(t,o,{});u.type&&u.message&&(r=u),o&&(u||je(G.current.errors,o))&&(l=o)}a!==(i=et(t))&&(s=!0)})):Promise.resolve(Et(E,B,a,T)).then((function(e){r=e[l]}));return d&&d.then?d.then(e):e()}}())}catch(e){return Promise.reject(e)}};var se=l.useCallback((function(e){void 0===e&&(e={});try{var t=et(E.current)?I.current:{};return Promise.resolve(A.current(Object.assign(Object.assign(Object.assign({},t),ce()),e),R.current,B)).then((function(e){var t=e.errors,n=et(t);G.current.isValid!==n&&Z({isValid:n})}))}catch(e){return Promise.reject(e)}}),[B]),de=l.useCallback((function(e,t){!function(e,t,n,r,i,l){var a=n.ref,o=n.ref.name,u=e.current[o];if(!i){var c=Qe(e,o,r);!Fe(c)&&ke(r.current,o,c)}a.type&&u?We(a)||Xe(a)?Array.isArray(u.options)&&u.options.length?(xe(u.options).forEach((function(e,n){void 0===e&&(e={}),($e(e.ref)&&rt(e,e.ref)||l)&&(Ve(e.ref,t),nt(u.options,"["+n+"]"))})),u.options&&!xe(u.options).length&&delete e.current[o]):delete e.current[o]:($e(a)&&rt(u,a)||l)&&(Ve(a,t),delete e.current[o]):delete e.current[o]}(E,D.current,e,T,f,t),f&&(nt(N.current,e.ref.name),nt(b.current,e.ref.name))}),[f]),me=l.useCallback((function(e){if(_.current)Z();else{for(var t,n=h(C.current);!(t=n()).done;)if(t.value.startsWith(e)){Z();break}oe(e)}}),[]),ve=l.useCallback((function(e,t){e&&(de(e,t),f&&!xe(e.options||[]).length&&(nt(G.current.errors,e.ref.name),ke(G.current.dirtyFields,e.ref.name,!0),Z({isDirty:Q()}),H.current.isValid&&A.current&&se(),me(e.ref.name)))}),[se,de]),fe=l.useCallback((function(e,t,n){var r=n?O.current[n]:C.current,i=ct(E,bt(T.current),f,!1,e);if(ut(e)){var l=Ct(e)||e;return P.current.has(l)&&(i=Object.assign(Object.assign({},y.current),i)),ht(i,e,r,Fe(je(I.current,e))?t:je(I.current,e),!0)}var a=Fe(t)?I.current:t;return Array.isArray(e)?e.reduce((function(e,t){var n;return Object.assign(Object.assign({},e),((n={})[t]=ht(i,t,r,a),n))}),{}):(_.current=Fe(n),Be(!et(i)&&i||a))}),[]);function pe(e,t){void 0===t&&(t={});var n,r=e.name,i=e.type,l=e.value,a=Object.assign({ref:e},t),o=E.current,u=It(e),c=Ot(P.current,r),s=function(t){return St&&(!Oe(e)||t===e)},d=o[r],m=!0;if(d&&(u?Array.isArray(d.options)&&xe(d.options).find((function(e){return l===e.ref.value&&s(e.ref)})):s(d.ref)))o[r]=Object.assign(Object.assign({},d),t);else{d=i?u?Object.assign({options:[].concat(xe(d&&d.options||[]),[{ref:e}]),ref:{type:i,name:r}},t):Object.assign({},a):a,o[r]=d;var v=Fe(je(T.current,r));et(I.current)&&v||(n=je(v?I.current:T.current,r),(m=Fe(n))||c||J(r,n)),et(t)||(ke(b.current,r,!0),!U&&H.current.isValid&&Et(E,B,d,T).then((function(e){var t=G.current.isValid;et(e)?ke(N.current,r,!0):nt(N.current,r),t!==et(e)&&Z()}))),!f||c&&m||!c&&nt(G.current.dirtyFields,r),i&&function(e,t,n){var r=e.ref;Oe(r)&&n&&(r.addEventListener(t?be:Ne,n),r.addEventListener(Se,n))}(u&&d.options?d.options[d.options.length-1]:d,u||e.type===_e+"-one",D.current)}}var Ee=l.useCallback((function(e,t){return function(n){try{n&&n.preventDefault&&(n.preventDefault(),n.persist());var r={},i=ue(ct(E,bt(T.current),f,!0));return H.current.isSubmitting&&Z({isSubmitting:!0}),Promise.resolve(function(l,a){try{var o=function(){function l(){var l=function(){if(et(r)&&Object.keys(G.current.errors).every((function(e){return e in E.current})))return Z({errors:{},isSubmitting:!0}),Promise.resolve(e(i,n)).then((function(){}));var l=function(e){m&&function(e,t){for(var n in e)if(je(t,n)){var r=e[n];if(r){if(r.ref.focus&&Fe(r.ref.focus()))break;if(r.options){r.options[0].ref.focus();break}}}}(E.current,G.current.errors)};return G.current.errors=Object.assign(Object.assign({},G.current.errors),r),t?Promise.resolve(t(G.current.errors,n)).then(l):l()}();if(l&&l.then)return l.then((function(){}))}var a=A.current?Promise.resolve(A.current(i,R.current,B)).then((function(e){var t=e.errors,n=e.values;G.current.errors=r=t,i=n})):ie(Object.values(E.current),(function(e){var t=function(){if(e){var t=e.ref.name;return Promise.resolve(Et(E,B,e,T)).then((function(e){e[t]?(ke(r,t,e[t]),nt(N.current,t)):je(b.current,t)&&(nt(G.current.errors,t),ke(N.current,t,!0))}))}}();if(t&&t.then)return t.then((function(){}))}));return a&&a.then?a.then(l):l()}()}catch(e){return a(!0,e)}return o&&o.then?o.then(a.bind(null,!1),a.bind(null,!0)):a(!1,o)}(0,(function(e,t){if(G.current.isSubmitting=!1,Z({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:et(G.current.errors),submitCount:G.current.submitCount+1}),e)throw t;return t})))}catch(n){return Promise.reject(n)}}}),[m,B]);l.useEffect((function(){o&&H.current.isValid&&se(),z.current=z.current||!St?z.current:function(e,t){var n=new MutationObserver((function(){for(var n=0,r=Object.values(e.current);n<r.length;n++){var i=r[n];if(i&&i.options)for(var l,a=h(i.options);!(l=a()).done;){var o=l.value;o&&o.ref&&$e(o.ref)&&t(i)}else i&&$e(i.ref)&&t(i)}}));return n.observe(window.document,{childList:!0,subtree:!0}),n}(E,ve)}),[ve,I.current]),l.useEffect((function(){return function(){z.current&&z.current.disconnect(),w.current=!0,Object.values(E.current).forEach((function(e){return ve(e,!0)}))}}),[]),!o&&H.current.isValid&&(j.isValid=at(N.current,b.current)&&et(G.current.errors));var ge={trigger:ne,setValue:l.useCallback((function(e,t,n){le(e,t,n||{}),ae(e)&&Z(),oe(e)}),[le,ne]),getValues:l.useCallback(ce,[]),register:l.useCallback((function(e,t){if(!wt)if(ut(e))pe({name:e},t);else{if(!Pe(e)||!("name"in e))return function(t){return t&&pe(t,e)};pe(e,t)}}),[I.current]),unregister:l.useCallback((function(e){for(var t,n=h(Array.isArray(e)?e:[e]);!(t=n()).done;){var r=t.value;ve(E.current[r],!0)}}),[]),formState:_t?new Proxy(j,{get:function(e,t){if(t in e)return H.current[t]=!0,e[t]}}):j},he=l.useMemo((function(){return Object.assign({isFormDirty:Q,updateWatchedValue:me,shouldUnregister:f,updateFormState:Z,removeFieldEventListener:de,watchInternal:fe,mode:M.current,reValidateMode:{isReValidateOnBlur:q,isReValidateOnChange:X},validateResolver:o?se:void 0,fieldsRef:E,resetFieldArrayFunctionRef:L,useWatchFieldsRef:O,useWatchRenderFunctionsRef:S,fieldArrayDefaultValuesRef:g,validFieldsRef:N,fieldsWithValidationRef:b,fieldArrayNamesRef:P,readFormStateRef:H,formStateRef:G,defaultValuesRef:I,shallowFieldsStateRef:T,fieldArrayValuesRef:y},ge)}),[I.current,me,f,de,fe]);return Object.assign({watch:function(e,t){return fe(e,t)},control:he,handleSubmit:Ee,reset:l.useCallback((function(e,t){if(void 0===t&&(t={}),St)for(var n=0,r=Object.values(E.current);n<r.length;n++){var i=r[n];if(i){var l=i.ref,a=i.options,o=It(l)&&Array.isArray(a)?a[0].ref:l;if(Oe(o))try{o.closest("form").reset();break}catch(e){}}}var u,c,s,d,m,v,p,h;E.current={},I.current=Object.assign({},e||I.current),e&&oe(""),Object.values(L.current).forEach((function(e){return mt(e)&&e()})),T.current=f?{}:bt(e||I.current),c=(u=t).errors,s=u.isDirty,d=u.isSubmitted,m=u.touched,v=u.isValid,p=u.submitCount,h=u.dirtyFields,v||(N.current={},b.current={}),g.current={},C.current=new Set,_.current=!1,Z({submitCount:p?G.current.submitCount:0,isDirty:!!s&&G.current.isDirty,isSubmitted:!!d&&G.current.isSubmitted,isValid:!!v&&G.current.isValid,dirtyFields:h?G.current.dirtyFields:{},touched:m?G.current.touched:{},errors:c?G.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})}),[]),clearErrors:l.useCallback((function(e){e&&(Array.isArray(e)?e:[e]).forEach((function(e){return E.current[e]&&Me(e)?delete G.current.errors[e]:nt(G.current.errors,e)})),Z({errors:e?G.current.errors:{}})}),[]),setError:l.useCallback((function(e,t){var n=(E.current[e]||{}).ref;ke(G.current.errors,e,Object.assign(Object.assign({},t),{ref:n})),Z({isValid:!1}),t.shouldFocus&&n&&n.focus&&n.focus()}),[]),errors:j.errors},ge)}var Tt=l.createContext(null);Tt.displayName="RHFContext";var Lt,Rt,At,Pt,Mt,xt=function(e){var t=e.as,n=e.render,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["rules","as","render","defaultValue","control","onFocus"]),i=function(e){var t=e.name,n=e.rules,r=e.defaultValue,i=e.control,a=e.onFocus,o=l.useContext(Tt),u=i||o.control,c=u.defaultValuesRef,s=u.setValue,d=u.register,m=u.unregister,v=u.trigger,f=u.mode,p=u.reValidateMode,E=p.isReValidateOnBlur,g=p.isReValidateOnChange,h=u.formState,y=u.formStateRef.current,C=y.isSubmitted,O=y.touched,S=y.errors,b=u.updateFormState,N=u.readFormStateRef,I=u.fieldsRef,w=u.fieldArrayNamesRef,_=u.shallowFieldsStateRef,D=!Ot(w.current,t),T=function(){return!Fe(je(_.current,t))&&D?je(_.current,t):Fe(r)?je(c.current,t):r},L=l.useState(T()),R=L[0],A=L[1],P=l.useRef(R),M=l.useRef({focus:function(){return null}}),x=l.useRef(a||function(){mt(M.current.focus)&&M.current.focus()}),U=l.useCallback((function(e){return!yt(Object.assign({isBlurEvent:e,isReValidateOnBlur:E,isReValidateOnChange:g,isSubmitted:C,isTouched:!!je(O,t)},f))}),[E,g,C,O,t,f]),k=l.useCallback((function(e){var t,n=(t=e[0],it(t)||!Pe(t.target)||Pe(t.target)&&!t.type?t:Fe(t.target.value)?t.target.checked:t.target.value);return A(n),P.current=n,n}),[]),B=l.useCallback((function(e){I.current[t]?I.current[t]=Object.assign({ref:I.current[t].ref},n):(d(Object.defineProperties({name:t,focus:x.current},{value:{set:function(e){A(e),P.current=e},get:function(){return P.current}}}),n),e=Fe(je(c.current,t))),e&&D&&A(T())}),[n,t,d]);l.useEffect((function(){return function(){return m(t)}}),[t]),l.useEffect((function(){B()}),[B]),l.useEffect((function(){!I.current[t]&&B(!0)}));var F=l.useCallback((function(){N.current.touched&&!je(O,t)&&(ke(O,t,!0),b({touched:O})),U(!0)&&v(t)}),[t,b,U,v,N]),j=l.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s(t,k(n),{shouldValidate:U(),shouldDirty:!0})}),[s,t,U]);return{field:{onChange:j,onBlur:F,name:t,value:R,ref:M},meta:Object.defineProperties({invalid:!!je(S,t)},{isDirty:{get:function(){return!!je(h.dirtyFields,t)}},isTouched:{get:function(){return!!je(h.touched,t)}}})}}(e),a=i.field,o=i.meta,u=Object.assign(Object.assign({},r),a);return t?l.isValidElement(t)?l.cloneElement(t,u):l.createElement(t,u):n?n(a,o):null},Ut=function(e){var t=e.control,n=e.t,r=window.Digit.Utils.browser.isMobile();return a.createElement(Fragment,null,a.createElement(i.SearchField,{className:"pt-form-field"},a.createElement("label",null,n("AUDIT_FROM_DATE_LABEL")),a.createElement(xt,{render:function(e){return a.createElement(i.DatePicker,{date:e.value,onChange:e.onChange})},name:"fromDate",control:t})),a.createElement(i.SearchField,{className:"pt-form-field"},a.createElement("label",null,n("AUDIT_TO_DATE_LABEL")),a.createElement(xt,{render:function(e){return a.createElement(i.DatePicker,{date:e.value,onChange:e.onChange})},name:"toDate",control:t})),a.createElement(i.SearchField,{className:"pt-search-action-submit"},a.createElement(i.SubmitBar,{style:{marginTop:r?"510px":"25px",marginLeft:r?"0":"-30px",maxWidth:r?"100%":"240px"},label:n("ES_COMMON_APPLY"),submit:!0})))},kt=["currentlyActiveMobileModal","searchFormFieldsComponentProps","tenantId"],Bt=["currentlyActiveMobileModal","searchFormFieldsComponentProps","tenantId"],Ft=function(e){var t,n=e.Controller,r=e.register,o=e.control,u=e.t,c=e.reset,s=e.previousPage,d=e.handleSubmit,m=e.tenantId,v=e.data,p=e.onSubmit,g=e.isLoading,h=l.useState([]),y=h[0],C=h[1],O=function(e){return a.createElement("div",{onClick:e.onClick},a.createElement(i.DownloadBtnCommon,null))};l.useEffect((function(){(null==v?void 0:v.length)>0&&C([null==v?void 0:v.map((function(e){var t={};return t[u("AUDIT_DATE_LABEL")]=S(null==e?void 0:e.timestamp),t[u("AUDIT_TIME_LABEL")]=b(null==e?void 0:e.timestamp),t[u("AUDIT_DATAVIEWED_LABEL")]=(null==e?void 0:e.dataView[0])+","+(null==e?void 0:e.dataView[1]),t[u("AUDIT_DATAVIEWED_BY_LABEL")]=null==e?void 0:e.dataViewedBy,t[u("AUDIT_ROLE_LABEL")]=null==e?void 0:e.roles.map((function(e){return e.name})).join(","),f({},t)}))])}),[v]);var S=function(e){if(null==e||null==e||""==e)return"NA";var t=new Date(e),n=t.getMonth()+1,r=t.getDate();return(r=(r>9?"":"0")+r)+"/"+(n=(n>9?"":"0")+n)+"/"+t.getFullYear()},b=function(e){if(null==e||null==e||""==e)return"NA";var t=new Date(e),n=t.getHours(),r=t.getMinutes(),i=n>12?"PM":"AM";return(n=((n=n>12?n-12:n)>9?"":"0")+n)+":"+(r=(r>9?"":"0")+r)+" "+i},N=l.useReducer((function(e,t){switch(t.type){case"set":return t.payload;case"remove":return!1}}),!1),I=N[0],w=N[1],_=function(){w({type:"remove"})},D=function(){return a.createElement("div",{className:"InboxMobilePopupCloseButtonWrapper",onClick:_},a.createElement(i.CloseSvg,null))},T={Controller:n,register:r,control:o,t:u,reset:c,previousPage:s},L=l.useCallback((function(e){return function(e){var t=e.currentlyActiveMobileModal,n=e.searchFormFieldsComponentProps,r=e.tenantId,l=E(e,kt),o=l.closeMobilePopupModal;return"SearchFormComponent"===t?a.createElement(i.SearchForm,l,a.createElement(D,null),a.createElement("div",{className:"MobilePopupHeadingWrapper"},a.createElement("h2",null,u("PRIVACY_AUDIT_REPORT"),":")),a.createElement(Ut,f({},n,{closeMobilePopupModal:o,tenantId:r,t:u}))):a.createElement("span",null)}(f({currentlyActiveMobileModal:e.currentlyActiveMobileModal,searchFormFieldsComponentProps:e.searchFormFieldsComponentProps,tenantId:e.tenantId},E(e,Bt)))}),[I]);null==v||null===(t=v.roles)||void 0===t||t.forEach((function(e){}));var R=l.useMemo((function(){return null!=v&&v.display||""===v?[]:null==v?void 0:v.map((function(e){var t,n;return(n={})[u("AUDIT_DATE_LABEL")]=S(e.timestamp),n[u("AUDIT_TIME_LABEL")]=b(e.timestamp),n[u("AUDIT_DATAVIEWED_LABEL")]=e.dataView[0]+","+e.dataView[1],n[u("AUDIT_DATAVIEWED_BY_LABEL")]=e.dataViewedBy,n[u("AUDIT_ROLE_LABEL")]=null===(t=e.roles.slice(0,3))||void 0===t?void 0:t.map((function(e){return e.name})).join(","),n}))}),[v]);return a.createElement(a.Fragment,null,a.createElement(i.BackButton,null),a.createElement("div",{className:"sideContent",style:{marginLeft:"70%",marginTop:"-12%"}},a.createElement(O,{className:"mrlg cursorPointer",onClick:function(){return function(e){if(void 0!==(null==e?void 0:e[0]))return Digit.Download.Excel(null==e?void 0:e[0],"AuditReport")}(y)}})),a.createElement(i.Header,null,u("PRIVACY_AUDIT_REPORT"),":"),a.createElement("div",{className:"searchBox"},a.createElement(i.SearchAction,{text:u("ES_COMMON_SEARCH"),handleActionClick:function(){return w({type:"set",payload:"SearchFormComponent"})},tenantId:m,t:u})),I?a.createElement(i.PopUp,null,a.createElement(L,{onSubmit:function(e){w({type:"remove"}),p(e)},handleSubmit:d,id:"search-form",className:"rm-mb form-field-flex-one inboxPopupMobileWrapper",searchFormFieldsComponentProps:T,currentlyActiveMobileModal:I,closeMobilePopupModal:_,tenantId:m})):null,g&&a.createElement(i.Loader,null),a.createElement(i.DetailsCard,{data:R}))},jt=function(e){var t=e.tenantId,n=e.t,r=e.onSubmit,o=e.data,u=e.count,c=Dt({defaultValues:Digit.SessionStorage.get("AUDIT_APPLICATION_DETAIL")||{offset:0,limit:5,sortOrder:"DESC"}}),s=c.register,d=c.control,m=c.handleSubmit,v=c.setValue,p=c.getValues,E=c.reset,g=function(e){if(null==e||null==e||""==e)return"NA";var t=new Date(e),n=t.getMonth()+1,r=t.getDate();return(r=(r>9?"":"0")+r)+"/"+(n=(n>9?"":"0")+n)+"/"+t.getFullYear()},h=function(e){if(null==e||null==e||""==e)return"NA";var t=new Date(e),n=t.getHours(),r=t.getMinutes(),i=n>12?"PM":"AM";return(n=((n=n>12?n-12:n)>9?"":"0")+n)+":"+(r=(r>9?"":"0")+r)+" "+i},y=l.useState([]),C=y[0],O=y[1],S=function(e){return a.createElement("div",{onClick:e.onClick},a.createElement(i.DownloadBtnCommon,null))};l.useEffect((function(){s("offset",0),s("limit",5),s("sortOrder","DESC")}),[s]),l.useEffect((function(){(null==o?void 0:o.length)>0&&O([null==o?void 0:o.map((function(e){var t={};return t[n("AUDIT_DATE_LABEL")]=g(null==e?void 0:e.timestamp),t[n("AUDIT_TIME_LABEL")]=h(null==e?void 0:e.timestamp),t[n("AUDIT_DATAVIEWED_LABEL")]=(null==e?void 0:e.dataView[0])+","+(null==e?void 0:e.dataView[1]),t[n("AUDIT_DATAVIEWED_BY_LABEL")]=null==e?void 0:e.dataViewedBy,t[n("AUDIT_ROLE_LABEL")]=null==e?void 0:e.roles.map((function(e){return e.name})).join(","),f({},t)}))])}),[o]);var b=l.useCallback((function(e){0!==e.length&&(v("sortBy",e.id),v("sortOrder",e.desc?"DESC":"ASC"))}),[]);function N(){v("offset",p("offset")-p("limit")),m(r)()}var I=window.Digit.Utils.browser.isMobile();if(I)return a.createElement(Ft,{Controller:xt,register:s,control:d,t:n,reset:E,previousPage:N,handleSubmit:m,tenantId:t,data:o,onSubmit:r});var w=function(e){return a.createElement("span",{className:"cell-text"},e)},_=l.useMemo((function(){return[{Header:n("AUDIT_DATE_LABEL"),disableSortBy:!0,accessor:function(e){var t="NA"===e.timestamp?n("WS_NA"):g(e.timestamp);return w(""+t)}},{Header:n("AUDIT_TIME_LABEL"),disableSortBy:!0,accessor:function(e){var t="NA"===e.timestamp?n("WS_NA"):h(e.timestamp);return w(""+t)}},{Header:n(I?"AUDIT_DATAVIEWED_LABEL":"AUDIT_DATAVIEWED_PRIVACY"),disableSortBy:!0,accessor:function(e){return w(""+(null==e?void 0:e.dataView))}},{Header:n(I?"AUDIT_DATAVIEWED_BY_LABEL":"AUDIT_DATAVIEWED_BY_PRIVACY"),disableSortBy:!0,accessor:function(e){return w(""+(null==e?void 0:e.dataViewedBy))}},{Header:n("AUDIT_ROLE_LABEL"),disableSortBy:!0,accessor:function(e){var t;return w(""+(null==e||null===(t=e.roles.slice(0,3))||void 0===t?void 0:t.map((function(e){return e.name}))))}}]}),[]);return a.createElement(a.Fragment,null,a.createElement("div",{style:{marginRight:"-70px"}}," ",a.createElement(i.BackButton,null)," "),a.createElement("div",{style:{marginTop:"30px",marginLeft:"30px"}}," ",a.createElement(i.Header,null,n("PRIVACY_AUDIT_REPORT"))," "),a.createElement(i.SearchForm,{className:"audit-card",onSubmit:r,handleSubmit:m},a.createElement(Ut,{register:s,control:d,reset:E,tenantId:t,t:n,previousPage:N})),a.createElement("div",{style:{marginTop:"240px",marginLeft:"-55%",maxWidth:"80%",marginRight:"52px"}},null!=o&&o.display?a.createElement("div",{style:{marginTop:"20x",width:"1025px",marginLeft:"25px",backgroundColor:"white",height:"60px"}},n(o.display).split("\\n").map((function(e,t){return a.createElement("p",{key:t,style:{textAlign:"center"}},e)}))):""!==o?a.createElement("div",{style:{backgroundColor:"white",marginRight:"-30px",marginLeft:"30px"}},a.createElement("div",{className:"sideContent",style:{float:"right",padding:"10px 30px"}},a.createElement(S,{className:"mrlg cursorPointer",onClick:function(){return function(e){if(void 0!==(null==e?void 0:e[0]))return Digit.Download.Excel(null==e?void 0:e[0],"AuditReport")}(C)}})),a.createElement(i.Table,{t:n,data:o,totalRecords:u,columns:_,getCellProps:function(e){return{style:{minWidth:e.column.Header===n("ES_INBOX_APPLICATION_NO")?"240px":"",padding:"20px 18px",fontSize:"16px"}}},onPageSizeChange:function(e){v("limit",Number(e.target.value)),m(r)()},currentPage:p("offset")/p("limit"),onNextPage:function(){v("offset",p("offset")+p("limit")),m(r)()},onPrevPage:N,manualPagination:!1,pageSizeLimit:p("limit"),onSort:b,disableSort:!1,sortParams:[{id:p("sortBy"),desc:"DESC"===p("sortOrder")}]})):a.createElement(i.Loader,null)))},Vt=function(e){var t,n,r=o.useTranslation().t,i=Digit.ULBService.getCitizenCurrentTenant(),u=l.useState({}),c=u[0],s=u[1],d=function(e,t){void 0===t&&(t="dayend");try{var n=e.match(/(\d{4})-(\d{1,2})-(\d{1,2})/),r=new Date(Date.UTC(n[1],n[2]-1,n[3]));return r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),"dayend"===t&&(r.setHours(r.getHours()+24),r.setSeconds(r.getSeconds()-1)),r.getTime()}catch(t){return e}};l.useEffect((function(){var e=Digit.SessionStorage.get("AUDIT_APPLICATION_DETAIL")||{};if(e){var t=f({},e);s(Object.keys(t).filter((function(e){return t[e]})).reduce((function(e,n){var r;return f({},e,((r={})[n]="object"==typeof t[n]?t[n].code:t[n],r))}),{}))}}),[]);var m={enabled:!!(c&&Object.keys(c).length>0)},v=f({},c),p=Digit.Hooks.useAudit({tenantId:i,filters:f({},v),config:m}),E=p.isLoading,g=p.data;return a.createElement(jt,{t:r,tenantId:i,onSubmit:function(e){Digit.SessionStorage.set("AUDIT_APPLICATION_DETAIL",{offset:0,limit:5,sortBy:"commencementDate",sortOrder:"DESC"});var t=f({},e,{fromDate:d(null==e?void 0:e.fromDate),toDate:d(null==e?void 0:e.toDate)});s(Object.keys(t).filter((function(e){return t[e]})).reduce((function(e,n){var r;return f({},e,((r={})[n]=(t[n],t[n]),r))}),{}))},data:E?"":(null==g||null===(t=g.ElasticSearchData)||void 0===t?void 0:t.length)>0?null==g?void 0:g.ElasticSearchData:{display:"ES_COMMON_NO_DATA"},count:null==g||null===(n=g.ElasticSearchData)||void 0===n?void 0:n.length})},Ht=function(e){var t,n,r,l,u,c,s,d,m,v,f,p,E,g,h,y,C=e.moduleCode,O=o.useTranslation().t,S=Digit.ULBService.getCitizenCurrentTenant(),b=Digit.Hooks.useStaticData(Digit.ULBService.getStateId()),N=b.isLoading,I=b.data,w=Digit.Hooks.useDynamicData({moduleCode:C,tenantId:S,filters:{},t:O}),_=w.isLoading,D=w.error,T=w.data,L=function(e){var t=e.module,n=e.styles;switch(t){case"TL":default:return a.createElement(i.CaseIcon,{className:"fill-path-primary-main",styles:n});case"PT":return a.createElement(i.PTIcon,{className:"fill-path-primary-main",styles:n});case"MCOLLECT":return a.createElement(i.MCollectIcon,{className:"fill-path-primary-main",styles:n});case"PGR":return a.createElement(i.ComplaintIcon,{className:"fill-path-primary-main",styles:n})}},R=null==I||null===(t=I.MdmsRes["common-masters"])||void 0===t||null===(n=t.StaticData[0])||void 0===n?void 0:n[""+C],A=function(e){switch(e.module){case"PT":case"WS":return a.createElement("span",{className:"timerIcon"},a.createElement(i.TimerIcon,null));default:return null}},P=function(e){switch(e.module){case"PT":return a.createElement("span",{className:"rupeeSymbol"},a.createElement(i.RupeeSymbol,null));case"WS":return a.createElement("span",{className:"timerIcon"},a.createElement(i.TimerIcon,null));default:return null}},M=function(e){switch(e){case"TL":case"PT":case"MCOLLECT":return{staticCommonContent:O("COMMON_VALIDITY"),validity:(null==R?void 0:R.validity)+("1"===(null==R?void 0:R.validity)?O("COMMON_DAY"):O("COMMON_DAYS"))};case"PGR":return{staticCommonContent:O("ACTION_TEST_COMPLAINT_TYPES")};case"OBPS":return{staticCommonContent:O("BUILDING_PLAN_PERMIT_VALIDITY"),validity:(null==R?void 0:R.validity)+" "+("1"===(null==R?void 0:R.validity)?O("COMMON_DAY"):O("COMMON_DAYS"))};default:return{staticCommonContent:""}}},x=function(e){switch(e){case"PT":return{staticDataOne:(null==R?void 0:R.staticDataOne)+" "+O("COMMON_DAYS"),staticDataOneHeader:O("APPLICATION_PROCESSING_TIME"),staticDataTwo:null==R?void 0:R.staticDataTwo,staticDataTwoHeader:O("APPLICATION_PROCESSING_FEE")};case"WS":return{staticDataOne:"",staticDataOneHeader:O("PAY_WATER_CHARGES_BY")+" "+(null==R?void 0:R.staticDataOne)+" "+O("COMMON_DAYS")+" "+O("OF_BILL_GEN_TO_AVOID_LATE_FEE"),staticDataTwo:(null==R?void 0:R.staticDataTwo)+" "+O("COMMON_DAYS"),staticDataTwoHeader:O("APPLICATION_PROCESSING_TIME")};default:return{}}};return N||_?a.createElement(i.Loader,null):R?a.createElement(a.Fragment,null,R&&null!=R&&R.payViaWhatsApp?a.createElement(i.Card,{style:{margin:"16px",padding:"16px",maxWidth:"unset"}},a.createElement("div",{className:"pay-whatsapp-card",onClick:function(){return e=null==R?void 0:R.payViaWhatsApp,void window.open(e);var e}},a.createElement("div",{className:"pay-whatsapp-text"},O("PAY_VIA_WHATSAPP")),a.createElement("div",{className:"whatsAppIconG"},a.createElement(i.WhatsappIconGreen,null)))):null,R&&null!=R&&R.helpline?a.createElement(i.Card,{style:{margin:"16px",padding:"16px",maxWidth:"unset"}},a.createElement("div",{className:"static-home-Card"},a.createElement("div",{className:"static-home-Card-header"},O("CALL_CENTER_HELPLINE")),a.createElement("div",{className:"helplineIcon"},a.createElement(i.HelpLineIcon,null))),a.createElement("div",{className:"call-center-card-text"},null!=R&&null!==(r=R.helpline)&&void 0!==r&&r.contactOne?a.createElement("div",{className:"call-center-card-content"},a.createElement("a",{href:"tel:"+(null==R||null===(l=R.helpline)||void 0===l?void 0:l.contactOne)},null==R||null===(u=R.helpline)||void 0===u?void 0:u.contactOne)):null,null!=R&&null!==(c=R.helpline)&&void 0!==c&&c.contactTwo?a.createElement("div",{className:"call-center-card-content"},a.createElement("a",{href:"tel:"+(null==R||null===(s=R.helpline)||void 0===s?void 0:s.contactTwo)},null==R||null===(d=R.helpline)||void 0===d?void 0:d.contactTwo)):null)):null,R&&null!=R&&R.serviceCenter?a.createElement(i.Card,{style:{margin:"16px",padding:"16px",maxWidth:"unset"}},a.createElement("div",{className:"static-home-Card"},a.createElement("div",{className:"static-home-Card-header"},O("CITIZEN_SERVICE_CENTER")),a.createElement("div",{className:"serviceCentrIcon"},a.createElement(i.ServiceCenterIcon,null))),a.createElement("div",{className:"service-center-details-card"},a.createElement("div",{className:"service-center-details-text"},null==R?void 0:R.serviceCenter)),null!=R&&R.viewMapLocation?a.createElement("div",{className:"link"},a.createElement("a",{href:null==R?void 0:R.viewMapLocation},O("VIEW_ON_MAP"))):null):a.createElement("div",null),a.createElement(i.Card,{style:{margin:"16px",padding:"16px",maxWidth:"unset"}},D||null==T||null===(null==T?void 0:T.dynamicDataOne)?a.createElement("div",null):a.createElement("div",{className:"dynamicDataCard"},a.createElement("div",{className:"dynamicData"},a.createElement(L,{module:C,styles:{width:"24px",height:"24px"}}),a.createElement("span",{className:"dynamicData-content"},null==T?void 0:T.dynamicDataOne))),D||null==T||null===(null==T?void 0:T.dynamicDataTwo)?a.createElement("div",null):a.createElement("div",{className:"dynamicDataCard"},a.createElement("div",{className:"dynamicData"},a.createElement(L,{module:C,styles:{width:"24px",height:"24px"}}),a.createElement("span",{className:"dynamicData-content"},null==T?void 0:T.dynamicDataTwo))),R&&null!=R&&R.staticDataOne?a.createElement("div",{className:"staticDataCard"},a.createElement("div",{className:"staticData"},a.createElement(A,{module:C}),a.createElement("span",{className:"static-data-content"},a.createElement("span",{className:"static-data-content-first",style:{marginTop:""===(null===(m=x(C))||void 0===m?void 0:m.staticDataOne)?"8px":"unset"}},null===(v=x(C))||void 0===v?void 0:v.staticDataOneHeader),a.createElement("span",{className:"static-data-content-second"},""+(null===(f=x(C))||void 0===f?void 0:f.staticDataOne))))):a.createElement("div",null),R&&null!=R&&R.staticDataTwo?a.createElement("div",{className:"staticDataCard"},a.createElement("div",{className:"staticData"},a.createElement(P,{module:C}),a.createElement("span",{className:"static-data-content"},a.createElement("span",{className:"static-data-content-first"},null===(p=x(C))||void 0===p?void 0:p.staticDataTwoHeader),a.createElement("span",{className:"static-data-content-second"},null===(E=x(C))||void 0===E?void 0:E.staticDataTwo)))):a.createElement("div",null),R&&null!=R&&R.validity?a.createElement("div",{className:"staticDataCard"},a.createElement("div",{className:"staticData"},a.createElement("span",{className:"validityIcon"},a.createElement(i.ValidityTimeIcon,null)),a.createElement("span",{className:"static-data-content"},a.createElement("span",{className:"static-data-content-first"},null===(g=M(C))||void 0===g?void 0:g.staticCommonContent),a.createElement("span",{className:"static-data-content-second"},null===(h=M(C))||void 0===h?void 0:h.validity)))):a.createElement("div",null),D||null==T||null==T||!T.staticData||null===(null==T?void 0:T.staticData)?a.createElement("div",null):a.createElement("div",{className:"staticDataCard"},a.createElement("div",{className:"staticData"},"PGR"===C?a.createElement(L,{module:C,styles:{width:"24px",height:"24px",marginLeft:"13px",marginTop:"12px"}}):a.createElement("span",{className:"validityIcon"},a.createElement(i.ValidityTimeIcon,null)),a.createElement("span",{className:"static-data-content"},a.createElement("span",{className:"static-data-content-first"},null===(y=M(C))||void 0===y?void 0:y.staticCommonContent),a.createElement("span",{className:"static-data-content-second"},null==T?void 0:T.staticData)))))):a.createElement(a.Fragment,null)},Gt=[(null===(Lt=window)||void 0===Lt?void 0:Lt.contextPath)+"/citizen/register/name","/"+(null===(Rt=window)||void 0===Rt?void 0:Rt.contextPath)+"/citizen/select-language","/"+(null===(At=window)||void 0===At?void 0:At.contextPath)+"/citizen/select-location","/"+(null===(Pt=window)||void 0===Pt?void 0:Pt.contextPath)+"/citizen/login","/"+(null===(Mt=window)||void 0===Mt?void 0:Mt.contextPath)+"/citizen/register/otp"],zt=function(e,t){return t.filter((function(t){return e.map((function(e){return e.code})).includes(t.code)}))},Wt=function(e){var t,n,r,l=e.stateInfo,u=e.userDetails,c=e.CITIZEN,d=e.cityDetails,m=e.mobileView,v=e.handleUserDropdownSelection,f=e.logoUrl,p=e.stateCode,E=e.modules,g=e.appTenants,h=e.pathname,y=e.initData,O=Digit.Hooks.useCustomMDMS(Digit.ULBService.getStateId(),"ACCESSCONTROL-ACTIONS-TEST",[{name:"actions-test",filter:"[?(@.url == '"+window.contextPath+"-card')]"}],{select:function(e){var t,n,r=null==e||null===(t=e["ACCESSCONTROL-ACTIONS-TEST"])||void 0===t||null===(n=t["actions-test"])||void 0===n?void 0:n.filter((function(e){return!0===e.enabled})).reduce((function(e,t){var n;return e[t.parentModule]=(null===(n=e[t.parentModule])||void 0===n?void 0:n.length)>0?[t].concat(e[t.parentModule]):[t],e}),{});return r}}),N=O.isLoading,I=O.data,_=O.isFetched,D=Digit.Hooks.useRouteSubscription(h),T=o.useTranslation().t,L=s.useRouteMatch().path,R=s.useHistory(),A=Gt.some((function(e){return window.location.href.includes(e)})),P=E.map((function(e,t){var n=e.code,r=e.tenants,i=Digit.ComponentRegistryService.getComponent(n+"Module");return i?a.createElement(s.Route,{key:t,path:L+"/"+n.toLowerCase()},a.createElement(i,{stateCode:p,moduleCode:n,userType:"citizen",tenants:zt(r,g)})):null})),M=E.map((function(e,t){var n=e.code,r=e.bannerImage,o=(Digit.ComponentRegistryService.getComponent(n+"Links"),_?b(I,n,T):void 0);return"ACTION_TEST_WS"===(null==o?void 0:o.header)&&(null==o||o.links.sort((function(e,t){return t.orderNumber-e.orderNumber}))),a.createElement(a.Fragment,null,a.createElement(s.Route,{key:t,path:L+"/"+n.toLowerCase()+"-home"},a.createElement("div",{className:"moduleLinkHomePage"},a.createElement("img",{src:r||(null==l?void 0:l.bannerUrl),alt:"noimagefound"}),a.createElement(i.BackButton,{className:"moduleLinkHomePageBackButton"}),a.createElement("h1",null,T("MODULE_"+n.toUpperCase())),a.createElement("div",{className:"moduleLinkHomePageModuleLinks"},o&&a.createElement(i.CitizenHomeCard,{header:T(null==o?void 0:o.header),links:null==o?void 0:o.links,Icon:function(){return a.createElement("span",null)},Info:"OBPS"===n?function(){return a.createElement(i.CitizenInfoLabel,{style:{margin:"0px",padding:"10px"},info:T("CS_FILE_APPLICATION_INFO_LABEL"),text:T("BPA_CITIZEN_HOME_STAKEHOLDER_INCLUDES_INFO_LABEL")})}:null,isInfo:"OBPS"===n})),a.createElement(Ht,{moduleCode:null==n?void 0:n.toUpperCase()}))),a.createElement(s.Route,{key:"faq"+t,path:L+"/"+n.toLowerCase()+"-faq"},a.createElement(K,{module:null==n?void 0:n.toUpperCase()})),a.createElement(s.Route,{key:"hiw"+t,path:L+"/"+n.toLowerCase()+"-how-it-works"},a.createElement(ce,{module:null==n?void 0:n.toUpperCase()})))}));return a.createElement("div",{className:D},a.createElement(Z,{t:T,stateInfo:l,userDetails:u,CITIZEN:c,cityDetails:d,mobileView:m,handleUserDropdownSelection:v,logoUrl:f,showSidebar:!0,linkData:I,islinkDataLoading:N}),a.createElement("div",{className:"main center-container citizen-home-container mb-25"},A?null:a.createElement("div",{className:"SideBarStatic"},a.createElement(j,{linkData:I,islinkDataLoading:N})),a.createElement(s.Switch,null,a.createElement(s.Route,{exact:!0,path:L},a.createElement(J,null)),a.createElement(s.Route,{exact:!0,path:L+"/select-language"},a.createElement(Q,null)),a.createElement(s.Route,{exact:!0,path:L+"/select-location"},a.createElement($,null)),a.createElement(s.Route,{path:L+"/error"},a.createElement(C,{initData:y,goToHome:function(){var e,t,n,r;R.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/"+(null===(t=Digit)||void 0===t||null===(n=t.UserService)||void 0===n||null===(r=n.getType)||void 0===r?void 0:r.call(n)))}})),a.createElement(s.Route,{path:L+"/all-services"},a.createElement(w,{userType:"citizen",modules:E,getCitizenMenu:I,fetchedCitizen:_,isLoading:N})),a.createElement(s.Route,{path:L+"/login"},a.createElement(Ce,{stateCode:p})),a.createElement(s.Route,{path:L+"/register"},a.createElement(Ce,{stateCode:p,isUserRegistered:!1})),a.createElement(s.Route,{path:L+"/user/profile"},a.createElement(ue,{stateCode:p,userType:"citizen",cityDetails:d})),a.createElement(s.Route,{path:L+"/Audit"},a.createElement(Vt,null)),a.createElement(S,{initData:y},P,M))),a.createElement("div",{className:"citizen-home-footer",style:window.location.href.includes("citizen/obps")?{zIndex:"-1"}:{}},a.createElement("img",{alt:"Powered by DIGIT",src:null===(t=window)||void 0===t||null===(n=t.globalConfigs)||void 0===n||null===(r=n.getConfig)||void 0===r?void 0:r.call(n,"DIGIT_FOOTER"),style:{height:"1.2em",cursor:"pointer"},onClick:function(){var e,t,n;window.open(null===(e=window)||void 0===e||null===(t=e.globalConfigs)||void 0===t||null===(n=t.getConfig)||void 0===n?void 0:n.call(t,"DIGIT_HOME_URL"),"_blank").focus()}})))};function qt(e,t){return e(t={exports:{}},t.exports),t.exports}var Xt="function"==typeof Symbol&&Symbol.for,Zt=Xt?Symbol.for("react.element"):60103,Yt=Xt?Symbol.for("react.portal"):60106,Kt=Xt?Symbol.for("react.fragment"):60107,Jt=Xt?Symbol.for("react.strict_mode"):60108,Qt=Xt?Symbol.for("react.profiler"):60114,$t=Xt?Symbol.for("react.provider"):60109,en=Xt?Symbol.for("react.context"):60110,tn=Xt?Symbol.for("react.async_mode"):60111,nn=Xt?Symbol.for("react.concurrent_mode"):60111,rn=Xt?Symbol.for("react.forward_ref"):60112,ln=Xt?Symbol.for("react.suspense"):60113,an=Xt?Symbol.for("react.suspense_list"):60120,on=Xt?Symbol.for("react.memo"):60115,un=Xt?Symbol.for("react.lazy"):60116,cn=Xt?Symbol.for("react.block"):60121,sn=Xt?Symbol.for("react.fundamental"):60117,dn=Xt?Symbol.for("react.responder"):60118,mn=Xt?Symbol.for("react.scope"):60119;function vn(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Zt:switch(e=e.type){case tn:case nn:case Kt:case Qt:case Jt:case ln:return e;default:switch(e=e&&e.$$typeof){case en:case rn:case un:case on:case $t:return e;default:return t}}case Yt:return t}}}function fn(e){return vn(e)===nn}var pn={AsyncMode:tn,ConcurrentMode:nn,ContextConsumer:en,ContextProvider:$t,Element:Zt,ForwardRef:rn,Fragment:Kt,Lazy:un,Memo:on,Portal:Yt,Profiler:Qt,StrictMode:Jt,Suspense:ln,isAsyncMode:function(e){return fn(e)||vn(e)===tn},isConcurrentMode:fn,isContextConsumer:function(e){return vn(e)===en},isContextProvider:function(e){return vn(e)===$t},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Zt},isForwardRef:function(e){return vn(e)===rn},isFragment:function(e){return vn(e)===Kt},isLazy:function(e){return vn(e)===un},isMemo:function(e){return vn(e)===on},isPortal:function(e){return vn(e)===Yt},isProfiler:function(e){return vn(e)===Qt},isStrictMode:function(e){return vn(e)===Jt},isSuspense:function(e){return vn(e)===ln},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===Kt||e===nn||e===Qt||e===Jt||e===ln||e===an||"object"==typeof e&&null!==e&&(e.$$typeof===un||e.$$typeof===on||e.$$typeof===$t||e.$$typeof===en||e.$$typeof===rn||e.$$typeof===sn||e.$$typeof===dn||e.$$typeof===mn||e.$$typeof===cn)},typeOf:vn};qt((function(e,t){})),qt((function(e){e.exports=pn})),Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}})()&&Object.assign;function En(){}function gn(){}Function.call.bind(Object.prototype.hasOwnProperty),gn.resetWarningCache=En;var hn=qt((function(e){e.exports=function(){function e(e,t,n,r,i,l){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==l){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:gn,resetWarningCache:En};return n.PropTypes=n,n}()})),yn=function(e){var t=e.children;return a.createElement("div",{className:"banner banner-container"},t)},Cn=function(){var e=Digit.Hooks.useStore.getInitData(),t=e.data,n=e.isLoading,r=(t||{}).stateInfo,l=o.useTranslation().t;return n?a.createElement(i.Loader,null):a.createElement("div",{className:"bannerHeader"},a.createElement("img",{className:"bannerLogo",src:null==r?void 0:r.logoUrl}),a.createElement("p",null,l("TENANT_TENANTS_"+(null==r?void 0:r.code.toUpperCase()))))},On=function(e){var t,n,r,o=e.config,u=e.t,c=l.useState(null)[0],d=Digit.Hooks.useQueryParams(),m=d.mobile_number,v=d.tenantId,p=s.useHistory(),E=l.useState(""),g=E[0],h=E[1],y=l.useState(!0)[0],C=l.useState(null),O=C[0],S=C[1],b=function(){return Digit.UserService.getType()};l.useEffect((function(){var e,t;if(c){Digit.UserService.setUser(c);var n=(null===(e=location.state)||void 0===e?void 0:e.from)||"/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee";p.replace(n)}else Digit.UserService.setType("employee")}),[c]);var N=function(){S(null)},I=o.inputs,w=I[0],_=I[1],D=I[2],T=[{body:[{label:u(w.label),type:w.type,populators:{name:w.name},isMandatory:!0},{label:u(_.label),type:_.type,populators:{name:_.name},isMandatory:!0},{label:u(D.label),type:D.type,populators:{name:D.name},isMandatory:!0}]}];return a.createElement(yn,null,a.createElement("div",{className:"employeeBackbuttonAlign"},a.createElement(i.BackButton,{variant:"white",style:{borderBottom:"none"}})),a.createElement(i.FormComposer,{onSubmit:function(e){try{return Promise.resolve(le((function(){if(e.newPassword!==e.confirmPassword)return S(u("ERR_PASSWORD_DO_NOT_MATCH"));var t=f({},e,{otpReference:g,tenantId:v,type:b().toUpperCase()});return Promise.resolve(Digit.UserService.changePassword(t,v)).then((function(e){!function(){var e;p.replace("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/user/login")}()}))}),(function(e){var t,n,r,i,l;S((null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.error)||void 0===r||null===(i=r.fields)||void 0===i||null===(l=i[0])||void 0===l?void 0:l.message)||u("ES_SOMETHING_WRONG")),setTimeout(N,5e3)})))}catch(e){return Promise.reject(e)}},noBoxShadow:!0,inline:!0,submitInForm:!0,config:T,label:o.texts.submitButtonLabel,cardStyle:{maxWidth:"408px",margin:"auto"},className:"employeeChangePassword"},a.createElement(Cn,null),a.createElement(i.CardSubHeader,{style:{textAlign:"center"}}," ",o.texts.header," "),a.createElement(i.CardText,null,u("CS_LOGIN_OTP_TEXT")+" ",a.createElement("b",null," ",""+u("+ 91 - ")," ",m)),a.createElement(ve,{t:u,userType:"employee",otp:g,onOtpChange:h,error:y,onResend:function(){try{var e=function(){setTimeout(N,5e3)},t={otp:{mobileNumber:m,userType:b().toUpperCase(),type:"passwordreset",tenantId:v}},n=le((function(){return Promise.resolve(Digit.UserService.sendOtp(t,v)).then((function(){S(u("ES_OTP_RESEND"))}))}),(function(e){var t,n;S((null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error_description)||u("ES_INVALID_LOGIN_CREDENTIALS"))}));return Promise.resolve(n&&n.then?n.then(e):e())}catch(e){return Promise.reject(e)}}})),O&&a.createElement(i.Toast,{error:!0,label:u(O),onClose:N}),a.createElement("div",{className:"EmployeeLoginFooter"},a.createElement("img",{alt:"Powered by DIGIT",src:null===(t=window)||void 0===t||null===(n=t.globalConfigs)||void 0===n||null===(r=n.getConfig)||void 0===r?void 0:r.call(n,"DIGIT_FOOTER_BW"),style:{cursor:"pointer"},onClick:function(){var e,t,n;window.open(null===(e=window)||void 0===e||null===(t=e.globalConfigs)||void 0===t||null===(n=t.getConfig)||void 0===n?void 0:n.call(t,"DIGIT_HOME_URL"),"_blank").focus()}})," "))};On.propTypes={loginParams:hn.any},On.defaultProps={loginParams:null};var Sn=[{texts:{header:"CORE_COMMON_RESET_PASSWORD_LABEL",submitButtonLabel:"CORE_COMMON_CHANGE_PASSWORD"},inputs:[{label:"CORE_LOGIN_USERNAME",type:"text",name:"userName",error:"ERR_HRMS_INVALID_USERNAME"},{label:"CORE_LOGIN_NEW_PASSWORD",type:"password",name:"newPassword",error:"CORE_COMMON_REQUIRED_ERRMSG"},{label:"CORE_LOGIN_CONFIRM_NEW_PASSWORD",type:"password",name:"confirmPassword",error:"CORE_COMMON_REQUIRED_ERRMSG"}]}],bn=function(){var e=o.useTranslation().t,t=s.useRouteMatch().path,n=l.useMemo((function(){return Sn.map((function(t){var n={};for(var r in t.texts)n[r]=e(t.texts[r]);return f({},t,{texts:n})}),[Sn])}));return a.createElement(s.Switch,null,a.createElement(s.Route,{path:""+t,exact:!0},a.createElement(On,{config:n[0],t:e})))},Nn=[{texts:{header:"CORE_COMMON_FORGOT_PASSWORD_LABEL",description:"ES_FORGOT_PASSWORD_DESC",submitButtonLabel:"CORE_COMMON_CONTINUE"},inputs:[{label:"CORE_COMMON_MOBILE_NUMBER",type:"text",name:"mobileNumber",error:"ERR_HRMS_INVALID_MOBILE_NUMBER"},{label:"CORE_COMMON_CITY",type:"custom",name:"city",error:"ERR_HRMS_INVALID_CITY"}]}],In=function(e){var t,n,r,o=e.config,u=e.t,c=Digit.Hooks.useTenants(),d=c.data,m=c.isLoading,v=l.useState(null)[0],p=s.useHistory(),E=l.useState(null),g=E[0],h=E[1];l.useEffect((function(){var e,t;if(v){Digit.UserService.setUser(v);var n=(null===(e=location.state)||void 0===e?void 0:e.from)||"/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee";p.replace(n)}else Digit.UserService.setType("employee")}),[v]);var y=function(){h(null)},C=o.inputs,O=C[0],S=C[1],b=[{body:[{label:u(O.label),type:O.type,populators:{name:O.name,componentInFront:"+91"},isMandatory:!0},{label:u(S.label),type:S.type,populators:{name:S.name,customProps:{},component:function(e,t){return a.createElement(i.Dropdown,f({option:d,optionKey:"name",id:S.name,className:"login-city-dd",select:function(t){e.onChange(t)}},t))}},isMandatory:!0}]}];return m?a.createElement(i.Loader,null):a.createElement(yn,null,a.createElement("div",{className:"employeeBackbuttonAlign"},a.createElement(i.BackButton,{variant:"white",style:{borderBottom:"none"}})),a.createElement(i.FormComposer,{onSubmit:function(e){try{if(!e.city)return alert("Please Select City!"),Promise.resolve();var t={otp:{mobileNumber:e.mobileNumber,userType:Digit.UserService.getType().toUpperCase(),type:"passwordreset",tenantId:e.city.code}},n=le((function(){return Promise.resolve(Digit.UserService.sendOtp(t,e.city.code)).then((function(){var t;p.push("/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee/user/change-password?mobile_number="+e.mobileNumber+"&tenantId="+e.city.code)}))}),(function(e){var t,n,r,i,l;h((null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.error)||void 0===r||null===(i=r.fields)||void 0===i||null===(l=i[0])||void 0===l?void 0:l.message)||"Invalid login credentials!"),setTimeout(y,5e3)}));return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},noBoxShadow:!0,inline:!0,submitInForm:!0,config:b,label:o.texts.submitButtonLabel,secondaryActionLabel:o.texts.secondaryButtonLabel,onSecondayActionClick:function(){var e;p.replace("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/login")},heading:o.texts.header,description:o.texts.description,headingStyle:{textAlign:"center"},cardStyle:{maxWidth:"408px",margin:"auto"},className:"employeeForgotPassword"},a.createElement(Cn,null)),g&&a.createElement(i.Toast,{error:!0,label:u(g),onClose:y}),a.createElement("div",{className:"EmployeeLoginFooter"},a.createElement("img",{alt:"Powered by DIGIT",src:null===(t=window)||void 0===t||null===(n=t.globalConfigs)||void 0===n||null===(r=n.getConfig)||void 0===r?void 0:r.call(n,"DIGIT_FOOTER_BW"),style:{cursor:"pointer"},onClick:function(){var e,t,n;window.open(null===(e=window)||void 0===e||null===(t=e.globalConfigs)||void 0===t||null===(n=t.getConfig)||void 0===n?void 0:n.call(t,"DIGIT_HOME_URL"),"_blank").focus()}})," "))};In.propTypes={loginParams:hn.any},In.defaultProps={loginParams:null};var wn=function(){var e=o.useTranslation().t,t=s.useRouteMatch().path,n=l.useMemo((function(){return Nn.map((function(t){var n={};for(var r in t.texts)n[r]=e(t.texts[r]);return f({},t,{texts:n})}),[Nn])}));return a.createElement(s.Switch,null,a.createElement(s.Route,{path:""+t,exact:!0},a.createElement(In,{config:n[0],t:e})))},_n=function(e,t){return t.filter((function(t){var n;return null==e||null===(n=e.map)||void 0===n?void 0:n.call(e,(function(e){return e.code})).includes(t.code)}))},Dn=function(e){var t,n,r=e.stateCode,i=e.userType,l=e.modules,o=e.appTenants,u=(Digit.Contexts.ComponentProvider,s.useRouteMatch().path),c=s.useLocation(),d=Digit.UserService.getUser();if(!d||null==d||!d.access_token||null==d||!d.info)return a.createElement(s.Redirect,{to:{pathname:"/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee/user/login",state:{from:c.pathname+c.search}}});var m=l.map((function(e,t){var n,l=e.code,c=e.tenants,d=Digit.ComponentRegistryService.getComponent(l+"Module");return d?a.createElement(s.Route,{key:t,path:u+"/"+l.toLowerCase()},a.createElement(d,{stateCode:r,moduleCode:l,userType:i,tenants:_n(c,o)})):a.createElement(s.Route,{key:t,path:u+"/"+l.toLowerCase()},a.createElement(s.Redirect,{to:"/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee/user/error?type=notfound&module="+l}))}));return a.createElement("div",{className:"ground-container"},a.createElement(s.Switch,null,m,a.createElement(s.Route,{path:u+"/login"},a.createElement(s.Redirect,{to:{pathname:"/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee/user/login",state:{from:c.pathname+c.search}}})),a.createElement(s.Route,{path:u+"/forgot-password"},a.createElement(wn,null)),a.createElement(s.Route,{path:u+"/change-password"},a.createElement(bn,null)),a.createElement(s.Route,null,a.createElement(w,{userType:i,modules:l}))))},Tn=function(){var e,t,n,r=Digit.Hooks.useStore.getInitData(),u=r.data,c=r.isLoading,d=o.useTranslation().t,m=s.useHistory(),v=u||{},f=v.languages,p=v.stateInfo,E=Digit.StoreData.getCurrentLanguage(),g=l.useState(E),h=g[0],y=g[1];return c?null:a.createElement(yn,null,a.createElement(i.Card,{className:"bannerCard removeBottomMargin"},a.createElement("div",{className:"bannerHeader"},a.createElement("img",{className:"bannerLogo",src:null==p?void 0:p.logoUrl,alt:"Digit"}),a.createElement("p",null,d("TENANT_TENANTS_"+(null==p?void 0:p.code.toUpperCase())))),a.createElement("div",{className:"language-selector",style:{justifyContent:"space-around",marginBottom:"24px",padding:"0 5%"}},f.map((function(e,t){return a.createElement("div",{className:"language-button-container",key:t},a.createElement(i.CustomButton,{selected:e.value===h,text:e.label,onClick:function(){return function(e){y(e.value),Digit.LocalizationService.changeLanguage(e.value,p.code)}(e)}}))}))),a.createElement(i.SubmitBar,{style:{width:"100%"},label:d("CORE_COMMON_CONTINUE"),onSubmit:function(e){var t;m.push("/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/employee/user/login")}})),a.createElement("div",{className:"EmployeeLoginFooter"},a.createElement("img",{alt:"Powered by DIGIT",src:null===(e=window)||void 0===e||null===(t=e.globalConfigs)||void 0===t||null===(n=t.getConfig)||void 0===n?void 0:n.call(t,"DIGIT_FOOTER_BW"),style:{cursor:"pointer"},onClick:function(){var e,t,n;window.open(null===(e=window)||void 0===e||null===(t=e.globalConfigs)||void 0===t||null===(n=t.getConfig)||void 0===n?void 0:n.call(t,"DIGIT_HOME_URL"),"_blank").focus()}})," "))},Ln=[{texts:{header:"CORE_COMMON_LOGIN",submitButtonLabel:"CORE_COMMON_CONTINUE",secondaryButtonLabel:"CORE_COMMON_FORGOT_PASSWORD"},inputs:[{label:"CORE_LOGIN_USERNAME",type:"text",populators:{name:"username"},isMandatory:!0},{label:"CORE_LOGIN_PASSWORD",type:"password",populators:{name:"password"},isMandatory:!0},{isMandatory:!0,type:"dropdown",key:"city",label:"CORE_COMMON_CITY",disable:!1,populators:{name:"city",optionsKey:"name",error:"ERR_HRMS_INVALID_CITY",mdmsConfig:{masterName:"tenants",moduleName:"tenant",localePrefix:"TENANT_TENANTS",select:"(data)=>{ return Array.isArray(data['tenant'].tenants) && Digit.Utils.getUnique(data['tenant'].tenants).map(ele=>({code:ele.code,name:Digit.Utils.locale.getTransformedLocale('TENANT_TENANTS_'+ele.code)}))}"}}}]}],Rn=["UserRequest"],An=function(e){var t,n,r,o,u,c,d,m,v,p,g=e.config,h=e.t,y=e.isDisabled,C=Digit.Hooks.useTenants().isLoading,O=Digit.Hooks.useStore.getInitData().isLoading,S=l.useState(null),b=S[0],N=S[1],I=l.useState(null),w=I[0],_=I[1],D=l.useState(!1),T=D[0],L=D[1],R=s.useHistory();l.useEffect((function(){var e,t,n,r,i,l,a,o,u,c,s,d,m,v;if(b){Digit.SessionStorage.set("citizen.userRequestObject",b);var f,p,E,g,h=null==b||null===(e=b.info)||void 0===e||null===(t=e.roles)||void 0===t?void 0:t.filter((function(e){return e.tenantId===Digit.SessionStorage.get("Employee.tenantId")}));(null==b||null===(n=b.info)||void 0===n||null===(r=n.roles)||void 0===r?void 0:r.length)>0&&(b.info.roles=h),Digit.UserService.setUser(b),f=null==b?void 0:b.info,p=null==b?void 0:b.access_token,g=(null===(E=JSON.parse(sessionStorage.getItem("Digit.locale")))||void 0===E?void 0:E.value)||"en_IN",localStorage.setItem("Employee.tenant-id",null==f?void 0:f.tenantId),localStorage.setItem("tenant-id",null==f?void 0:f.tenantId),localStorage.setItem("citizen.userRequestObject",JSON.stringify(f)),localStorage.setItem("locale",g),localStorage.setItem("Employee.locale",g),localStorage.setItem("token",p),localStorage.setItem("Employee.token",p),localStorage.setItem("user-info",JSON.stringify(f)),localStorage.setItem("Employee.user-info",JSON.stringify(f));var y,C,O,S,N,I,w,_="/"+(null===(i=window)||void 0===i?void 0:i.contextPath)+"/employee";null!==(l=window)&&void 0!==l&&null!==(a=l.location)&&void 0!==a&&null!==(o=a.href)&&void 0!==o&&o.includes("from=")&&(_=decodeURIComponent(null===(y=window)||void 0===y||null===(C=y.location)||void 0===C||null===(O=C.href)||void 0===O||null===(S=O.split("from="))||void 0===S?void 0:S[1])||"/"+(null===(N=window)||void 0===N?void 0:N.contextPath)+"/employee"),null!=b&&null!==(u=b.info)&&void 0!==u&&u.roles&&null!=b&&null!==(c=b.info)&&void 0!==c&&null!==(s=c.roles)&&void 0!==s&&s.every((function(e){return"NATADMIN"===e.code}))&&(_="/"+(null===(I=window)||void 0===I?void 0:I.contextPath)+"/employee/dss/landing/NURT_DASHBOARD"),null!=b&&null!==(d=b.info)&&void 0!==d&&d.roles&&null!=b&&null!==(m=b.info)&&void 0!==m&&null!==(v=m.roles)&&void 0!==v&&v.every((function(e){return"STADMIN"===e.code}))&&(_="/"+(null===(w=window)||void 0===w?void 0:w.contextPath)+"/employee/dss/landing/home"),R.replace(_)}}),[b]);var A=function(){_(null)},P={code:Digit.ULBService.getStateId(),name:Digit.Utils.locale.getTransformedLocale("TENANT_TENANTS_"+Digit.ULBService.getStateId())},M=[{body:null==g?void 0:g.inputs}];return"admin"===Digit.Hooks.useQueryParams().mode&&0==(null==M||null===(t=M[0])||void 0===t||null===(n=t.body)||void 0===n||null===(r=n[2])||void 0===r?void 0:r.disable)&&null==(null==M||null===(o=M[0])||void 0===o||null===(u=o.body)||void 0===u||null===(c=u[2])||void 0===c||null===(d=c.populators)||void 0===d?void 0:d.defaultValue)&&(M[0].body[2].disable=!0,M[0].body[2].isMandatory=!1,M[0].body[2].populators.defaultValue=P),C||O?a.createElement(i.Loader,null):a.createElement(yn,null,a.createElement("div",{className:"employeeBackbuttonAlign"},a.createElement(i.BackButton,{variant:"white",style:{borderBottom:"none"}})),a.createElement(i.FormComposerV2,{onSubmit:function(e){try{var t,n=function(){L(!1)};L(!0);var r=f({},e,{userType:"EMPLOYEE"});r.tenantId=(null==e||null===(t=e.city)||void 0===t?void 0:t.code)||Digit.ULBService.getStateId(),delete r.city;var i=le((function(){return Promise.resolve(Digit.UserService.authenticate(r)).then((function(e){var t=e.UserRequest,n=E(e,Rn);Digit.SessionStorage.set("Employee.tenantId",null==t?void 0:t.tenantId),N(f({info:t},n))}))}),(function(e){var t,n;_((null==e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error_description)||"ES_ERROR_USER_NOT_PERMITTED"==(null==e?void 0:e.message)&&h("ES_ERROR_USER_NOT_PERMITTED")||h("INVALID_LOGIN_CREDENTIALS")),setTimeout(A,5e3)}));return Promise.resolve(i&&i.then?i.then(n):n())}catch(e){return Promise.reject(e)}},isDisabled:y||T,noBoxShadow:!0,inline:!0,submitInForm:!0,config:M,label:g.texts.submitButtonLabel,secondaryActionLabel:g.texts.secondaryButtonLabel,onSecondayActionClick:function(){var e;R.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee/user/forgot-password")},heading:g.texts.header,headingStyle:{textAlign:"center"},cardStyle:{margin:"auto",minWidth:"408px"},className:"loginFormStyleEmployee",buttonStyle:{maxWidth:"100%",width:"100%"}},a.createElement(Cn,null)),w&&a.createElement(i.Toast,{error:!0,label:h(w),onClose:A}),a.createElement("div",{className:"employee-login-home-footer",style:{backgroundColor:"unset"}},a.createElement("img",{alt:"Powered by DIGIT",src:null===(m=window)||void 0===m||null===(v=m.globalConfigs)||void 0===v||null===(p=v.getConfig)||void 0===p?void 0:p.call(v,"DIGIT_FOOTER_BW"),style:{cursor:"pointer"},onClick:function(){var e,t,n;window.open(null===(e=window)||void 0===e||null===(t=e.globalConfigs)||void 0===t||null===(n=t.getConfig)||void 0===n?void 0:n.call(t,"DIGIT_HOME_URL"),"_blank").focus()}})," "))};An.propTypes={loginParams:hn.any},An.defaultProps={loginParams:null};var Pn=function(){var e=o.useTranslation().t,t=s.useRouteMatch().path,n=l.useState(Ln),r=n[0],i=n[1],u=Digit.Hooks.useCommonMDMS(Digit.ULBService.getStateId(),"commonUiConfig",["LoginConfig"],{select:function(e){var t;return{config:null==e||null===(t=e.commonUiConfig)||void 0===t?void 0:t.LoginConfig}},retry:!1}),c=u.data,d=u.isLoading;l.useEffect((function(){0==d&&null!=c&&c.config&&i(null==c?void 0:c.config)}),[c,d]);var m=l.useMemo((function(){return r.map((function(t){var n={};for(var r in t.texts)n[r]=e(t.texts[r]);return f({},t,{texts:n})}),[r])}));return a.createElement(s.Switch,null,a.createElement(s.Route,{path:""+t,exact:!0},a.createElement(An,{config:m[0],t:e})))},Mn=["user/profile","user/error"],xn=function(e){var t,n,r,u,c=e.stateInfo,d=e.userDetails,m=e.CITIZEN,v=e.cityDetails,f=e.mobileView,p=e.handleUserDropdownSelection,E=e.logoUrl,g=e.DSO,h=e.stateCode,y=e.modules,O=e.appTenants,b=e.initData,N=s.useHistory(),I=o.useTranslation().t,w=s.useRouteMatch().path,_=s.useLocation(),D=null==_||null===(t=_.pathname)||void 0===t?void 0:t.includes("language-selection"),T=Mn.some((function(e){var t;return null==_||null===(t=_.pathname)||void 0===t?void 0:t.includes(e)}));return l.useEffect((function(){Digit.UserService.setType("employee")}),[]),a.createElement("div",{className:"employee"},a.createElement(s.Switch,null,a.createElement(s.Route,{path:w+"/user"},T&&a.createElement(Z,{t:I,stateInfo:c,userDetails:d,CITIZEN:m,cityDetails:v,mobileView:f,handleUserDropdownSelection:p,logoUrl:E,showSidebar:!!T,showLanguageChange:!D}),a.createElement("div",{className:T?"grounded-container":"loginContainer",style:T?{padding:0,paddingTop:"80px",marginLeft:f?"":"64px"}:{"--banner-url":"url("+(null==c?void 0:c.bannerUrl)+")",padding:"0px"}},a.createElement(s.Switch,null,a.createElement(s.Route,{path:w+"/user/login"},a.createElement(Pn,null)),a.createElement(s.Route,{path:w+"/user/forgot-password"},a.createElement(wn,null)),a.createElement(s.Route,{path:w+"/user/change-password"},a.createElement(bn,null)),a.createElement(i.PrivateRoute,{path:w+"/user/profile"},a.createElement(ue,{stateCode:h,userType:"employee",cityDetails:v})),a.createElement(s.Route,{path:w+"/user/error"},a.createElement(C,{initData:b,goToHome:function(){var e,t,n,r;N.push("/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/"+(null===(t=Digit)||void 0===t||null===(n=t.UserService)||void 0===n||null===(r=n.getType)||void 0===r?void 0:r.call(n)))}})),a.createElement(s.Route,{path:w+"/user/language-selection"},a.createElement(Tn,null)),a.createElement(s.Route,null,a.createElement(s.Redirect,{to:w+"/user/language-selection"}))))),a.createElement(s.Route,null,a.createElement(Z,{t:I,stateInfo:c,userDetails:d,CITIZEN:m,cityDetails:v,mobileView:f,handleUserDropdownSelection:p,logoUrl:E,modules:y}),a.createElement("div",{className:"main "+(g?"m-auto":"")},a.createElement("div",{className:"employee-app-wrapper"},a.createElement(S,{initData:b},a.createElement(Dn,{stateCode:h,userType:"employee",modules:y,appTenants:O}))),a.createElement("div",{className:"employee-home-footer"},a.createElement("img",{alt:"Powered by DIGIT",src:null===(n=window)||void 0===n||null===(r=n.globalConfigs)||void 0===r||null===(u=r.getConfig)||void 0===u?void 0:u.call(r,"DIGIT_FOOTER"),style:{height:"1.1em",cursor:"pointer"},onClick:function(){var e,t,n;window.open(null===(e=window)||void 0===e||null===(t=e.globalConfigs)||void 0===t||null===(n=t.getConfig)||void 0===n?void 0:n.call(t,"DIGIT_HOME_URL"),"_blank").focus()}})))),a.createElement(s.Route,null,a.createElement(s.Redirect,{to:w+"/user/language-selection"}))))},Un=function(e){var t,n,r,i,o=e.stateCode,u=e.modules,c=e.appTenants,d=e.logoUrl,m=e.initData,v=e.defaultLanding,f=void 0===v?"citizen":v,p=s.useHistory(),E=s.useLocation().pathname,g=window.innerWidth,h=Digit.ULBService.getCurrentUlb(),y=Digit.UserService.getUser(),C=(Digit.Hooks.useStore.getInitData().data||{}).stateInfo,O=Digit.UserService.hasAccess(["FSM_DSO"]),S="CITIZEN"===(null==y||null===(t=y.info)||void 0===t?void 0:t.type)||!window.location.pathname.split("/").includes("employee");window.location.pathname.split("/").includes("employee")&&(S=!1),l.useEffect((function(){var e,t,n;null!=E&&E.includes("application-details")||(null!=E&&E.includes("inbox")||Digit.SessionStorage.del("fsm/inbox/searchParams"),null!=E&&E.includes("search")&&Digit.SessionStorage.del("fsm/search/searchParams")),null!=E&&E.includes("dss")||Digit.SessionStorage.del("DSS_FILTERS"),(null==E?void 0:E.toString())==="/"+(null===(e=window)||void 0===e?void 0:e.contextPath)+"/employee"&&(Digit.SessionStorage.del("SEARCH_APPLICATION_DETAIL"),Digit.SessionStorage.del("WS_EDIT_APPLICATION_DETAILS")),(null==E?void 0:E.toString())!=="/"+(null===(t=window)||void 0===t?void 0:t.contextPath)+"/citizen"&&(null==E?void 0:E.toString())!=="/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee"||Digit.SessionStorage.del("WS_DISCONNECTION")}),[E]),p.listen((function(){var e;null===(e=window)||void 0===e||e.scrollTo({top:0,left:0,behavior:"smooth"})}));var b={stateInfo:C,userDetails:y,CITIZEN:S,cityDetails:h,mobileView:g<=640,handleUserDropdownSelection:function(e){e.func()},logoUrl:d,DSO:O,stateCode:o,modules:u,appTenants:c,sourceUrl:window.location.origin+"/citizen",pathname:E,initData:m};return a.createElement(s.Switch,null,a.createElement(s.Route,{path:"/"+(null===(n=window)||void 0===n?void 0:n.contextPath)+"/employee"},a.createElement(xn,b)),a.createElement(s.Route,{path:"/"+(null===(r=window)||void 0===r?void 0:r.contextPath)+"/citizen"},a.createElement(Wt,b)),a.createElement(s.Route,null,a.createElement(s.Redirect,{to:"/"+(null===(i=window)||void 0===i?void 0:i.contextPath)+"/"+f})))},kn=[v],Bn=("object"==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):m.compose)(m.applyMiddleware.apply(void 0,kn)),Fn=function(e,t){return void 0===t&&(t={}),m.createStore(function(e,t){return m.combineReducers(f({common:(n=e,function(e,t){return void 0===e&&(e=n),"LANGUAGE_SELECT"===t.type?f({},e,{selectedLanguage:t.payload}):e})},t));var n}(e,t),Bn)},jn=function(e){var t,n=e.stateCode,r=e.enabledModules,l=e.moduleReducers,u=e.defaultLanding,d=Digit.Hooks.useInitStore(n,r),m=d.isLoading,v=d.data;return m?a.createElement(i.Loader,{page:!0}):(o.getI18n(),a.createElement(c.Provider,{store:Fn(v,l(v))},a.createElement(s.BrowserRouter,null,a.createElement(i.Body,null,a.createElement(Un,{initData:v,stateCode:n,modules:null==v?void 0:v.modules,appTenants:v.tenants,logoUrl:null==v||null===(t=v.stateInfo)||void 0===t?void 0:t.logoUrl,defaultLanding:u})))))},Vn={SelectOtp:ve};t.DigitUI=function(e){var t=e.stateCode,n=e.registry,r=e.enabledModules,i=e.moduleReducers,o=e.defaultLanding,c=l.useState(Digit.Utils.getPrivacyObject()||{}),s=c[0],d=c[1],m=(Digit.UserService.getType(),new u.QueryClient({defaultOptions:{queries:{staleTime:9e5,cacheTime:3e6,retry:!1,retryDelay:function(e){return 1/0}}}})),v=Digit.Contexts.ComponentProvider,p=Digit.Contexts.PrivacyProvider;return Digit.UserService.hasAccess(["FSM_DSO"]),a.createElement("div",null,a.createElement(S,null,a.createElement(u.QueryClientProvider,{client:m},a.createElement(v.Provider,{value:n},a.createElement(p.Provider,{value:{privacy:null==s?void 0:s[window.location.pathname],resetPrivacy:function(e){Digit.Utils.setPrivacyObject({}),d({})},getPrivacy:function(){var e=Digit.Utils.getPrivacyObject();return d(e),e},updatePrivacyDescoped:function(e){var t,n=Digit.Utils.getAllPrivacyObject(),r=f({},n,((t={})[window.location.pathname]=e,t));Digit.Utils.setPrivacyObject(f({},r)),d((null==n?void 0:n[window.location.pathname])||{})},updatePrivacy:function(e,t){d(Digit.Utils.updatePrivacy(e,t)||{})}}},a.createElement(jn,{stateCode:t,enabledModules:r,moduleReducers:i,defaultLanding:o}))))))},t.initCoreComponents=function(){Object.entries(Vn).forEach((function(e){var t=e[0],n=e[1];Digit.ComponentRegistryService.setComponent(t,n)}))}}}]);