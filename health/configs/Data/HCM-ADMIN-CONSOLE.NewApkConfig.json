[
  {
    "id": "7746f51b-1a67-475c-aca4-b9e6565b0764",
    "tenantId": "mz",
    "schemaCode": "HCM-ADMIN-CONSOLE.NewApkConfig",
    "uniqueIdentifier": "CMP-2025-10-24-001599.REGISTRATION-DELIVERY",
    "data": {
      "name": "REGISTRATION-DELIVERY",
      "flows": [
        {
          "body": [
            {
              "label": "Proximity Search",
              "format": "switch",
              "onAction": [
                {
                  "actionType": "EVENT",
                  "properties": {
                    "data": [
                      {
                        "key": "lat & long   //// NOT SURE ABOUT THIS SEARCH",
                        "value": "field.value",
                        "operation": "within"
                      }
                    ],
                    "name": "ENTITY // ADDRESS",
                    "type": "field.value==true ? SEARCH_EVENT : CLEAR_EVENT"
                  }
                }
              ],
              "fieldName": "proximitySearch"
            },
            {
              "label": "Enter the name of individual",
              "format": "searchBar",
              "onAction": [
                {
                  "actionType": "SEARCH_EVENT",
                  "properties": {
                    "data": [
                      {
                        "key": "givenName",
                        "value": "field.value",
                        "operation": "contains"
                      }
                    ],
                    "name": "name",
                    "type": "field.value==true ? SEARCH_EVENT : CLEAR_EVENT"
                  }
                }
              ],
              "fieldName": "searchBar"
            },
            {
              "label": "Filter Search",
              "format": "filter",
              "onAction": [
                {
                  "actionType": "SEARCH_EVENT",
                  "properties": {
                    "data": [
                      {
                        "key": "STATUS",
                        "value": "field.value",
                        "operation": "equals"
                      }
                    ],
                    "name": "ENTITY // TASK",
                    "type": "field.value==true ? SEARCH_EVENT : CLEAR_EVENT"
                  }
                }
              ],
              "fieldName": "searchByFilter"
            },
            {
              "label": "No households found",
              "format": "infoCard",
              "hidden": "{{ context.household.notEmpty }}",
              "description": "Use the search above to find households or register a new one"
            },
            {
              "data": "members",
              "child": {
                "format": "card",
                "children": [
                  {
                    "format": "row",
                    "children": [
                      {
                        "value": "{{ headIndividual.0.name.givenName }}",
                        "format": "text"
                      },
                      {
                        "label": "Open",
                        "format": "button",
                        "onAction": [
                          {
                            "actionType": "NAVIGATION",
                            "properties": {
                              "data": [
                                {
                                  "key": "HouseholdClientReferenceId",
                                  "value": "{{ HouseholdModel.clientReferenceId }}"
                                }
                              ],
                              "name": "householdOverview",
                              "type": "TEMPLATE"
                            }
                          }
                        ],
                        "properties": {
                          "size": "medium",
                          "type": "secondary"
                        }
                      }
                    ],
                    "properties": {
                      "mainAxisSize": "max",
                      "mainAxisAlignment": "spaceBetween"
                    }
                  },
                  {
                    "value": "{{ headOfHousehold.0.isHeadOfHousehold }}",
                    "format": "text"
                  },
                  {
                    "data": {
                      "rows": "{{contextData.0.individuals}}",
                      "source": "individuals",
                      "columns": [
                        {
                          "header": "Beneficiary",
                          "cellValue": "{{item.name.givenName}}"
                        },
                        {
                          "header": "Age",
                          "cellValue": "{{fn:formatDate(item.dateOfBirth, age)}}"
                        },
                        {
                          "header": "Gender",
                          "cellValue": "{{item.gender}}"
                        }
                      ]
                    },
                    "format": "table"
                  }
                ]
              },
              "format": "listView",
              "hidden": "{{ context.household.empty }}",
              "fieldName": "listView"
            }
          ],
          "name": "searchBeneficiary",
          "footer": [
            {
              "label": "register beneficiary",
              "format": "button",
              "onAction": [
                {
                  "actionType": "NAVIGATION",
                  "properties": {
                    "data": [
                      {
                        "key": "nameOfIndividual",
                        "value": "searchBar.value"
                      }
                    ],
                    "name": "HOUSEHOLD",
                    "type": "FORM"
                  }
                }
              ],
              "properties": {
                "size": "large",
                "type": "primary",
                "mainAxisSize": "max",
                "mainAxisAlignment": "center"
              }
            },
            {
              "label": "scan beneficiary",
              "format": "button",
              "onAction": [
                {
                  "actionType": "EVENT",
                  "properties": {
                    "data": [
                      {
                        "key": "tag",
                        "value": "field.value",
                        "operation": "contains"
                      }
                    ],
                    "name": "ENTITY // PROJECTBENEFICIARY",
                    "type": "SEARCH_EVENT"
                  }
                }
              ],
              "properties": {
                "size": "large",
                "type": "secondary",
                "mainAxisSize": "max",
                "mainAxisAlignment": "center"
              }
            }
          ],
          "header": [
            {
              "label": "Back",
              "format": "backLink",
              "onAction": [
                {
                  "actionType": "BACK_NAVIGATION",
                  "properties": {}
                }
              ]
            }
          ],
          "heading": "Search Beneficiary",
          "screenType": "TEMPLATE",
          "description": "search beneficiary description",
          "wrapperConfig": {
            "filters": [],
            "relations": [
              {
                "name": "members",
                "match": {
                  "field": "householdClientReferenceId",
                  "equalsFrom": "clientReferenceId"
                },
                "entity": "HouseholdMemberModel"
              },
              {
                "name": "headOfHousehold",
                "match": {
                  "field": "householdClientReferenceId",
                  "equalsFrom": "clientReferenceId"
                },
                "entity": "HouseholdMemberModel",
                "filters": [
                  {
                    "field": "isHeadOfHousehold",
                    "equals": true
                  }
                ]
              },
              {
                "name": "headIndividual",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "headOfHousehold.individualClientReferenceId"
                },
                "entity": "IndividualModel"
              },
              {
                "name": "individuals",
                "match": {
                  "field": "clientReferenceId",
                  "inFrom": "members.individualClientReferenceId"
                },
                "entity": "IndividualModel"
              },
              {
                "name": "projectBeneficiaries",
                "match": {
                  "field": "beneficiaryClientReferenceId",
                  "equalsFrom": "individuals.clientReferenceId"
                },
                "entity": "ProjectBeneficiaryModel"
              },
              {
                "name": "tasks",
                "match": {
                  "field": "projectBeneficiaryClientReferenceId",
                  "inFrom": "projectBeneficiaries.clientReferenceId"
                },
                "entity": "TaskModel"
              },
              {
                "name": "sideEffects",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "clientReferenceId"
                },
                "entity": "SideEffectModel"
              },
              {
                "name": "referrals",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "clientReferenceId"
                },
                "entity": "ReferralModel"
              }
            ],
            "rootEntity": "HouseholdModel",
            "wrapperName": "HouseholdWrapper",
            "searchConfig": {
              "select": ["household", "individual", "householdMember", "projectBeneficiary", "task"],
              "primary": "household"
            }
          }
        },
        {
          "name": "HOUSEHOLD",
          "pages": [
            {
              "page": "beneficiaryLocation",
              "type": "object",
              "label": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_SCREEN_HEADING",
              "order": 2,
              "navigateTo": {
                "name": "householdDetails",
                "type": "form"
              },
              "properties": [
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_administrativeArea",
                  "order": 1,
                  "value": "",
                  "format": "locality",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_administrativeArea_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "administrativeArea",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [
                    {
                      "type": "required",
                      "value": true,
                      "message": "Required field cannot be empty"
                    }
                  ],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_latlong",
                  "order": 2,
                  "value": "",
                  "format": "latLng",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_latlong_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "latLng",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [
                    {
                      "type": "required",
                      "value": true,
                      "message": "Required field cannot be empty"
                    }
                  ],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_addressLine1",
                  "order": 3,
                  "value": "",
                  "format": "text",
                  "hidden": true,
                  "tooltip": "",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_addressLine1_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "addressLine1",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_addressLine2",
                  "order": 4,
                  "value": "",
                  "format": "text",
                  "hidden": true,
                  "tooltip": "",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_addressLine2_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "addressLine2",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_landmark",
                  "order": 5,
                  "value": "",
                  "format": "text",
                  "hidden": true,
                  "tooltip": "",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_landmark_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "landmark",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "integer",
                  "label": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_pincode",
                  "order": 6,
                  "value": "",
                  "format": "text",
                  "hidden": true,
                  "tooltip": "",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_pincode_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "pincode",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "enums": [
                    {
                      "code": "PERMANENT",
                      "name": "PERMANENT"
                    },
                    {
                      "code": "CORRESPONDENCE",
                      "name": "CORRESPONDENCE"
                    },
                    {
                      "code": "OTHER",
                      "name": "OTHER"
                    }
                  ],
                  "label": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_label_typeOfAddress",
                  "order": 7,
                  "value": "PERMANENT",
                  "format": "dropdown",
                  "hidden": true,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "typeOfAddress",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": false
                }
              ],
              "actionLabel": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_ACTION_BUTTON_LABEL_1",
              "description": "APPONE_REGISTRATION_BENEFICIARY_LOCATION_SCREEN_DESCRIPTION"
            },
            {
              "page": "householdDetails",
              "type": "object",
              "label": "APPONE_REGISTRATION_HOUSEHOLDDETAILS_SCREEN_HEADING",
              "order": 3,
              "navigateTo": {
                "name": "beneficiaryDetails",
                "type": "form"
              },
              "properties": [
                {
                  "type": "integer",
                  "label": "APPONE_REGISTRATION_HOUSEHOLDDETAILS_label_dateOfRegistration",
                  "order": 1,
                  "value": "",
                  "format": "date",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": true,
                  "fieldName": "dateOfRegistration",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": true,
                  "validations": [
                    {
                      "type": "required",
                      "value": true,
                      "message": "Required field cannot be empty"
                    }
                  ],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "integer",
                  "label": "APPONE_REGISTRATION_HOUSEHOLDDETAILS_label_childrenCount",
                  "order": 2,
                  "value": "0",
                  "format": "numeric",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "childrenCount",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "integer",
                  "label": "APPONE_REGISTRATION_HOUSEHOLDDETAILS_label_pregnantWomenCount",
                  "order": 3,
                  "value": "0",
                  "format": "numeric",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "pregnantWomenCount",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "integer",
                  "label": "APPONE_REGISTRATION_HOUSEHOLDDETAILS_label_memberCount",
                  "order": 4,
                  "value": "1",
                  "format": "numeric",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "memberCount",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [
                    {
                      "type": "required",
                      "value": true,
                      "message": ""
                    },
                    {
                      "type": "min",
                      "value": "1",
                      "message": "Total household members cannot be less than 1"
                    },
                    {
                      "type": "max",
                      "value": "10",
                      "message": "Total household members cannot be more than 10"
                    }
                  ],
                  "errorMessage": "",
                  "isMultiSelect": false
                }
              ],
              "actionLabel": "APPONE_REGISTRATION_HOUSEHOLDDETAILS_ACTION_BUTTON_LABEL_1",
              "description": "APPONE_REGISTRATION_HOUSEHOLDDETAILS_SCREEN_DESCRIPTION"
            },
            {
              "page": "beneficiaryDetails",
              "type": "object",
              "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_SCREEN_HEADING",
              "order": 4,
              "navigateTo": {
                "data": [
                  {
                    "key": "householdId",
                    "value": "{{formData.household.clientReferenceId}}"
                  }
                ],
                "name": "beneficiary-details",
                "type": "template"
              },
              "properties": [
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_nameOfIndividual",
                  "order": 1,
                  "value": "",
                  "format": "text",
                  "hidden": false,
                  "tooltip": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_nameOfIndividual_tooltip",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_nameOfIndividual_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "nameOfIndividual",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [
                    {
                      "type": "required",
                      "value": true,
                      "message": "Required field cannot be empty"
                    },
                    {
                      "type": "minLength",
                      "value": "2",
                      "message": "Size must be 2 to 200 characters"
                    },
                    {
                      "type": "maxLength",
                      "value": "200",
                      "message": "Size must be 2 to 200 characters"
                    }
                  ],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "boolean",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_isHeadOfFamily",
                  "order": 2,
                  "value": "",
                  "format": "checkbox",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "isHeadOfFamily",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [
                    {
                      "type": "required",
                      "value": true,
                      "message": "Required field cannot be empty"
                    }
                  ],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "enums": [
                    {
                      "code": "DEFAULT",
                      "name": "DEFAULT"
                    },
                    {
                      "code": "UNIQUE_BENEFICIARY_ID",
                      "name": "UNIQUE_BENEFICIARY_ID"
                    },
                    {
                      "code": "OTHER",
                      "name": "OTHER"
                    }
                  ],
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_identifiers",
                  "order": 3,
                  "value": "",
                  "format": "idPopulator",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "identifiers",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "schemaCode": "HCM.ID_TYPE_OPTIONS_POPULATOR",
                  "systemDate": false,
                  "validations": [
                    {
                      "type": "required",
                      "value": true,
                      "message": "Required field cannot be empty"
                    }
                  ],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_dobPicker",
                  "order": 4,
                  "value": "",
                  "format": "dob",
                  "hidden": false,
                  "tooltip": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_dobPicker_tooltip",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_dobPicker_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "dobPicker",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "enums": [
                    {
                      "code": "MALE",
                      "name": "MALE"
                    },
                    {
                      "code": "FEMALE",
                      "name": "FEMALE"
                    },
                    {
                      "code": "OTHER",
                      "name": "OTHER"
                    }
                  ],
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_gender",
                  "order": 5,
                  "value": "",
                  "format": "select",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "gender",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "schemaCode": "common-masters.GenderType",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_phone",
                  "order": 6,
                  "value": "",
                  "format": "mobileNumber",
                  "hidden": false,
                  "tooltip": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_phone_tooltip",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_phone_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "phone",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_scanner",
                  "order": 7,
                  "value": "",
                  "format": "scanner",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "scanner",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                }
              ],
              "actionLabel": "APPONE_REGISTRATION_BENEFICIARYDETAILS_ACTION_BUTTON_LABEL_1",
              "description": "APPONE_REGISTRATION_BENEFICIARYDETAILS_SCREEN_DESCRIPTION"
            }
          ],
          "project": "CMP-2025-10-24-001599",
          "version": 1,
          "disabled": false,
          "onAction": [
            {
              "actionType": "FETCH_TRANSFORMER_CONFIG",
              "properties": {
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Failed to fetch config."
                    }
                  }
                ],
                "configName": "beneficiaryRegistration"
              }
            },
            {
              "actionType": "CREATE_EVENT",
              "properties": {
                "entity": "HOUSEHOLD, INDIVIDUAL, PROJECTBENEFICIARY, MEMBER",
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Failed to create household."
                    }
                  }
                ]
              }
            },
            {
              "actionType": "NAVIGATION",
              "properties": {
                "data": [
                  {
                    "key": "HouseholdClientReferenceId",
                    "value": "{{contextData.entities.HouseholdModel.clientReferenceId}}"
                  }
                ],
                "name": "householdOverview",
                "type": "TEMPLATE",
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Navigation failed."
                    }
                  }
                ]
              }
            }
          ],
          "isSelected": true,
          "screenType": "FORM",
          "wrapperConfig": {
            "filters": [
              {
                "field": "isHeadOfHousehold",
                "equals": true
              }
            ],
            "relations": [
              {
                "name": "household",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "householdClientReferenceId"
                },
                "entity": "HouseholdModel"
              },
              {
                "name": "members",
                "match": {
                  "field": "householdClientReferenceId",
                  "equalsFrom": "household.clientReferenceId"
                },
                "entity": "HouseholdMemberModel"
              },
              {
                "name": "headOfHousehold",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "HouseholdMemberModel.individualClientReferenceId"
                },
                "entity": "IndividualModel"
              },
              {
                "name": "individuals",
                "match": {
                  "field": "clientReferenceId",
                  "inFrom": "members.individualClientReferenceId"
                },
                "entity": "IndividualModel"
              },
              {
                "name": "projectBeneficiaries",
                "match": {
                  "field": "beneficiaryClientReferenceId",
                  "equalsFrom": "household.clientReferenceId"
                },
                "entity": "ProjectBeneficiaryModel"
              },
              {
                "name": "tasks",
                "match": {
                  "field": "projectBeneficiaryClientReferenceId",
                  "inFrom": "projectBeneficiaries.clientReferenceId"
                },
                "entity": "TaskModel"
              },
              {
                "name": "sideEffects",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "household.clientReferenceId"
                },
                "entity": "SideEffectModel"
              },
              {
                "name": "referrals",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "household.clientReferenceId"
                },
                "entity": "ReferralModel"
              }
            ],
            "rootEntity": "HouseholdMemberModel",
            "wrapperName": "HouseholdWrapper",
            "searchConfig": {
              "select": ["individual", "household", "householdMember", "projectBeneficiary", "task"],
              "primary": "household"
            }
          }
        },
        {
          "body": [
            {
              "type": "primary",
              "format": "card",
              "children": [
                {
                  "format": "row",
                  "children": [
                    {
                      "label": "Edit",
                      "format": "button",
                      "onAction": [
                        {
                          "actionType": "NAVIGATION",
                          "properties": {
                            "data": [
                              {
                                "key": "id",
                                "value": "{{item.id}}"
                              }
                            ],
                            "name": "HOUSEHOLD",
                            "type": "FORM"
                          }
                        }
                      ],
                      "properties": {
                        "size": "large",
                        "type": "tertiary",
                        "mainAxisSize": "min",
                        "mainAxisAlignment": "center"
                      }
                    }
                  ],
                  "properties": {
                    "mainAxisAlignment": "end"
                  }
                },
                {
                  "data": [
                    {
                      "key": "Household head name",
                      "value": "{{contextData.0.headIndividual.IndividualModel.name.givenName}}"
                    },
                    {
                      "key": "Village",
                      "value": "{{contextData.0.household.HouseholdModel.address.locality.code}}"
                    },
                    {
                      "key": "Member Count",
                      "value": "{{contextData.0.household.HouseholdModel.memberCount}}"
                    }
                  ],
                  "format": "labelPairList"
                },
                {
                  "child": {
                    "type": "secondary",
                    "format": "card",
                    "children": [
                      {
                        "format": "row",
                        "children": [
                          {
                            "value": "{{ individual.0.name.givenName }}",
                            "format": "text"
                          },
                          {
                            "label": "Edit",
                            "format": "button",
                            "onAction": [
                              {
                                "actionType": "NAVIGATION",
                                "properties": {
                                  "data": [
                                    {
                                      "key": "id",
                                      "value": "{{item.id}}"
                                    }
                                  ],
                                  "name": "editBeneficiary",
                                  "type": "TEMPLATE"
                                }
                              }
                            ],
                            "properties": {
                              "size": "large",
                              "type": "tertiary",
                              "mainAxisSize": "min",
                              "mainAxisAlignment": "center"
                            }
                          }
                        ],
                        "properties": {
                          "mainAxisSize": "max",
                          "mainAxisAlignment": "spaceBetween"
                        }
                      },
                      {
                        "value": "{{individual.0.gender }} | {{fn:formatDate(individual.0.dateOfBirth, age)}}",
                        "format": "text"
                      },
                      {
                        "type": "",
                        "label": "{{fn:checkEligibilityForAgeAndSideEffect(individual.0.dateOfBirth)}}",
                        "format": "tag"
                      },
                      {
                        "format": "row",
                        "children": [
                          {
                            "icon": "add",
                            "label": "Add Child",
                            "format": "button",
                            "properties": {
                              "size": "medium",
                              "type": "tertiary",
                              "mainAxisSize": "min",
                              "mainAxisAlignment": "center"
                            }
                          }
                        ]
                      },
                      {
                        "icon": "add",
                        "label": "Delivery",
                        "format": "button",
                        "onAction": [
                          {
                            "actionType": "NAVIGATION",
                            "properties": {
                              "data": [
                                {
                                  "key": "selectedIndividualClientReferenceId",
                                  "value": "{{individual.0.clientReferenceId}}"
                                }
                              ],
                              "name": "CHECKLIST",
                              "type": "FORM"
                            }
                          }
                        ],
                        "properties": {
                          "size": "medium",
                          "type": "primary",
                          "mainAxisSize": "max",
                          "mainAxisAlignment": "center"
                        }
                      }
                    ]
                  },
                  "format": "listView",
                  "hidden": "{{ context.household.empty }}",
                  "fieldName": "listView",
                  "dataSource": "members"
                },
                {
                  "label": "Add Member",
                  "format": "button",
                  "onAction": [
                    {
                      "actionType": "NAVIGATION",
                      "properties": {
                        "data": [
                          {
                            "key": "HouseholdClientReferenceId",
                            "value": "{{household.HouseholdModel.clientReferenceId}}"
                          }
                        ],
                        "name": "ADD_MEMBER",
                        "type": "FORM"
                      }
                    }
                  ],
                  "properties": {
                    "size": "large",
                    "type": "tertiary",
                    "mainAxisSize": "min",
                    "mainAxisAlignment": "center"
                  }
                }
              ]
            }
          ],
          "name": "householdOverview",
          "footer": [],
          "header": [
            {
              "label": "Back",
              "format": "backLink",
              "onAction": [
                {
                  "actionType": "BACK_NAVIGATION",
                  "properties": {
                    "name": "searchBeneficiary",
                    "type": "TEMPLATE"
                  }
                }
              ]
            }
          ],
          "heading": "Household Overview",
          "screenType": "TEMPLATE",
          "description": "Overview of beneficiary",
          "initActions": [
            {
              "actionType": "SEARCH_EVENT",
              "properties": {
                "data": [
                  {
                    "key": "clientReferenceId",
                    "value": "{{navigation.HouseholdClientReferenceId}}",
                    "operation": "equals"
                  }
                ],
                "name": "household",
                "type": "SEARCH_EVENT"
              }
            }
          ],
          "wrapperConfig": {
            "filters": [
              {
                "field": "clientReferenceId",
                "equalsFrom": "{{context.household.clientReferenceId}}"
              }
            ],
            "relations": [
              {
                "name": "household",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "clientReferenceId"
                },
                "entity": "HouseholdModel"
              },
              {
                "name": "headOfHousehold",
                "match": {
                  "field": "householdClientReferenceId",
                  "equalsFrom": "clientReferenceId"
                },
                "entity": "HouseholdMemberModel",
                "filters": [
                  {
                    "field": "isHeadOfHousehold",
                    "equals": true
                  }
                ]
              },
              {
                "name": "headIndividual",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "headOfHousehold.individualClientReferenceId"
                },
                "entity": "IndividualModel"
              },
              {
                "name": "members",
                "match": {
                  "field": "householdClientReferenceId",
                  "equalsFrom": "clientReferenceId"
                },
                "entity": "HouseholdMemberModel",
                "relations": [
                  {
                    "name": "individual",
                    "match": {
                      "field": "clientReferenceId",
                      "equalsFrom": "individualClientReferenceId"
                    },
                    "entity": "IndividualModel"
                  },
                  {
                    "name": "projectBeneficiary",
                    "match": {
                      "field": "beneficiaryClientReferenceId",
                      "equalsFrom": "individual.clientReferenceId"
                    },
                    "entity": "ProjectBeneficiaryModel"
                  },
                  {
                    "name": "task",
                    "match": {
                      "field": "projectBeneficiaryClientReferenceId",
                      "equalsFrom": "projectBeneficiary.clientReferenceId"
                    },
                    "entity": "TaskModel"
                  },
                  {
                    "name": "referral",
                    "match": {
                      "field": "projectBeneficiaryClientReferenceId",
                      "equalsFrom": "projectBeneficiary.clientReferenceId"
                    },
                    "entity": "ReferralModel"
                  }
                ]
              }
            ],
            "rootEntity": "HouseholdModel",
            "wrapperName": "HouseholdWrapper",
            "searchConfig": {
              "select": ["household", "individual", "householdMember", "projectBeneficiary", "task"],
              "primary": "household"
            }
          }
        },
        {
          "name": "ADD_MEMBER",
          "pages": [
            {
              "page": "beneficiaryDetails",
              "type": "object",
              "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_SCREEN_HEADING",
              "order": 4,
              "navigateTo": {
                "data": [
                  {
                    "key": "householdId",
                    "value": "{{formData.household.clientReferenceId}}"
                  }
                ],
                "name": "beneficiary-details",
                "type": "template"
              },
              "properties": [
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_nameOfIndividual",
                  "order": 1,
                  "value": "",
                  "format": "text",
                  "hidden": false,
                  "tooltip": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_nameOfIndividual_tooltip",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_nameOfIndividual_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "nameOfIndividual",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [
                    {
                      "type": "required",
                      "value": true,
                      "message": "Required field cannot be empty"
                    },
                    {
                      "type": "minLength",
                      "value": "2",
                      "message": "Size must be 2 to 200 characters"
                    },
                    {
                      "type": "maxLength",
                      "value": "200",
                      "message": "Size must be 2 to 200 characters"
                    }
                  ],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "enums": [
                    {
                      "code": "DEFAULT",
                      "name": "DEFAULT"
                    },
                    {
                      "code": "UNIQUE_BENEFICIARY_ID",
                      "name": "UNIQUE_BENEFICIARY_ID"
                    },
                    {
                      "code": "OTHER",
                      "name": "OTHER"
                    }
                  ],
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_identifiers",
                  "order": 3,
                  "value": "",
                  "format": "idPopulator",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "identifiers",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "schemaCode": "HCM.ID_TYPE_OPTIONS_POPULATOR",
                  "systemDate": false,
                  "validations": [
                    {
                      "type": "required",
                      "value": true,
                      "message": "Required field cannot be empty"
                    }
                  ],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_dobPicker",
                  "order": 4,
                  "value": "",
                  "format": "dob",
                  "hidden": false,
                  "tooltip": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_dobPicker_tooltip",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_dobPicker_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "dobPicker",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "enums": [
                    {
                      "code": "MALE",
                      "name": "MALE"
                    },
                    {
                      "code": "FEMALE",
                      "name": "FEMALE"
                    },
                    {
                      "code": "OTHER",
                      "name": "OTHER"
                    }
                  ],
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_gender",
                  "order": 5,
                  "value": "",
                  "format": "select",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "gender",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "schemaCode": "common-masters.GenderType",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "integer",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_phone",
                  "order": 6,
                  "value": "",
                  "format": "text",
                  "hidden": false,
                  "tooltip": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_phone_tooltip",
                  "helpText": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_phone_helpText",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "phone",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_scanner",
                  "order": 7,
                  "value": "",
                  "format": "scanner",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "scanner",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "isMultiSelect": false
                }
              ],
              "actionLabel": "APPONE_REGISTRATION_BENEFICIARYDETAILS_ACTION_BUTTON_LABEL_1",
              "description": "APPONE_REGISTRATION_BENEFICIARYDETAILS_SCREEN_DESCRIPTION"
            }
          ],
          "project": "CMP-2025-10-24-001599",
          "version": 1,
          "disabled": false,
          "onAction": [
            {
              "actionType": "FETCH_TRANSFORMER_CONFIG",
              "properties": {
                "data": [
                  {
                    "key": "HouseholdClientReferenceId",
                    "value": "{{contextData.navigation.HouseholdClientReferenceId}}"
                  }
                ],
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Failed to fetch config."
                    }
                  }
                ],
                "configName": "individualRegistration"
              }
            },
            {
              "actionType": "CREATE_EVENT",
              "properties": {
                "entity": "INDIVIDUAL, PROJECTBENEFICIARY, MEMBER",
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Failed to create household."
                    }
                  }
                ]
              }
            },
            {
              "actionType": "NAVIGATION",
              "properties": {
                "data": [
                  {
                    "key": "HouseholdClientReferenceId",
                    "value": "{{contextData.navigation.HouseholdClientReferenceId}}"
                  }
                ],
                "name": "householdOverview",
                "type": "TEMPLATE",
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Navigation failed."
                    }
                  }
                ]
              }
            }
          ],
          "isSelected": true,
          "screenType": "FORM",
          "wrapperConfig": {
            "filters": [
              {
                "field": "isHeadOfHousehold",
                "equals": true
              }
            ],
            "relations": [
              {
                "name": "household",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "householdClientReferenceId"
                },
                "entity": "HouseholdModel"
              },
              {
                "name": "members",
                "match": {
                  "field": "householdClientReferenceId",
                  "equalsFrom": "household.clientReferenceId"
                },
                "entity": "HouseholdMemberModel"
              },
              {
                "name": "headOfHousehold",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "HouseholdMemberModel.individualClientReferenceId"
                },
                "entity": "IndividualModel"
              },
              {
                "name": "individuals",
                "match": {
                  "field": "clientReferenceId",
                  "inFrom": "members.individualClientReferenceId"
                },
                "entity": "IndividualModel"
              },
              {
                "name": "projectBeneficiaries",
                "match": {
                  "field": "beneficiaryClientReferenceId",
                  "equalsFrom": "household.clientReferenceId"
                },
                "entity": "ProjectBeneficiaryModel"
              },
              {
                "name": "tasks",
                "match": {
                  "field": "projectBeneficiaryClientReferenceId",
                  "inFrom": "projectBeneficiaries.clientReferenceId"
                },
                "entity": "TaskModel"
              },
              {
                "name": "sideEffects",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "household.clientReferenceId"
                },
                "entity": "SideEffectModel"
              },
              {
                "name": "referrals",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "household.clientReferenceId"
                },
                "entity": "ReferralModel"
              }
            ],
            "rootEntity": "HouseholdMemberModel",
            "wrapperName": "HouseholdWrapper",
            "searchConfig": {
              "select": ["individual", "household", "householdMember", "projectBeneficiary", "task"],
              "primary": "household"
            }
          }
        },
        {
          "name": "CHECKLIST",
          "pages": [
            {
              "page": "eligibilityChecklist",
              "type": "object",
              "label": "Eligibility Checklist",
              "order": 1,
              "navigateTo": {
                "name": "household-acknowledgement",
                "type": "template"
              },
              "properties": [
                {
                  "type": "string",
                  "enums": [
                    {
                      "code": "YES",
                      "name": "YES"
                    },
                    {
                      "code": "NO",
                      "name": "NO"
                    }
                  ],
                  "label": "Is the child sick?",
                  "order": 1,
                  "value": "",
                  "format": "radio",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": true,
                  "fieldName": "ec1",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": true,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                },
                {
                  "type": "string",
                  "enums": [
                    {
                      "code": "YES",
                      "name": "YES"
                    },
                    {
                      "code": "NO",
                      "name": "NO"
                    }
                  ],
                  "label": "Is the child having fever?",
                  "order": 2,
                  "value": "",
                  "format": "radio",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": true,
                  "fieldName": "ec2",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": true,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true,
                  "visibilityCondition": {
                    "expression": "eligibilityChecklist.ec1==YES"
                  }
                },
                {
                  "type": "string",
                  "enums": [
                    {
                      "code": "YES",
                      "name": "YES"
                    },
                    {
                      "code": "NO",
                      "name": "NO"
                    }
                  ],
                  "label": "Is there any side effect to SPAQ which was administered last cycle?",
                  "order": 3,
                  "value": "",
                  "format": "radio",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": true,
                  "fieldName": "ec3",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": true,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                },
                {
                  "type": "string",
                  "enums": [
                    {
                      "code": "YES",
                      "name": "YES"
                    },
                    {
                      "code": "NO",
                      "name": "NO"
                    }
                  ],
                  "label": "Child has taken SP or CTX containing drugs in the past 28 days?",
                  "order": 3,
                  "value": "",
                  "format": "radio",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": true,
                  "fieldName": "ec4",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": true,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                }
              ],
              "actionLabel": "APPONE_REGISTRATION_DELIVERYDETAILS_ACTION_BUTTON_LABEL_1",
              "description": "APPONE_REGISTRATION_DELIVERYDETAILS_SCREEN_DESCRIPTION",
              "showAlertPopUp": {
                "title": "Ready to submit?",
                "conditions": [
                  {
                    "value": "To Administer",
                    "expression": "eligibilityChecklist.ec1==NO && eligibilityChecklist.ec3==NO && eligibilityChecklist.ec4==NO"
                  },
                  {
                    "value": "Ineligible flow",
                    "expression": "eligibilityChecklist.ec1==NO && eligibilityChecklist.ec3==NO && eligibilityChecklist.ec4==YES"
                  },
                  {
                    "value": "referral flow",
                    "expression": "DEFAULT"
                  }
                ],
                "description": "Based on responses you are going to '{value}'. Are you sure you want to proceed?",
                "primaryActionLabel": "Submit",
                "secondaryActionLabel": "Cancel"
              }
            }
          ],
          "project": "CMP-2025-10-24-001599",
          "version": 1,
          "disabled": false,
          "onAction": [
            {
              "actions": [
                {
                  "actionType": "NAVIGATION",
                  "properties": {
                    "data": [
                      {
                        "key": "selectedIndividualClientReferenceId",
                        "value": "{{contextData.navigation.selectedIndividualClientReferenceId}}"
                      }
                    ],
                    "name": "beneficiaryDetails",
                    "type": "TEMPLATE",
                    "onError": [
                      {
                        "actionType": "SHOW_TOAST",
                        "properties": {
                          "message": "Navigation failed."
                        }
                      }
                    ]
                  }
                }
              ],
              "condition": {
                "expression": "eligibilityChecklist.ec1==NO && eligibilityChecklist.ec3==NO && eligibilityChecklist.ec4==NO"
              }
            },
            {
              "actions": [
                {
                  "actionType": "FETCH_TRANSFORMER_CONFIG",
                  "properties": {
                    "onError": [
                      {
                        "actionType": "SHOW_TOAST",
                        "properties": {
                          "message": "Failed to fetch ineligible config."
                        }
                      }
                    ],
                    "configName": "ineligibleConfig"
                  }
                },
                {
                  "actionType": "CREATE_EVENT",
                  "properties": {
                    "entity": "TASK",
                    "onError": [
                      {
                        "actionType": "SHOW_TOAST",
                        "properties": {
                          "message": "Failed to create task records."
                        }
                      }
                    ]
                  }
                },
                {
                  "actionType": "NAVIGATION",
                  "properties": {
                    "data": [
                      {
                        "key": "reason",
                        "value": "SP_CTX_TAKEN_RECENTLY"
                      }
                    ],
                    "name": "householdOverview",
                    "type": "TEMPLATE",
                    "onError": [
                      {
                        "actionType": "SHOW_TOAST",
                        "properties": {
                          "message": "Navigation to flow failed."
                        }
                      }
                    ]
                  }
                }
              ],
              "condition": {
                "expression": "eligibilityChecklist.ec1==NO && eligibilityChecklist.ec3==NO && eligibilityChecklist.ec4==YES"
              }
            },
            {
              "actions": [
                {
                  "actionType": "FETCH_TRANSFORMER_CONFIG",
                  "properties": {
                    "onError": [
                      {
                        "actionType": "SHOW_TOAST",
                        "properties": {
                          "message": "Failed to fetch referral config."
                        }
                      }
                    ],
                    "configName": "referralConfig"
                  }
                },
                {
                  "actionType": "CREATE_EVENT",
                  "properties": {
                    "entity": "TASK",
                    "onError": [
                      {
                        "actionType": "SHOW_TOAST",
                        "properties": {
                          "message": "Failed to create referral records."
                        }
                      }
                    ]
                  }
                },
                {
                  "actionType": "NAVIGATION",
                  "properties": {
                    "data": [
                      {
                        "key": "referralReason",
                        "value": "HEALTH_COMPLICATIONS"
                      }
                    ],
                    "name": "REFERRAL",
                    "type": "FORM",
                    "onError": [
                      {
                        "actionType": "SHOW_TOAST",
                        "properties": {
                          "message": "Navigation to referral flow failed."
                        }
                      }
                    ]
                  }
                }
              ],
              "condition": {
                "expression": "DEFAULT"
              }
            }
          ],
          "isSelected": true,
          "screenType": "FORM"
        },
        {
          "body": [
            {
              "type": "primary",
              "format": "card",
              "children": [
                {
                  "data": [
                    {
                      "key": "Name",
                      "value": "{{contextData.0.individuals.IndividualModel.name.givenName}}"
                    },
                    {
                      "key": "ID Type",
                      "value": "{{contextData.0.individuals.IndividualModel.identifiers.0.identifierType}}"
                    },
                    {
                      "key": "ID Number",
                      "value": "{{contextData.0.individuals.IndividualModel.identifiers.0.identifierId}}"
                    },
                    {
                      "key": "Age",
                      "value": "{{fn:formatDate(contextData.0.individuals.IndividualModel.dateOfBirth, age)}}"
                    },
                    {
                      "key": "Gender",
                      "value": "{{contextData.0.individuals.IndividualModel.gender}}"
                    },
                    {
                      "key": "Mobile Number",
                      "value": "{{contextData.0.individuals.IndividualModel.mobileNumber}}"
                    },
                    {
                      "key": "Date of Registration",
                      "value": "{{fn:formatDate(contextData.0.projectBeneficiaries.ProjectBeneficiaryModel.dateOfRegistration, date, dd MMMM yyyy)}}"
                    }
                  ],
                  "format": "labelPairList"
                }
              ]
            },
            {
              "type": "primary",
              "format": "card",
              "children": [
                {
                  "data": {
                    "rows": "{{contextData.0.targetCycle.0.deliveries}}",
                    "source": "contextData.targetCycle.deliveries",
                    "columns": [
                      {
                        "header": "Dose",
                        "cellValue": "Dose {{item.id}}"
                      },
                      {
                        "header": "Status",
                        "cellValue": {
                          "@default": "Unknown",
                          "@condition": [
                            {
                              "when": "{{currentItem.id}} < {{contextData.nextDoseId}}",
                              "value": "Administered"
                            },
                            {
                              "when": "{{currentItem.id}} == {{contextData.nextDoseId}}",
                              "value": "To be administered"
                            },
                            {
                              "when": "{{currentItem.id}} > {{contextData.nextDoseId}}",
                              "value": "Incomplete"
                            }
                          ]
                        }
                      },
                      {
                        "header": "Completed On",
                        "cellValue": ""
                      }
                    ]
                  },
                  "format": "table"
                }
              ]
            }
          ],
          "name": "beneficiaryDetails",
          "footer": [
            {
              "label": "Record Cycle {{nextCycleId}} Dose {{nextDoseId}}",
              "format": "button",
              "onAction": [
                {
                  "actionType": "NAVIGATION",
                  "properties": {
                    "data": [
                      {
                        "key": "ProjectBeneficiaryClientReferenceId",
                        "value": "{{projectBeneficiaries.ProjectBeneficiaryModel.clientReferenceId}}"
                      },
                      {
                        "key": "HouseholdClientReferenceId",
                        "value": "{{household.HouseholdModel.clientReferenceId}}"
                      },
                      {
                        "key": "cycleIndex",
                        "value": "{{nextCycleId}}"
                      },
                      {
                        "key": "doseIndex",
                        "value": "{{nextDoseId}}"
                      }
                    ],
                    "name": "DELIVERY",
                    "type": "FORM"
                  }
                }
              ],
              "properties": {
                "size": "large",
                "type": "primary",
                "mainAxisSize": "max",
                "mainAxisAlignment": "center"
              }
            }
          ],
          "header": [
            {
              "label": "Back",
              "format": "backLink",
              "onAction": [
                {
                  "actionType": "BACK_NAVIGATION",
                  "properties": {
                    "name": "householdOverview",
                    "type": "TEMPLATE"
                  }
                }
              ]
            }
          ],
          "heading": "Beneficiary Details",
          "screenType": "TEMPLATE",
          "description": "Details of beneficiary",
          "initActions": [
            {
              "actionType": "SEARCH_EVENT",
              "properties": {
                "data": [
                  {
                    "key": "clientReferenceId",
                    "value": "{{navigation.selectedIndividualClientReferenceId}}",
                    "operation": "equals"
                  }
                ],
                "name": "individual",
                "type": "SEARCH_EVENT"
              }
            }
          ],
          "wrapperConfig": {
            "fields": {
              "dose": {
                "from": "{{tasks.additionalFields.fields}}",
                "where": {
                  "left": "{{key}}",
                  "right": "doseIndex",
                  "operator": "eq"
                },
                "select": "{{value}}",
                "default": 0,
                "takeLast": true
              },
              "cycle": {
                "from": "{{tasks.additionalFields.fields}}",
                "where": {
                  "left": "{{key}}",
                  "right": "cycleIndex",
                  "operator": "eq"
                },
                "select": "{{value}}",
                "default": 1,
                "takeLast": true
              }
            },
            "filters": [],
            "computed": {
              "nextDoseId": {
                "fallback": "{{dose}}",
                "condition": {
                  "if": {
                    "left": "{{dose}}",
                    "right": "{{deliveryLength}}",
                    "operator": "lt"
                  },
                  "else": 1,
                  "then": {
                    "value": "{{dose}}",
                    "operation": "increment"
                  }
                }
              },
              "nextCycleId": {
                "fallback": "{{cycle}}",
                "condition": {
                  "if": {
                    "left": "{{dose}}",
                    "right": "{{deliveryLength}}",
                    "operator": "lt"
                  },
                  "else": {
                    "value": "{{cycle}}",
                    "operation": "increment"
                  },
                  "then": "{{cycle}}"
                }
              },
              "deliveryLength": {
                "map": "{{deliveries.length}}",
                "from": "{{singleton.selectedProject.additionalDetails.projectType.cycles}}",
                "where": {
                  "left": "{{id}}",
                  "right": "{{currentRunningCycle}}",
                  "operator": "equals"
                },
                "default": 0
              },
              "hasCycleArrived": {
                "fallback": false,
                "condition": {
                  "left": "{{cycle}}",
                  "right": "{{currentRunningCycle}}",
                  "operator": "equals"
                }
              },
              "currentRunningCycle": {
                "from": "{{singleton.selectedProject.additionalDetails.projectType.cycles}}",
                "where": [
                  {
                    "left": "{{startDate}}",
                    "right": "{{now}}",
                    "operator": "lt"
                  },
                  {
                    "left": "{{endDate}}",
                    "right": "{{now}}",
                    "operator": "gt"
                  }
                ],
                "select": "{{id}}",
                "default": -1,
                "takeFirst": true
              }
            },
            "relations": [
              {
                "name": "members",
                "match": {
                  "field": "individualClientReferenceId",
                  "equalsFrom": "IndividualModel.clientReferenceId"
                },
                "entity": "HouseholdMemberModel"
              },
              {
                "name": "household",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "members.householdClientReferenceId"
                },
                "entity": "HouseholdModel"
              },
              {
                "name": "individuals",
                "match": {
                  "field": "clientReferenceId",
                  "inFrom": "members.individualClientReferenceId"
                },
                "entity": "IndividualModel"
              },
              {
                "name": "projectBeneficiaries",
                "match": {
                  "field": "beneficiaryClientReferenceId",
                  "equalsFrom": "individuals.clientReferenceId"
                },
                "entity": "ProjectBeneficiaryModel"
              },
              {
                "name": "tasks",
                "match": {
                  "field": "projectBeneficiaryClientReferenceId",
                  "inFrom": "projectBeneficiaries.clientReferenceId"
                },
                "entity": "TaskModel"
              },
              {
                "name": "sideEffects",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "projectBeneficiaries.clientReferenceId"
                },
                "entity": "SideEffectModel"
              },
              {
                "name": "referrals",
                "match": {
                  "field": "clientReferenceId",
                  "equalsFrom": "projectBeneficiaries.clientReferenceId"
                },
                "entity": "ReferralModel"
              }
            ],
            "rootEntity": "IndividualModel",
            "wrapperName": "DeliveryWrapper",
            "computedList": {
              "pastCycles": {
                "from": "singleton.selectedProject.additionalDetails.projectType.cycles",
                "where": {
                  "left": "{{item.id}}",
                  "right": "{{cycle}}",
                  "operator": "lt"
                },
                "includeCurrentIf": {
                  "condition": {
                    "left": "{{dose}}",
                    "right": "{{deliveryLength}}",
                    "operator": "eq"
                  }
                }
              },
              "futureTasks": {
                "from": "{{tasks}}",
                "where": {
                  "left": "{{item.additionalFields.deliveryStrategy}}",
                  "right": "INDIRECT",
                  "operator": "equals"
                }
              },
              "targetCycle": {
                "from": "{{singleton.selectedProject.additionalDetails.projectType.cycles}}",
                "where": {
                  "left": "{{id}}",
                  "right": "{{currentRunningCycle}}",
                  "operator": "equals"
                },
                "fallback": null,
                "takeLast": true
              },
              "currentDelivery": {
                "from": "{{targetCycle.0.deliveries}}",
                "where": {
                  "left": "{{id}}",
                  "right": "{{nextDoseId}}",
                  "operator": "equals"
                },
                "fallback": null,
                "takeLast": true
              },
              "futureDeliveries": {
                "map": "{{item.deliveries}}",
                "from": "singleton.selectedProject.additionalDetails.projectType.cycles",
                "skip": {
                  "from": "{{dose}}"
                },
                "takeWhile": {
                  "left": "{{item.deliveryStrategy}}",
                  "right": "INDIRECT",
                  "operator": "equals"
                }
              },
              "eligibleProductVariants": {
                "from": "{{currentDelivery.0.doseCriteria}}",
                "fallback": [],
                "takeLast": false,
                "evaluateCondition": {
                  "context": ["{{individuals.0}}", "{{household.0}}"],
                  "condition": "{{item.condition}}",
                  "transformations": {
                    "age": {
                      "type": "ageInMonths",
                      "source": "dateOfBirth"
                    }
                  }
                }
              }
            },
            "searchConfig": {
              "select": ["individual", "household", "householdMember", "projectBeneficiary", "task"],
              "primary": "individual"
            }
          }
        },
        {
          "name": "DELIVERY",
          "pages": [
            {
              "page": "DeliveryDetails",
              "type": "object",
              "label": "APPONE_REGISTRATION_DELIVERYDETAILS_SCREEN_HEADING",
              "order": 1,
              "navigateTo": {
                "name": "household-acknowledgement",
                "type": "template"
              },
              "properties": [
                {
                  "type": "integer",
                  "label": "APPONE_REGISTRATION_DELIVERYDETAILS_label_dateOfDelivery",
                  "order": 1,
                  "value": "",
                  "format": "date",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": true,
                  "fieldName": "dateOfRegistration",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": true,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                },
                {
                  "type": "dynamic",
                  "enums": [
                    {
                      "code": "SP1",
                      "name": "SP1"
                    },
                    {
                      "code": "SP2",
                      "name": "SP2"
                    },
                    {
                      "code": "AQ1",
                      "name": "AQ1"
                    },
                    {
                      "code": "AQ2",
                      "name": "AQ2"
                    }
                  ],
                  "label": "APPONE_REGISTRATION_DELIVERYDETAILS_label_resource",
                  "order": 2,
                  "value": "",
                  "format": "custom",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "resourceCard",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_deliveryComments",
                  "order": 3,
                  "value": "",
                  "format": "dropdown",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "deliveryComment",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "schemaCode": "HCM.DELIVERY_COMMENT_OPTIONS_POPULATOR",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_DELIVERYDETAILS_label_scanner",
                  "order": 4,
                  "value": "",
                  "format": "scanner",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "scanner",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                }
              ],
              "actionLabel": "APPONE_REGISTRATION_DELIVERYDETAILS_ACTION_BUTTON_LABEL_1",
              "description": "APPONE_REGISTRATION_DELIVERYDETAILS_SCREEN_DESCRIPTION"
            }
          ],
          "project": "CMP-2025-10-24-001599",
          "version": 1,
          "disabled": false,
          "onAction": [
            {
              "actionType": "FETCH_TRANSFORMER_CONFIG",
              "properties": {
                "data": [
                  {
                    "key": "ProjectBeneficiaryClientReferenceId",
                    "value": "{{contextData.navigation.ProjectBeneficiaryClientReferenceId}}"
                  },
                  {
                    "key": "cycleIndex",
                    "value": "{{navigation.cycleIndex}}"
                  },
                  {
                    "key": "doseIndex",
                    "value": "{{navigation.doseIndex}}"
                  }
                ],
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Failed to fetch config."
                    }
                  }
                ],
                "configName": "delivery"
              }
            },
            {
              "actionType": "CREATE_EVENT",
              "properties": {
                "entity": "HOUSEHOLD, INDIVIDUAL, PROJECTBENEFICIARY, MEMBER",
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Failed to create household."
                    }
                  }
                ]
              }
            },
            {
              "actionType": "NAVIGATION",
              "properties": {
                "data": [
                  {
                    "key": "ProjectBeneficiaryClientReferenceId",
                    "value": "{{contextData.navigation.ProjectBeneficiaryClientReferenceId}}"
                  },
                  {
                    "key": "HouseholdClientReferenceId",
                    "value": "{{contextData.navigation.HouseholdClientReferenceId}}"
                  }
                ],
                "name": "deliverySuccess",
                "type": "TEMPLATE",
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Navigation failed."
                    }
                  }
                ]
              }
            }
          ],
          "isSelected": true,
          "screenType": "FORM"
        },
        {
          "name": "REFERRAL",
          "pages": [
            {
              "page": "DeliveryDetails",
              "type": "object",
              "label": "APPONE_REGISTRATION_DELIVERYDETAILS_SCREEN_HEADING",
              "order": 1,
              "navigateTo": {
                "name": "household-acknowledgement",
                "type": "template"
              },
              "properties": [
                {
                  "type": "integer",
                  "label": "APPONE_REGISTRATION_DELIVERYDETAILS_label_dateOfDelivery",
                  "order": 1,
                  "value": "",
                  "format": "date",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": true,
                  "fieldName": "dateOfRegistration",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": true,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                },
                {
                  "type": "dynamic",
                  "label": "APPONE_REGISTRATION_DELIVERYDETAILS_label_resource",
                  "order": 2,
                  "value": "",
                  "format": "custom",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "resourceCard",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_BENEFICIARYDETAILS_label_deliveryComments",
                  "order": 3,
                  "value": "",
                  "format": "dropdown",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "deliveryComment",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "schemaCode": "HCM.DELIVERY_COMMENT_OPTIONS_POPULATOR",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                },
                {
                  "type": "string",
                  "label": "APPONE_REGISTRATION_DELIVERYDETAILS_label_scanner",
                  "order": 4,
                  "value": "",
                  "format": "scanner",
                  "hidden": false,
                  "tooltip": "",
                  "helpText": "",
                  "infoText": "",
                  "readOnly": false,
                  "fieldName": "scanner",
                  "deleteFlag": false,
                  "innerLabel": "",
                  "systemDate": false,
                  "validations": [],
                  "errorMessage": "",
                  "includeInForm": true,
                  "isMultiSelect": false,
                  "includeInSummary": true
                }
              ],
              "actionLabel": "APPONE_REGISTRATION_DELIVERYDETAILS_ACTION_BUTTON_LABEL_1",
              "description": "APPONE_REGISTRATION_DELIVERYDETAILS_SCREEN_DESCRIPTION"
            }
          ],
          "project": "CMP-2025-10-24-001599",
          "version": 1,
          "disabled": false,
          "onAction": [
            {
              "actionType": "FETCH_TRANSFORMER_CONFIG",
              "properties": {
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Failed to fetch config."
                    }
                  }
                ],
                "configName": "delivery"
              }
            },
            {
              "actionType": "CREATE_EVENT",
              "properties": {
                "entity": "HOUSEHOLD, INDIVIDUAL, PROJECTBENEFICIARY, MEMBER",
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Failed to create household."
                    }
                  }
                ]
              }
            },
            {
              "actionType": "NAVIGATION",
              "properties": {
                "name": "deliverySuccess",
                "type": "TEMPLATE",
                "onError": [
                  {
                    "actionType": "SHOW_TOAST",
                    "properties": {
                      "message": "Navigation failed."
                    }
                  }
                ]
              }
            }
          ],
          "isSelected": true,
          "screenType": "FORM"
        },
        {
          "body": [
            {
              "label": "Delivery Successful",
              "format": "panelCard",
              "properties": {
                "type": "success"
              },
              "description": "The resource is successfully delivered",
              "primaryAction": {
                "label": "View Household Details",
                "onAction": [
                  {
                    "actionType": "NAVIGATION",
                    "properties": {
                      "data": [
                        {
                          "key": "HouseholdClientReferenceId",
                          "value": "{{contextData.navigation.HouseholdClientReferenceId}}"
                        }
                      ],
                      "name": "householdOverview",
                      "type": "TEMPLATE"
                    }
                  }
                ]
              },
              "secondaryAction": {
                "label": "Go back to home",
                "onAction": [
                  {
                    "actionType": "NAVIGATION",
                    "properties": {
                      "name": "searchBeneficiary",
                      "type": "TEMPLATE"
                    }
                  }
                ]
              }
            }
          ],
          "name": "deliverySuccess",
          "header": [
            {
              "label": "Back",
              "format": "backLink",
              "onAction": [
                {
                  "actionType": "BACK_NAVIGATION",
                  "properties": {
                    "name": "householdOverview",
                    "type": "TEMPLATE"
                  }
                }
              ]
            }
          ],
          "heading": "Successful Delivery",
          "screenType": "TEMPLATE",
          "description": "The delivery is successful"
        }
      ],
      "project": "CMP-2025-10-24-001599",
      "version": 1,
      "disabled": false,
      "isSelected": true,
      "initialPage": "searchBeneficiary"
    },
    "isActive": true,
    "auditDetails": {
      "createdBy": "40dceade-992d-4a8f-8243-19dda76a4171",
      "lastModifiedBy": "40dceade-992d-4a8f-8243-19dda76a4171",
      "createdTime": 1761252612431,
      "lastModifiedTime": 1761252612431
    }
  }
]
